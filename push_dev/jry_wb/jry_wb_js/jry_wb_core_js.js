jry_wb_onload_function_data=null;function jry_wb_add_load(func){var oldonload=jry_wb_onload_function_data;if(typeof jry_wb_onload_function_data!='function')jry_wb_onload_function_data=func;else jry_wb_onload_function_data=function(){if(oldonload)oldonload();func();};return func;}var __loading_count=1;function jry_wb_loading_on(){__loading_count++;document.getElementById('__LOAD').style.display='';}function jry_wb_loading_off(){__loading_count--;if(__loading_count<=0)document.getElementById('__LOAD').style.display='none';}function jry_wb_add_onresize(func){var oldonresize=window.onresize;if(typeof window.onresize!='function')window.onresize=func;else window.onresize=function(){if(oldonresize)oldonresize();func();};return func;}function jry_wb_add_onclick(func){var oldonclick=window.onclick;if(typeof window.onclick!='function')window.onclick=func;else window.onclick=function(event){if(oldonclick)oldonclick(event);func(event);};return func;}function jry_wb_add_onmouseup(func){var oldonmouseup=window.onmouseup;if(typeof window.onmouseup!='function')window.onmouseup=func;else window.onmouseup=function(event){if(oldonmouseup)oldonmouseup(event);func(event);};return func;}function jry_wb_add_onmousemove(func){var oldmousemove=window.onmousemove;if(typeof window.onmousemove!='function')window.onmousemove=func;else window.onmousemove=function(event){if(oldmousemove);oldmousemove(event);func(event);};return func;}function jry_wb_add_onscroll(func){var oldonscroll=window.onscroll;if(typeof window.onscroll!='function')window.onscroll=func;else window.onscroll=function(event){if(oldonscroll);oldonscroll(event);func(event);};return func;}function jry_wb_add_oncontextmenu(func){if(typeof func=='object'){func.ontouchstart=function(event){if(typeof event=='undefined'||event==undefined)event=window.event;if(event.touches!=null&&event.touches.length>1)return;else if(event.changedTouches!=null&event.changedTouches.length>1)return;func.ontouchstart_timer=new Date();};func.ontouchmove=function(event){if(typeof event=='undefined'||event==undefined)event=window.event;if(event.touches!=null&&event.touches.length>1)func.ontouchstart_timer=undefined;else if(event.changedTouches!=null&event.changedTouches.length>1)func.ontouchstart_timer=undefined;};func.ontouchend=function(event){if(typeof func.ontouchstart_timer=='undefined'||func.ontouchstart_timer==undefined)return;if((new Date()-func.ontouchstart_timer)<200){if(typeof func.onclick=='function')func.onclick(event);}else if((new Date()-func.ontouchstart_timer)<10000){if(typeof func.oncontextmenu=='function')func.oncontextmenu(event);}func.ontouchstart_timer=undefined;};func.addEventListener('touchstart',func.ontouchstart);func.addEventListener('touchmove',func.ontouchmove);func.addEventListener('touchend',func.ontouchend);}else{var oldoncontextmenu=window.oncontextmenu;if(typeof window.oncontextmenu!='function')window.oncontextmenu=func;else window.oncontextmenu=function(event){if(oldoncontextmenu);oldoncontextmenu(event);func(event);};}return func;}function jry_wb_add_onbeforeunload(func){var oldonbeforeunload=window.onbeforeunload;if(typeof window.onbeforeunload!='function')window.onbeforeunload=func;else window.onbeforeunload=function(event){if(oldonbeforeunload);oldonbeforeunload(event);func(event);};return func;}function jry_wb_ajax_load_data(url,func,array,tong){jry_wb_loading_on();if(tong==null)tong=true;var xmlhttp;if(window.XMLHttpRequest)xmlhttp=new XMLHttpRequest();else xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");var clearTO=setTimeout(function(){xmlhttp.abort();jry_wb_beautiful_alert.alert("网络异常","请您刷新页面或稍后再试");jry_wb_loading_off();},20000);xmlhttp.onreadystatechange=function(){if(xmlhttp.readyState==4){clearTimeout(clearTO);if(xmlhttp.status==200)func(xmlhttp.responseText);else{if(xmlhttp.status==500)jry_wb_beautiful_alert.alert("吔!服务器异常!","请您把开发组从床上叫起来修复BUG后再试");else if(xmlhttp.status==404)jry_wb_beautiful_alert.alert("吔!找不到了耶!","请您带上黑框眼镜后再试");else if(xmlhttp.status==503)jry_wb_beautiful_alert.alert("吔!禁止访问!","小孩子不能进米奇妙妙屋哦");xmlhttp.abort();jry_wb_loading_off();}}};xmlhttp.open("POST",url,tong);if(tong)xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var data='';if(typeof array=='object'&&array!=null){var i=0;for(;i<array.length-1;i++)data+=array[i].name+'='+String(array[i].value).replace(/&/g,"/37").replace(/\+/g,"/43")+'&';data+=array[i].name+'='+String(array[i].value).replace(/&/g,"/37").replace(/\+/g,"/43");}xmlhttp.send(data);}function jry_wb_ajax_get_text(data){return data.replace(/\/37/g,"&").replace(/\/43/g,"+")}Array.prototype.unique=function(){var res=[];var json={};for(var i=0;i<this.length;i++){if(!json[this[i]]){res.push(this[i]);json[this[i]]=1;}}return res;};var jry_wb_background_music=new function(){var inited=false;var timer=null;var timer_close=null;this.playing_status;this.oncontrol=false;this.leave=false;this.init=function(list){if(!jry_wb_test_is_pc())return;this.list=list==null?[]:list;if(list!=null)this.list=list;if(!inited){if(typeof jry_wb_login_user!='undefined')this.song_list=jry_wb_get_songs_by_mid(jry_wb_login_user.background_music_list);this.backgroundmusic_icon=document.createElement("p");jry_wb_right_tools.add(this.backgroundmusic_icon);this.backgroundmusic_icon.id='jry_wb_left_button_backgroundmusic_icon';this.backgroundmusic_icon.classList.add('jry_wb_icon_changpian','jry_wb_icon');this.backgroundmusic_icon.style="z-index:9999;margin:0px;right:0px;position:fixed;width:35px;height:35px;font-size:35px";this.backgroundmusic_control=document.createElement("div");document.body.appendChild(this.backgroundmusic_control);this.backgroundmusic_control.id='jry_wb_left_button_backgroundmusic_control';this.backgroundmusic_control.style="z-index:9999;right:35px;display:none;position:fixed;width:auto;overflow:unset;width:300px;";this.backgroundmusic_control.onmouseover=this.backgroundmusic_icon.onmouseover=this.backgroundmusic_icon.onclick=()=>{if(timer!=null)clearTimeout(timer);if(timer_close!=null)clearTimeout(timer_close);timer=timer_close=null;if(!jry_wb_test_is_pc())timer_close=setTimeout(()=>{this.backgroundmusic_control.style.display="none";clearTimeout(timer);},10000);this.beautiful.beautiful_scroll.style.height=this.beautiful.list_area.clientHeight-parseFloat(getComputedStyle(this.beautiful.list_area,false)['border-bottom-right-radius']);this.backgroundmusic_control.style.display="";this.backgroundmusic_control.style.top=parseInt(this.backgroundmusic_icon.style.top)-this.backgroundmusic_control.clientHeight*0.5;};this.backgroundmusic_control.onmouseout=this.backgroundmusic_icon.onmouseout=()=>{if(typeof jry_wb_dev_mode=='undefined'||jry_wb_dev_mode==false)timer=setTimeout(()=>{this.backgroundmusic_control.style.display="none";if(timer_close!=null)clearTimeout(timer_close);},500);};if(document.visibilityState!='hidden'){jry_wb_js_session.send(1,'get');this.oncontrol|=true;}if(this.oncontrol){jry_wb_cache.set('background_music_playing',true);};this.passive=false;this.audio=document.createElement("audio");document.body.appendChild(this.audio);this.beautiful=new jry_wb_beautiful_music(this.audio,this.backgroundmusic_control,true);this.beautiful.do_reply_count(1);var old_onplay=this.audio.onplay;var old_onpause=this.audio.onpause;var old_ontimeupdate=this.audio.ontimeupdate;this.audio.onplay=()=>{this.playing_status=true;this.oncontrol=true;this.playing=this.song_list.find((a)=>{return a.music_url==this.audio.src});this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);this.backgroundmusic_icon.classList.add("jry_wb_rotate");this.save(true);old_onplay();};this.audio.onpause=()=>{if(!this.passive)this.playing_status=false;this.backgroundmusic_icon.classList.remove("jry_wb_rotate");this.save(false);old_onpause();};this.audio.ontimeupdate=()=>{old_ontimeupdate();this.save(true);};this.jry_background_music_flag=true;inited=true;jry_wb_add_onbeforeunload(()=>{var playing=jry_wb_cache.get('background_music');playing.status=(!this.passive)?this.status():(this.playing_status);if(this.oncontrol){jry_wb_cache.set('background_music',playing);jry_wb_cache.set('background_music_playing',false);this.leave=true;}});this.backup();if(this.playing==null||this.playing.mid==null){this.beautiful.push_song_list(this.song_list);jry_wb_beautiful_right_alert.alert("您可以打开BGM",5000,'auto','ok');}return true;}return false;};this.save=function(status){if(!jry_wb_test_is_pc())return;if(status==undefined)status=this.status();jry_wb_cache.set('background_music',{'status':status,'time':this.currenttime(),'volume':this.audio.volume,'mid':this.playing.mid,'type':this.playing.type,'cycle':this.beautiful.reply_count});};this.setsrc=function(type,mid,callback){if(!jry_wb_test_is_pc())return;if(!inited)this.init(document.body);this.mid=mid;this.type=type;this.playing=jry_wb_get_songs_by_mid([{'type':type,'mid':mid}])[0];this.beautiful.set_background_picture(this.playing.pic_url,this.playing.type);if(this.audio.src!=this.playing.music_url)this.audio.src=this.playing.music_url;if(typeof callback=='function')callback();return this.audio.src;};this.backup=function(set){if(!jry_wb_test_is_pc())return;var playing=jry_wb_cache.get('background_music');this.beautiful.reply_count=playing==null?1:playing.cycle;this.beautiful.cycle_button_update();if(playing==null||playing.mid==null){}else{this.playing=playing;this.playing.music_url=this.setsrc(playing.type,playing.mid);this.audio.oncanplay=()=>{if(this.oncontrol){this.status(playing.status==null?true:(playing.status));}this.audio.oncanplay=function(){};};this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);this.currenttime(playing.time==null?0:playing.time);this.volume(playing.volume==null?0.2:playing.volume);this.beautiful.update_volume_bar();}};this.push_song_list=function(list_old){if(!jry_wb_test_is_pc())return;this.song_list=jry_wb_get_songs_by_mid(list_old);this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);};this.volume=function(volume){if(!jry_wb_test_is_pc())return;return(volume==undefined?this.audio.volume:(this.audio.volume=volume));};this.currenttime=function(currenttime){if(!jry_wb_test_is_pc())return;return(currenttime==undefined?this.audio.currentTime:(this.audio.currentTime=currenttime));};this.status=function(status){if(!jry_wb_test_is_pc())return;return status==undefined?(!this.audio.paused):(status?this.audio.play():this.audio.pause());};this.break=function(){if(!jry_wb_test_is_pc())return;this.passive=true;this.status(false);this.save(true);};this.continue=function(){if(!jry_wb_test_is_pc())return;this.backup();this.passive=false;if(this.playing!=null)this.beautiful.do_reply_count(this.playing.cycle);this.status(this.playing_status);};};function jry_wb_beautiful_alert_function(){var buff=function(){};this.frame=function(msgtitle,width,height,x,y,important){buff=window.onmousewheel;if(document.addEventListener)document.removeEventListener('DOMMouseScroll',window.onmousewheel);window.onmousewheel=function(){};if(important==undefined)important=false;this.bgObj=document.createElement("div");this.bgObj.onmousewheel=function(event){return false;};this.bgObj.classList.add('jry_wb_beautiful_alert_background_div');this.bgObj.style.zIndex=important?'10001':'9999';document.body.appendChild(this.bgObj);this.msgObj=document.createElement("div");this.msgObj.classList.add('jry_wb_beautiful_alert_message_div');this.msgObj.style.top=y;this.msgObj.style.left=x;this.msgObj.style.width=width;this.msgObj.style.height=height;this.msgObj.style.zIndex=important?'10001':'9999';document.body.appendChild(this.msgObj);var title=document.createElement("div");title.classList.add('jry_wb_beautiful_alert_title');title.style="overflow:hidden;";title.align="center";title.style.width=width;if(msgtitle)title.innerHTML=msgtitle;else title.innerHTML="系统提示";this.msgObj.appendChild(title);bgObj=null;return title;};this.close=function(){document.body.removeChild(this.bgObj);document.body.removeChild(this.msgObj);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;};this.prompt=function(msgtitle,func){this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2);var txt=document.createElement("input");this.msgObj.appendChild(txt);txt.classList.add("jry_wb_beautiful_alert_text","h56");txt=null;var buttom=document.createElement("div");this.msgObj.appendChild(buttom);buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;";var Confirm=document.createElement("input");buttom.appendChild(Confirm);Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");Confirm.type='button';Confirm.value="确认";Confirm.style.bottom=0;Confirm.onclick=function(event){var value=Confirm.parentNode.parentNode.getElementsByTagName('input')[0].value;if(value!='')func(value);else jry_wb_beautiful_right_alert.alert('未执行操作',2000,'auto');document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;};this.msgObj.onmousewheel=function(event){return false;};};this.check=function(msgtitle,funcy,funcn,wordy,wordn){if(wordy==null)wordy='确定';if(wordn==null)wordn='取消';this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2,true);var buttom=document.createElement("div");this.msgObj.appendChild(buttom);buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;";var Confirm=document.createElement("input");Confirm.type="button";Confirm.value=wordy;Confirm.style.bottom=0;Confirm.onclick=function(event){document.body.removeChild(event.target.parentNode.parentNode.previousSibling);document.body.removeChild(event.target.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;funcy();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");buttom.appendChild(Confirm);Confirm=null;var Confirm=document.createElement("input");buttom.appendChild(Confirm);Confirm.type="button";Confirm.value=wordn;Confirm.style.bottom=0;Confirm.onclick=function(event){document.body.removeChild(event.target.parentNode.parentNode.previousSibling);document.body.removeChild(event.target.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;funcn();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_error");Confirm=null;msgbutton=null;this.msgObj.onmousewheel=function(event){return false;};};this.alert=function(msgtitle,msgbody,func){this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2,true);var txt=document.createElement("div");this.msgObj.appendChild(txt);txt.classList.add("jry_wb_beautiful_alert_text");txt.innerHTML=msgbody;txt=null;var buttom=document.createElement("div");this.msgObj.appendChild(buttom);buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;";var Confirm=document.createElement("input");buttom.appendChild(Confirm);Confirm.setAttribute("type","button");Confirm.setAttribute("value","确认");Confirm.style.bottom=0;var old_onkeydown=document.onkeydown;document.onkeydown=function(e){if(!e)e=window.event;var keycode=(e.keyCode||e.which);if(keycode==jry_wb_keycode_enter)Confirm.onclick(e);return false;};if(typeof func==='function'){Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func();document.onkeydown=old_onkeydown;};}else{Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;if(typeof func!="undefined")eval(func);document.onkeydown=old_onkeydown;};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");this.msgObj.onmousewheel=function(event){return false;};};this.open=function(msgtitle,width,height,url,func){var title=this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var txt=document.createElement("iframe");txt.setAttribute("src",url);txt.setAttribute("seamless",'seamless');txt.setAttribute("frameborder",'0');txt.setAttribute("width",'100%');txt.style.width=height-title.getBoundingClientRect().top;this.msgObj.appendChild(txt);jry_wb_beautiful_right_alert.alert('加载内联页面中，请稍等',1000,'auto','warn');jry_wb_loading_on();txt.onload=function(){jry_wb_beautiful_right_alert.alert('加载内联页面完毕',500,'auto','ok');jry_wb_loading_off();window.onresize();};txt=null;var Confirm=document.createElement("button");title.appendChild(Confirm);Confirm.type="button";Confirm.innerHTML="关闭";Confirm.style='float:right;margin-right:20px;';if(typeof func==='function'){Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func();};}else{Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;if(typeof func!="undefined")eval(func);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");new jry_wb_beautiful_scroll(this.msgObj);};this.openvideo=function(msgtitle,width,height,url,func,show_close_button){if(show_close_button==null||typeof show_close_button!="function")show_close_button=function(){return true;};var title=this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var div=document.createElement("div");this.msgObj.appendChild(div);div.style="width:100%;margin:0;padding:0;overflow-y:scroll;overflow-x:hidden;";div.style.height=height-title.clientHeight;div.align='center';var video=document.createElement("video");div.appendChild(video);video.style='height:100%;width:100%;';video.src=url;var timer=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(!isNaN(ratio)){clearInterval(timer);maxwidth=width;maxheight=height-title.clientHeight;height=maxwidth*ratio;width=maxheight/ratio;if(height>maxheight){div.style.height=maxheight;div.style.width=maxheight/ratio;div.style.paddingLeft=(maxwidth-(maxheight/ratio))/2;}if(width>maxwidth){div.style.width=maxwidth;div.style.height=maxwidth*ratio;div.style.paddingLeft=0;}}},400);video.ontimeupdate=function(){if(show_close_button(video)){if(title.getElementsByTagName("button").length!=0)return;var Confirm=document.createElement("button");title.appendChild(Confirm);Confirm.type="button";Confirm.innerHTML="关闭";Confirm.style='float:right;margin-right:20px;';if(typeof func==='function'){Confirm.onclick=function(event){jry_wb_midia_control_all.onpause(video);document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func(video);};}else{Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;if(typeof func!="undefined")eval(func);if((!qq_music_player_paused)&&(qq_music_player.__.audio.paused))qq_music_player.play(jry_wb_cache.get("playing").id);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");}};video.ontimeupdate();var video_body=new jry_wb_beautiful_video(video);video_body.body.style.height=height-title.clientHeight;this.msgObj.onmousewheel=function(event){return false;};new jry_wb_beautiful_scroll(this.msgObj);};this.openpicture=function(msgtitle,width,height,url){var title=this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var div=document.createElement("div");this.msgObj.appendChild(div);div.style="width:100%;margin:0;padding:0;overflow:hidden;";div.align='center';var txt=document.createElement("img");txt.style.maxWidth='100%';txt.onload=function(){window.onresize();if(txt.naturalWidth<width*0.2)jry_wb_beautiful_right_alert.alert('使用shift+滚轮缩放<br>ctrl+0恢复原尺寸',5000,'auto');};if(url.indexOf("?")==-1)txt.src=url+'?size='+parseInt(width);else txt.src=url+'&size='+parseInt(width);div.appendChild(txt);var Confirm=document.createElement("button");title.appendChild(Confirm);Confirm.type="button";Confirm.innerHTML="关闭";Confirm.style='float:right;margin-right:20px;';if(typeof func==='function'){Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){});func();};}else{Confirm.onclick=function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling);document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){});if(typeof func!="undefined")eval(func);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");new jry_wb_beautiful_scroll(this.msgObj);old_onwheel=this.msgObj.onmousewheel;this.msgObj.onmousewheel=(e)=>{e=e||window.event;if(e.shiftKey){txt.style.width=Math.max(10,txt.clientWidth+(e.deltaY||e.detail*50)/10);jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){div.style.width="100%";div.style.margin="0";txt.style.maxWidth='100%';txt.style.width=txt.naturalWidth;title.style.top=0;div.style.top=0;});}else{old_onwheel(e);}return false;};if(this.msgObj.addEventListener)this.msgObj.addEventListener('DOMMouseScroll',this.msgObj.onmousewheel,false);};};var jry_wb_beautiful_alert=new jry_wb_beautiful_alert_function;function jry_wb_beautiful_music(audio,area,list,yuandi){audio.removeAttribute("controls");audio.next=false;var body=document.createElement("div");if(yuandi)audio.parentElement.insertBefore(body,audio);else area.appendChild(body);body.classList.add('jry_wb_beautiful_music_body');this.list_area=null;if(list==false)body.style.height="100px";else{this.list_area=document.createElement("div");body.appendChild(this.list_area);this.list_area.className='jry_wb_beautiful_music_list_area'}var bg_pic=document.createElement("div");body.appendChild(bg_pic);bg_pic.classList.add('jry_wb_beautiful_music_picture');var bg_pic_jiao=document.createElement("div");body.appendChild(bg_pic_jiao);bg_pic_jiao.classList.add('jry_wb_beautiful_music_picture_jiao','jry_wb_icon');var mode=document.createElement("div");body.appendChild(mode);mode.classList.add('jry_wb_beautiful_music_picture_mode');mode.innerHTML="一遍";var controls=document.createElement("div");body.appendChild(controls);controls.classList.add('jry_wb_beautiful_music_controls');var start_button=document.createElement("div");controls.appendChild(start_button);start_button.classList.add('jry_wb_beautiful_music_start_button','jry_wb_icon','jry_wb_icon_bofang');start_button.onclick=function(){if(audio.ended)audio.currentTime=0;if(audio.paused)audio.play();else audio.pause();};var progress_bar=new jry_wb_progress_bar(controls,"65%",audio.currentTime/audio.duration,parseInt(audio.currentTime)+"/"+parseInt(audio.duration),function(x){audio.currentTime=x*audio.duration;},function(x){progress_bar.span.innerText=parseInt(x*audio.duration);},"jry_wb_beautiful_music_progress_bar",'',true,false,'ok');progress_bar.progress_body.style.height="20px";var volume_button=document.createElement("div");controls.appendChild(volume_button);volume_button.classList.add('jry_beautiful_music_volume_button','jry_wb_icon','jry_wb_icon_shengyin');volume_button.onclick=function(){if(audio.muted){audio.muted=false;volume_button.classList.remove('jry_wb_icon_jingyin');volume_button.classList.add('jry_wb_icon_shengyin');}else{audio.muted=true;volume_button.classList.remove('jry_wb_icon_shengyin');volume_button.classList.add('jry_wb_icon_jingyin');}};var vioce_bar=new jry_wb_progress_bar(controls,"10%",audio.volume,parseInt(audio.volume*100)+"%",function(x){if(x!=0){audio.muted=false;volume_button.classList.remove('jry_wb_icon_jingyin');volume_button.classList.add('jry_wb_icon_shengyin');}vioce_bar.update(audio.volume=x,parseInt(audio.volume*1000)/10+"%");},function(x){vioce_bar.span.innerText=parseInt(x*100)+"%";},"jry_wb_beautiful_music_voice_bar",'',false,true);vioce_bar.set_mouse_wheel(function(delta){vioce_bar.update(audio.volume+=delta*0.001,parseInt(audio.volume*1000)/10+"%");vioce_bar.span.innerText=parseInt(audio.volume*1000)/10+"%";});vioce_bar.progress_body.style.height="100px";var old_onmouseover=vioce_bar.progress_body.onmouseover;var old_onmouseout=vioce_bar.progress_body.onmouseout;vioce_bar.progress_body.onmouseover=volume_button.onmouseover=function(){vioce_bar.progress_body.style.display="unset";old_onmouseover();};vioce_bar.progress_body.onmouseout=volume_button.onmouseout=function(){vioce_bar.progress_body.style.display="none";old_onmouseout();};this.reply_count=0;var cycle_button=document.createElement("div");controls.appendChild(cycle_button);cycle_button.classList.add("jry_beautiful_music_cycle_button","jry_wb_icon","jry_wb_icon_cuowu");cycle_button.onclick=()=>{this.reply_count++;this.reply_count%=4;this.cycle_button_update();};this.cycle_button_update=()=>{if(this.reply_count==0)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_quanbuxunhuan','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_cuowu'),mode.innerHTML="一遍";else if(this.reply_count==1)cycle_button.classList.remove('jry_wb_icon_cuowu','jry_wb_icon_quanbuxunhuan','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_danquxunhuan'),mode.innerHTML="单曲";else if(this.reply_count==2)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_cuowu','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_quanbuxunhuan'),mode.innerHTML="全部";else if(this.reply_count==3)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_quanbuxunhuan','jry_wb_icon_cuowu'),cycle_button.classList.add('jry_wb_icon_-suiji'),mode.innerHTML="随机";};audio.onprogress=function(){var loaded=0;for(var i=0;i<audio.buffered.length;i++)if(audio.buffered.start(i)<audio.currentTime&&audio.currentTime<audio.buffered.end(i))loaded=audio.buffered.end(i);progress_bar.update_buttom(loaded/audio.duration);};audio.ontimeupdate=function(){audio.onprogress();progress_bar.update(audio.currentTime/audio.duration,parseInt(audio.currentTime)+"/"+parseInt(audio.duration));};audio.onplay=function(){start_button.classList.remove('jry_wb_icon_bofang');start_button.classList.add("jry_wb_icon_zantingtingzhi");jry_wb_midia_control_all.onplay(audio);};audio.onabort=()=>{var reload_cnt=0;setTimeout(()=>{if(audio.readyState==0){var timer=setInterval(()=>{if(audio.readyState==0){reload_cnt++;if(reload_cnt>=2){audio.next=true;audio.onpause();reload_cnt=0;}else audio.load();}else{audio.play();reload_cnt=0;clearInterval(timer);}},1000);}},500);};audio.onpause=()=>{start_button.classList.remove('jry_wb_icon_zantingtingzhi');start_button.classList.add("jry_wb_icon_bofang");if(this.reply_count==1&&(audio.ended||audio.next))audio.play();if(this.reply_count==2&&(audio.ended||audio.next)&&(this.song_list!=null)){if(this.lastone.nextElementSibling!=null){var target=this.lastone.nextElementSibling;var i=parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src=this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone=target;}else{var target=this.lastone.parentNode.children[0];var i=parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src=this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone=target;}}if(this.reply_count==3&&(audio.ended||audio.next)&&(this.song_list!=null)){var target=this.lastone.parentNode.children[parseInt(Math.random()*this.lastone.parentNode.children.length)];var i=parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src=this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone=target;}jry_wb_midia_control_all.onpause(audio);audio.next=false;};window.onresize();this.body=body;this.audio=audio;this.bg_pic_jiao=bg_pic_jiao;this.bg_pic=bg_pic;this.cycle_button=cycle_button;this.mode=mode;this.vioce_bar=vioce_bar;}jry_wb_beautiful_music.prototype.update_volume_bar=function(){this.vioce_bar.update(this.audio.volume,parseInt(this.audio.volume*100)+"%");};jry_wb_beautiful_music.prototype.do_reply_count=function(reply_count){if(reply_count==null)return this.reply_count;this.reply_count=reply_count;this.reply_count%=4;this.cycle_button_update();};jry_wb_beautiful_music.prototype.set_background_picture=function(url,type){if(type=='qq')this.bg_pic_jiao.classList.remove('jry_wb_icon_wangyiyunyinle','jry_wb_icon_yinyue'),this.bg_pic_jiao.classList.add('jry_wb_icon_qq_yinyue_music_'),this.bg_pic_jiao.style.color="#02B053",this.bg_pic_jiao.style.background="#F8C913",this.bg_pic_jiao.style.borderRadius='10px';else if(type=='163'||type=='wangyi')this.bg_pic_jiao.classList.remove('jry_wb_icon_qq_yinyue_music_','jry_wb_icon_yinyue'),this.bg_pic_jiao.classList.add('jry_wb_icon_wangyiyunyinle'),this.bg_pic_jiao.style.color="#D81E06",this.bg_pic_jiao.style.background="",this.bg_pic_jiao.style.borderRadius=0;else this.bg_pic_jiao.classList.remove('jry_wb_icon_wangyiyunyinle','jry_wb_icon_qq_yinyue_music_'),this.bg_pic_jiao.classList.add('jry_wb_icon_yinyue'),this.bg_pic_jiao.style.color="#0F88EB",this.bg_pic_jiao.style.background="",this.bg_pic_jiao.style.borderRadius=0;this.bg_pic.style='background:url("'+(url==''?'':url)+'")';this.bg_pic.style.backgroundSize='cover';};jry_wb_beautiful_music.prototype.push_song_list=function(list,highlighturl){if(list!=null)this.song_list=list;if(this.song_list==null)return false;if(this.list_area==null)return false;if(this.song_list_area==undefined){this.list_area.appendChild(this.song_list_area=document.createElement("div"));this.song_list_area.classList.add('jry_wb_beautiful_music_list_area_song');}else this.song_list_area.innerHTML='';for(var i=0,n=this.song_list.length;i<n;i++){var one=document.createElement("div");this.song_list_area.appendChild(one);one.classList.add('jry_wb_beautiful_music_list_area_song_one');one.innerHTML=this.song_list[i].name;one.value=i;one.onclick=(event)=>{if(!event)var event=window.event;var i=parseInt(event.target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.audio.src=this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');event.target.classList.add('active');this.lastone=event.target;this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;if(this.song_list[i].mid=="000oxiWq0t7aZ2"){jry_wb_launch_full_screen(document.documentElement);var a=document.createElement('div');document.body.appendChild(a);a.style.backgroundColor='#ff0000';a.style.height='100%';a.style.width='100%';a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.opacity=1;a.style.zIndex=99999999999;var flag=0;var timer=setInterval(function(){if(flag%2==0){a.style.backgroundColor='#ffff00';}else{a.style.backgroundColor='#ff0000';}if(flag>20){document.body.removeChild(a);clearInterval(timer);a=undefined;flag=undefined;timer=undefined;jry_wb_exit_full_screen();}flag++;},200);}};if(highlighturl==this.song_list[i].music_url&&highlighturl!=undefined&&this.song_list[i].music_url!=undefined)one.classList.add('active'),this.lastone=one;}if(this.beautiful_scroll==null)this.beautiful_scroll=new jry_wb_beautiful_scroll(this.list_area).jry_wb_scroll_body;};function jry_wb_beautiful_right_alert_function(){this.inited=false;this.init=function(){if(this.inited)return;this.bgObj=document.createElement("div");document.body.appendChild(this.bgObj);this.bgObj.className='jry_wb_beautiful_alert';this.inited=true;};jry_wb_add_load(()=>{this.init();});this.alert=function(message,time,width,type){if(!this.inited)this.init();time=time==null?2000:time;width=width==null?'auto':width;var one=document.createElement("div");this.bgObj.appendChild(one);one.classList.add('h55');one.classList.add('jry_wb_beautiful_alert_one');if(type=='error')one.classList.add('jry_wb_color_error');else if(type=='ok')one.classList.add('jry_wb_color_ok');else if(type=='warn')one.classList.add('jry_wb_color_warn');else one.classList.add('jry_wb_color_normal');one.innerHTML=message;one.style.width=width;one.onclick=function(){one.parentNode.removeChild(one)};setTimeout(function(){if(one.parentNode!=null)one.parentNode.removeChild(one)},time);}}var jry_wb_beautiful_right_alert=new jry_wb_beautiful_right_alert_function;var jry_wb_beautiful_scroll_run_flag=false;function jry_wb_beautiful_scroll(area,absolute){if(absolute==null)absolute=false;var timer=null;var timer2=null;var timer3=null;var timer4=null;area.style.overflow='hidden';var arae_old_onmouseout=area.onmouseout;var arae_old_onmouseover=area.onmouseover;area.onmouseover=function(){jry_wb_beautiful_scroll_run_flag=true;if(typeof arae_old_onmouseover=='function')arae_old_onmouseover();};area.onmouseout=function(){jry_wb_beautiful_scroll_run_flag=false;if(typeof arae_old_onmouseout=='function')arae_old_onmouseout();};var jry_wb_scroll_body=document.createElement("div");area.appendChild(jry_wb_scroll_body);jry_wb_scroll_body.style.position='absolute';jry_wb_scroll_body.style.right='0';jry_wb_scroll_body.style.top=0;jry_wb_scroll_body.style.height=area.clientHeight;jry_wb_scroll_body.style.opacity='0';jry_wb_scroll_body.classList.add('jry_wb_beautiful_scroll_body');var jry_wb_scroll_kuai=document.createElement("div");jry_wb_scroll_body.appendChild(jry_wb_scroll_kuai);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.position='absolute';jry_wb_scroll_kuai.classList.add('jry_wb_beautiful_scroll_kuai');jry_wb_add_onresize(()=>{jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_body.style.height=area.clientHeight;if(area.clientHeight>=get_all_child_height()){if(get_scrolly()!=0)scrollto(0);for(var i=0,n=area.children.length;i<n;i++)area.children[i].yuan_top=area.children[i].offsetTop;}else{var yy=this.now_y;scrollto(0);for(var i=0,n=area.children.length;i<n;i++){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;else area.children[i].yuan_top=(area.children[i].offsetTop);}scrollto(yy);}if(area.clientHeight>=get_all_child_height()){if(get_scrolly()!=0)scrollto(0);return;}});function get_all_child_height(){var ans=0;var ans2=0;for(var i=0,n=area.children.length;i<n;i++){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;if(area.children[i]!=jry_wb_scroll_body){ans+=parseInt(area.children[i].clientHeight);ans2=Math.max(ans2,area.children[i].clientHeight+area.children[i].yuan_top);}}if(absolute)return ans2;return ans;}var all_flag=false;var chaju=0;var old_body_style;jry_wb_scroll_body.onmouseover=function(){if(parseInt(area.clientHeight)>=get_all_child_height())return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;timer3=setInterval(function(){jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)+0.1,1));if(parseFloat(jry_wb_scroll_body.style.opacity)>=1){clearInterval(timer3);timer3=null;return;}},1);};jry_wb_scroll_body.onmouseout=function(){if(area.clientHeight>=get_all_child_height())return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;timer=setTimeout(function(){timer2=setInterval(function(){jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));if(all_flag)return;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)-0.1,1));if(parseFloat(jry_wb_scroll_body.style.opacity)<=0){clearInterval(timer2);timer2=null;return;}},20);},250);};this.now_y=0;function scrollto(y){y=Math.max(0,Math.min(y,get_all_child_height()-area.clientHeight));this.now_y=y;for(var i=0,n=area.children.length;i<n;i++)if(area.children[i]!=jry_wb_scroll_body){if(window.getComputedStyle(area.children[i],null).position=='absolute'||area.children[i].style.position=='absolute'){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;area.children[i].style.top=area.children[i].yuan_top-y;}else{area.children[i].style.position='relative';area.children[i].style.top=-y;}}}this.scrollto=scrollto;function get_scrolly(){return this.now_y;}jry_wb_scroll_body.onmousewheel=area.onmousewheel=function(e){if(area.clientHeight>=get_all_child_height()){if(get_scrolly()!=0)scrollto(0);return;}e=e||window.event;scrollto(get_scrolly()+(e.deltaY||e.detail*50));jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;timer3=setInterval(function(){jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)+0.1,1));if(parseFloat(jry_wb_scroll_body.style.opacity)>=1){clearInterval(timer3);timer3=null;return;}},1);timer=setTimeout(function(){timer2=setInterval(function(){jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));if(all_flag)return;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)-0.1,1));if(parseFloat(jry_wb_scroll_body.style.opacity)<=0){clearInterval(timer2);timer2=null;return;}},20);},1000);};jry_wb_scroll_kuai.onselectstart=function(){return false;};jry_wb_scroll_body.onclick=function(e){if(area.clientHeight>=get_all_child_height())return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;var mubiao=Math.max(0,Math.min((e.clientY-jry_wb_scroll_body.getBoundingClientRect().top)/document.body.clientHeight*get_all_child_height(),get_all_child_height()-area.clientHeight));;timer4=setInterval(function(){if(Math.abs(get_scrolly()-mubiao)<10){clearInterval(timer4);timer4=null;return;}scrollto(get_scrolly()+((mubiao-get_scrolly())/400)*50);jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));},25);};if(area.addEventListener)area.addEventListener('DOMMouseScroll',area.onmousewheel,false);if(jry_wb_scroll_body.addEventListener)jry_wb_scroll_body.addEventListener('DOMMouseScroll',jry_wb_scroll_body.onmousewheel,false);jry_wb_add_onmousemove(function(e){if(!all_flag)return;if(area.clientHeight>=get_all_child_height())return;e=e||window.event;scrollto((e.clientY-chaju)/area.clientHeight*get_all_child_height());jry_wb_scroll_kuai.style.height=area.clientHeight/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/get_all_child_height()*parseInt(jry_wb_scroll_body.style.height));});jry_wb_scroll_kuai.onmousedown=function(e){document.body.style+='-webkit-user-select:none;-moz-user-select:none;-khtml-user-select: none;-ms-user-select: none;';all_flag=true;if(area.clientHeight>=get_all_child_height())return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;e=e||window.event;chaju=e.clientY-jry_wb_scroll_kuai.getBoundingClientRect().top;old_body_style=document.body.style;};jry_wb_add_onmouseup(function(){all_flag=false;jry_wb_scroll_body.onmouseout();document.body.style=old_body_style;});jry_wb_scroll_kuai.onmouseup=function(e){all_flag=false;if(document.body.clientHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;document.body.style=old_body_style;};this.get_all_child_height=get_all_child_height;this.jry_wb_scroll_body=jry_wb_scroll_body;}jry_wb_add_load(function(){var y=window.scrollY;var x=window.scrolLX;window.scrollTo(0,0);var timer=null;var timer2=null;var timer3=null;var timer4=null;document.body.style.overflow='hidden';var jry_wb_scroll_body=document.createElement("div");document.body.appendChild(jry_wb_scroll_body);jry_wb_scroll_body.style.position='fixed';jry_wb_scroll_body.style.right='0';jry_wb_scroll_body.style.top=Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);;jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_body.style.opacity='0';jry_wb_scroll_body.classList.add('jry_wb_beautiful_scroll_body');var jry_wb_scroll_kuai=document.createElement("div");jry_wb_scroll_body.appendChild(jry_wb_scroll_kuai);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.position='fixed';jry_wb_scroll_kuai.classList.add('jry_wb_beautiful_scroll_kuai');jry_wb_add_onresize(function(){jry_wb_scroll_body.style.top=Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);;jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);});jry_wb_scroll_body.onmouseover=function(){if(document.body.clientHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;timer3=setInterval(function(){jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);var right=parseInt(jry_wb_right_tools.body.style.right)+2;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)+0.1,1));right=Math.max(0,Math.min(right,jry_wb_scroll_body.clientWidth));if(right>Math.max(jry_wb_scroll_kuai.clientWidth,jry_wb_scroll_body.clientWidth)&&parseFloat(jry_wb_scroll_body.style.opacity)>=1){clearInterval(timer2);timer2=null;return;}jry_wb_right_tools.body.style.right=right;},1);};var all_flag=false;var chaju=0;var old_body_style;jry_wb_scroll_body.onmouseout=function(){if(document.body.clientHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;timer=setTimeout(function(){timer2=setInterval(function(){if(all_flag)return;jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);var right=parseInt(jry_wb_right_tools.body.style.right)-2;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)-0.1,1));right=Math.max(0,Math.min(right,jry_wb_scroll_body.clientWidth));if(right<=0&&parseFloat(jry_wb_scroll_body.style.opacity)<=0){clearInterval(timer3);timer3=null;return;}jry_wb_right_tools.body.style.right=right;},20);},250);};jry_wb_scroll_body.onclick=function(e){if(document.body.clientHeight==document.body.offsetHeight)return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;var mubiao=e.clientY/document.body.clientHeight*document.body.offsetHeight;timer4=setInterval(function(){if(Math.abs(window.scrollY-mubiao)<100){clearInterval(timer4);timer4=null;return;}window.scrollTo(window.scrollX,window.scrollY+((mubiao-window.scrollY)/400)*50);jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(document.body.clientHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));},25);};jry_wb_add_onmousemove(function(e){if(!all_flag)return;if(document.body.clientHeight==document.body.offsetHeight)return;e=e||window.event;window.scrollTo(window.scrollX,(e.clientY-chaju)/document.body.clientHeight*document.body.offsetHeight);jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(document.body.clientHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));});jry_wb_scroll_kuai.onmousedown=function(e){all_flag=true;if(document.body.clientHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;e=e||window.event;chaju=e.clientY-jry_wb_scroll_kuai.getBoundingClientRect().top;old_body_style=document.body.style;document.body.style+='-webkit-user-select:none;-moz-user-select:none;-khtml-user-select: none;-ms-user-select: none;';};jry_wb_add_onmouseup(function(){all_flag=false;jry_wb_scroll_body.onmouseout();document.body.style=old_body_style;});jry_wb_scroll_kuai.onmouseup=function(e){all_flag=false;if(document.body.clientHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;document.body.style=old_body_style;};jry_wb_scroll_kuai.onselectstart=function(){return false;};window.onmousewheel=function(e){if(timer3!=null)clearInterval(timer3),timer3=null;if(timer4!=null)clearInterval(timer4),timer4=null;if(document.body.clientHeight==document.body.offsetHeight||jry_wb_beautiful_scroll_run_flag)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer2!=null)clearInterval(timer2),timer2=null;e=e||window.event;if(e!=null)window.scrollTo(window.scrollX,window.scrollY+(e.deltaY||e.detail*50));jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(document.body.clientHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));timer3=setInterval(function(){jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);var right=parseInt(jry_wb_right_tools.body.style.right)+2;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)+0.1,1));right=Math.max(0,Math.min(right,jry_wb_scroll_body.clientWidth));if(right>Math.max(jry_wb_scroll_kuai.clientWidth,jry_wb_scroll_body.clientWidth)&&parseFloat(jry_wb_scroll_body.style.opacity)>=1){clearInterval(timer2);timer2=null;return;}jry_wb_right_tools.body.style.right=right;},1);timer=setTimeout(function(){if(timer2!=null)clearInterval(timer2);if(timer3!=null)clearInterval(timer3);timer2=setInterval(function(){jry_wb_scroll_body.style.height=document.body.clientHeight-Math.max(0,document.getElementsByClassName('jry_wb_top_toolbar')[0]==undefined?0:document.getElementsByClassName('jry_wb_top_toolbar')[0].clientHeight-window.scrollY);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);var right=parseInt(jry_wb_right_tools.body.style.right)-2;jry_wb_scroll_body.style.opacity=Math.max(0,Math.min(parseFloat(jry_wb_scroll_body.style.opacity)-0.1,1));right=Math.max(0,Math.min(right,jry_wb_scroll_body.clientWidth));if(right<=0&&parseFloat(jry_wb_scroll_body.style.opacity)<=0){clearInterval(timer3);timer3=null;return;}jry_wb_right_tools.body.style.right=right;},20);timer=null;},1000);};window.scrollTo(x,y);if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);});function jry_wb_beautiful_video(video){var video_body=document.createElement("div");video.parentElement.insertBefore(video_body,video);video.parentElement.removeChild(video);video_body.appendChild(video);video_body.classList.add("jry_wb_beautiful_video_body");yuanshi_width=video.style.width==''?document.defaultView.getComputedStyle(video,null)['width']:video.style.width;yuanshi_width=(yuanshi_width==''?'100%':yuanshi_width);video_body.style.width='yuanshi_width';video.style.width="100%";video.setAttribute("controls","");if(jry_wb_test_is_pc()){video.removeAttribute("controls");var buttom_bar=document.createElement("div");video_body.appendChild(buttom_bar);buttom_bar.classList.add("jry_wb_beautiful_video_buttom_bar");buttom_bar.style.display='none';var start_button=document.createElement("div");buttom_bar.appendChild(start_button);start_button.classList.add("jry_wb_beautiful_video_button","jry_wb_icon","jry_wb_icon_bofang");var progress_bar=new jry_wb_progress_bar(buttom_bar,"50%",video.currentTime/video.duration,parseInt(video.currentTime)+"/"+parseInt(video.duration),function(x){video.currentTime=x*video.duration;},function(x){progress_bar.span.innerText=parseInt(x*video.duration);},"jry_wb_beautiful_video_progress_bar",'',true,false,'ok');var vioce_bar=new jry_wb_progress_bar(buttom_bar,"10%",video.volume,parseInt(video.volume*100)+"%",function(x){vioce_bar.update(video.volume=x,parseInt(video.volume*100)+"%");},function(x){vioce_bar.span.innerText=parseInt(x*100)+"%";},"jry_wb_beautiful_video_voice_bar",'',false);var full_button=document.createElement("div");buttom_bar.appendChild(full_button);full_button.classList.add("jry_wb_beautiful_video_button","jry_wb_icon");if(document.webkitIsFullScreen)full_button.classList.add("jry_wb_icon_quitquanping");else full_button.classList.add("jry_wb_icon_quanping");var ratio=video_body.clientWidth*video.videoHeight/video.videoWidth;var timer=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(!isNaN(ratio)){clearInterval(timer);buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}},400);var timer2=null;video_body.onmousemove=function(){buttom_bar.style.display='';buttom_bar.style.opacity=1;if(document.webkitIsFullScreen){video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}else{buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}};video_body.onmouseover=function(){buttom_bar.style.display='';buttom_bar.style.opacity=1;if(timer2!=null)clearInterval(timer2),timer2=null;timer2=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(parseFloat(buttom_bar.style.opacity)<=0.01){clearInterval(timer2);timer2=null;buttom_bar.style.display='none';}else buttom_bar.style.opacity=parseFloat(buttom_bar.style.opacity)-0.02;},100);if(document.webkitIsFullScreen){video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}else{buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}video.removeAttribute("controls");if(video.ended)start_button.classList.add("jry_wb_icon_bofang"),start_button.classList.remove("jry_wb_icon_zantingtingzhi");};video_body.onmouseout=function(){if(timer2!=null)clearInterval(timer2),timer2=null;buttom_bar.style.display='none';};video_ontimeupdate=video.ontimeupdate;video.ontimeupdate=function(){video.onprogress();if(typeof video_ontimeupdate=="function")video_ontimeupdate(video);progress_bar.update(video.currentTime/video.duration,parseInt(video.currentTime)+"/"+parseInt(video.duration));};video.onprogress=function(){var loaded=0;for(var i=0;i<video.buffered.length;i++)if(video.buffered.start(i)<video.currentTime&&video.currentTime<video.buffered.end(i))loaded=video.buffered.end(i);progress_bar.update_buttom(loaded/video.duration);};video.onclick=start_button.onclick=function(){if(video.ended)video.currentTime=0;if(video.paused)video.play();else video.pause();};video.onplay=function(){start_button.classList.add("jry_wb_icon_zantingtingzhi");start_button.classList.remove("jry_wb_icon_bofang");jry_wb_midia_control_all.onplay(video);};video.onpause=function(){start_button.classList.remove("jry_wb_icon_zantingtingzhi");start_button.classList.add("jry_wb_icon_bofang");jry_wb_midia_control_all.onpause(video);};full_button.onclick=function(){if(document.webkitIsFullScreen){full_button.classList.add("jry_wb_icon_quanping");full_button.classList.remove("jry_wb_icon_quitquanping");jry_wb_exit_full_screen();video_body.style.width=yuanshi_width;buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="";video_body.style.position='';video.style.position='';buttom_bar.style.position='';video_body.style.zIndex='';video.style.zIndex='';buttom_bar.style.zIndex='';}else{full_button.classList.add("jry_wb_icon_quitquanping");full_button.classList.remove("jry_wb_icon_quanping");jry_wb_launch_full_screen(document.documentElement);video_body.style.position='fixed';video_body.style.top=0;video_body.style.left=0;video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.width=video_body.clientWidth;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="#000";video_body.style.zIndex=100000;video.style.zIndex=100000;buttom_bar.style.zIndex=100000;}};document.addEventListener('webkitfullscreenchange',function(){if(document.webkitIsFullScreen){}else{full_button.classList.add("jry_wb_icon_quanping");full_button.classList.remove("jry_wb_icon_quitquanping");jry_wb_exit_full_screen();video_body.style.width=yuanshi_width;buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="";video_body.style.position='';video.style.position='';buttom_bar.style.position='';video_body.style.zIndex='';video.style.zIndex='';buttom_bar.style.zIndex='';}});}this.body=video_body;this.video=video;}jry_wb_beautiful_video.prototype.push_tanmu=function(text,top,type,color){var danmu_body=document.createElement("div");this.video.after(danmu_body);if(type=="up_down"){danmu_body.style.left=top;danmu_body.classList.add("jry_wb_beautiful_video_danmu_up_down");}else{danmu_body.style.top=top;danmu_body.classList.add("jry_wb_beautiful_video_danmu_left_right");}danmu_body.innerHTML=text;danmu_body.style.color=color;setTimeout(()=>{this.body.removeChild(danmu_body);},7000);};var jry_wb_cache={set:function(name,data,longtime){if(longtime==null)longtime=true;if(longtime)localStorage.setItem(name,JSON.stringify({lasttime:jry_wb_get_server_time(),data:data}));else sessionStorage.setItem(name,JSON.stringify({lasttime:jry_wb_get_server_time(),data:data}));},set_last_time:function(name,time,longtime){if(longtime==null)longtime=true;var data=jry_wb_cache.get(name);if(longtime)localStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));else sessionStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));},get:function(name){var buf=JSON.parse(localStorage.getItem(name));if(buf==null)buf=JSON.parse(sessionStorage.getItem(name));if(buf==null)return null;if(buf.data==null||(typeof buf.data=="object"&&buf.data.length==0))return null;return buf.data;},get_last_time:function(name,qiangzhi){if(qiangzhi)return'1926-08-17 01:01:01 ';var buf=JSON.parse(localStorage.getItem(name));if(buf==null)buf=JSON.parse(sessionStorage.getItem(name));if(buf==null)return'1926-08-17 01:01:01 ';if(buf.data==null||(typeof buf.data=="object"&&buf.data.length==0))return'1926-08-17 01:01:01 ';return buf.lasttime;},delete:function(name){localStorage.removeItem(name);sessionStorage.removeItem(name);},check_if_delete:function(key){return!(key=='showed'||key=='index_note'||key=='background_music'||key=='jry_wb_tree_note');},delete_all:function(){var showed=jry_wb_cache.get('showed');var index_note=jry_wb_cache.get('index_note');var background_music_playing=jry_wb_cache.get('background_music_playing');var background_music=jry_wb_cache.get('background_music');var jry_wb_tree_note=jry_wb_cache.get('jry_wb_tree_note');localStorage.clear();sessionStorage.clear();jry_wb_cache.set('showed',showed);jry_wb_cache.set('index_note',index_note);jry_wb_cache.set('background_music_playing',background_music_playing);jry_wb_cache.set('background_music',background_music);jry_wb_cache.set('jry_wb_tree_note',jry_wb_tree_note);},size:function(longtime){if(longtime==null)longtime=true;var count=0;if(longtime)for(var i=0;i<localStorage.length;i++)count+=localStorage.getItem(localStorage.key(i)).length+localStorage.key(i).length;else for(var i=0;i<sessionStorage.length;i++)count+=sessionStorage.getItem(sessionStorage.key(i)).length+sessionStorage.key(i).length;return count;}};function jry_wb_color_to_string(color){var rgb=color.split(',');var r=parseInt(rgb[0].split('(')[1]);var g=parseInt(rgb[1]);var b=parseInt(rgb[2].split(')')[0]);var hex=""+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1);return hex;}var jry_wb_cookie={set:function(key,val,time){var date=new Date();var expiresDays=time;date.setTime(date.getTime()+expiresDays*1000);if(jry_wb_test_domain_is_ip())document.cookie=key+"="+escape(val)+";expires="+date.toGMTString()+";path=/;";else document.cookie=key+"="+escape(val)+";expires="+date.toGMTString()+";path=/;domain=."+jry_wb_get_domain()+";";},get:function(key){var arrCookie=document.cookie.replace(/(^\s+)|(\s+$)/g,"").replace(/\s/g,"").split(";");var tips;for(var i=0;i<arrCookie.length;i++){var arr=arrCookie[i].split("=");if(key==arr[0]){tips=arr[1];break;}}return tips;},delete:function(key){var date=new Date();date.setTime(date.getTime()-10000);document.cookie=key+"=v; expires ="+date.toGMTString();}};function jry_wb_copy_to_clipboard(s){if(window.clipboardData)window.clipboardData.setData('text',s);else{(function(s){document.oncopy=function(e){e.clipboardData.setData('text',s);e.preventDefault();document.oncopy=null;}})(s);document.execCommand('Copy');}}function jry_wb_follow_mouth(div,config){var config=config;this.div=div;config.size=config.size*5+15;var objs=new Array(),N;var m={x:0,y:0};var center={x:100,y:100};var clientWidth=document.body.clientWidth-4;var clientHeight=document.body.clientHeight-4;N=0;this.close=function(){this.switch=false;for(var i=0;i<N;i++)if(objs[i]!=null&&objs[i].obj!=null&&objs[i].obj.parentNode!=null)objs[i].obj.parentNode.removeChild(objs[i].obj);N=0;};this.reinit=function(){this.switch=true;setTimeout(()=>{this.mouth_move()},10);for(var i=1;i<=360;i+=12)for(var j=15;j<config.size;j+=5){objs[N]={'obj':document.createElement("span"),'j':j,'x_pian':Math.sin(i*Math.PI/180),'y_pian':Math.cos(i*Math.PI/180),'x':0,'y':0};this.div.appendChild(objs[N].obj);objs[N].obj.className='jry_wb_mouth_spacial_fact';objs[N].obj.style.left=(objs[N].x=center.x+objs[N].x_pian)+'px';objs[N].obj.style.top=(objs[N].y=center.y+objs[N].y_pian)+'px';objs[N].obj.style.zIndex=config.size+10-j+15000;objs[N].x_pian=objs[N].j*objs[N].x_pian;objs[N].y_pian=objs[N].j*objs[N].y_pian;objs[N].pian=(objs[N].j/config.size)*(config.dou);N++;}};this.mouth_move=function(){var scrollTop=document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop;var scrollLeft=document.body.scrollLeft==0?document.documentElement.scrollLeft:document.body.scrollLeft;var x=m.x+scrollLeft,y=m.y+scrollTop;center.x+=(x-center.x)/(config.speed);center.y+=(y-center.y)/(config.speed);var min_top=scrollTop,max_top=scrollTop+clientHeight;var min_left=scrollLeft,max_left=scrollLeft+clientWidth;for(var i=0,n=objs.length;i<n;i++){objs[i].obj.style.left=Math.max(min_left,Math.min(max_left,(objs[i].x=Math.round(center.x+objs[i].x_pian+objs[i].pian*(center.x-x)))))+'px';objs[i].obj.style.top=Math.max(min_top,Math.min(max_top,(objs[i].y=Math.round(center.y+objs[i].y_pian+objs[i].pian*(center.y-y)))))+'px';}if(this.switch)setTimeout(()=>{this.mouth_move()},10);};setTimeout(()=>{if(!this.switch)return;clientWidth=document.body.clientWidth-4;clientHeight=document.body.clientHeight-4;},1000);jry_wb_add_onresize(()=>{if(!this.switch)return;clientWidth=document.body.clientWidth-4;clientHeight=document.body.clientHeight-4;});jry_wb_add_onmousemove((event)=>{if(!this.switch)return;if(event.touches)event=event.touches[0];else event=event;m.x=event.clientX;m.y=event.clientY;});jry_wb_add_onclick(()=>{if(!this.switch)return;for(var i=0;i<N;i++){objs[i].obj.className='jry_wb_mouth_spacial_fact_onclick'};setTimeout(function(){for(var i=0;i<N;i++){objs[i].obj.className='jry_wb_mouth_spacial_fact';}},100);});this.reinit();this.switch=true;}function jry_wb_launch_full_screen(element){if(element.requestFullscreencreen)element.requestFullScreen();else if(element.mozRequestFullScreen)element.mozRequestFullScreen();else if(element.webkitRequestFullScreen)element.webkitRequestFullScreen();else if(element.msRequestFullScreen)element.msRequestFullScreen();}function jry_wb_exit_full_screen(){if(document.exitFullscreen)document.exitFullscreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();}function jry_wb_get_domain(){var all=window.location.host.split(".");return all[all.length-2]+"."+all[all.length-1];}function jry_wb_test_domain_is_ip(){var all=window.location.host.split(".");var flag=false;for(var i=0,n=all.length;i<n;i++)flag|=isNaN(parseInt(all[i]));return!flag;}function jry_wb_get_file_type(address){var buf=address.split('.');return buf[buf.length-1].toLowerCase();}function jry_wb_get_path(s){var m=new Image();m.src=s;return m.src;}jry_wb_spider_qq_music_spider=jry_wb_message.jry_wb_host+"spiders/qq_music_spider.php";jry_wb_spider_163_music_spider=jry_wb_message.jry_wb_host+"spiders/163_music_spider.php";jry_wb_spider_music_list_spider=jry_wb_message.jry_wb_host+"spiders/music_list_spider.php";function jry_wb_get_songs_by_mid(list){this.get_qq=function(mid){var cache=jry_wb_cache.get("qq_music_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache=new Array();if(cache==null||((b=cache.find(function(a){return a.mid==mid}))==null)||(typeof b!='object')||((jry_wb_get_server_time().getDate()-new Date(b.lasttime.replace(/\-/g,"/")).getDate())>=1)){if(b!=null&&(typeof b=='object'))cache.splice(b,1);jry_wb_ajax_load_data(jry_wb_spider_qq_music_spider+'?mid='+mid,(a)=>{a=JSON.parse(a);cache.push(a);jry_wb_cache.set("qq_music_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);var a=JSON.parse(jry_wb_cache.get("qq_music_spider_cache")).find(function(a){return a.mid==mid});return{'name':a.name,'music_url':a.music_url,'type':'qq','pic_url':a.pic_url,'mid':mid};}else{var a=cache.find(function(a){return a.mid==mid});return{'name':a.name,'music_url':a.music_url,'type':'qq','pic_url':a.pic_url,'mid':mid};}};this.get_163=function(mid){var cache=jry_wb_cache.get("163_music_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache=new Array();if(cache==null||(b=cache.find(function(a){return a.mid==mid}))==null||(typeof b!='object')||((jry_wb_get_server_time()-new Date(b.lasttime.replace(/\-/g,"/")))>(1000*60*60*0.25))){if(b!=null&&(typeof b=='object'))cache.splice(b,1);jry_wb_ajax_load_data(jry_wb_spider_163_music_spider+'?mid='+mid,(a)=>{a=JSON.parse(a);cache.push(a);jry_wb_cache.set("163_music_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);var a=JSON.parse(jry_wb_cache.get("163_music_spider_cache")).find(function(a){return a.mid==mid});return{'name':a.name,'music_url':a.music_url,'type':'163','pic_url':a.pic_url,'mid':mid};}else{var a=cache.find(function(a){return a.mid==mid});return{'name':a.name,'music_url':a.music_url,'type':'163','pic_url':a.pic_url,'mid':mid};}};this.get_list=function(slid){var cache=jry_wb_cache.get("music_list_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache=new Array();if(cache==null||(b=cache.find(function(a){return a.slid==slid}))==null||(typeof b!='object')||(typeof b.data!='object')){if(b!=null&&(typeof b=='object')&&(typeof b.data=='object'))cache.splice(b,1);var get_data_souce;jry_wb_ajax_load_data(jry_wb_spider_music_list_spider+'?slid='+slid,(a)=>{get_data_souce=a=JSON.parse(a);var ans=new Object();ans.slid=a.slid;ans.makerid=a.makerid;ans.data=new Array();var cache_qq=jry_wb_cache.get("qq_music_spider_cache");if(cache_qq=='')cache_qq='null';cache_qq=JSON.parse(cache_qq);if(cache_qq==null)cache_qq=new Array();var cache_163=jry_wb_cache.get("163_music_spider_cache");if(cache_163=='')cache_163='null';cache_163=JSON.parse(cache_163);if(cache_163==null)cache_163=new Array();for(var i=0,n=a.data.length;i<n;i++){ans.data.push({'mid':a.data[i].mid,'type':a.data[i].type});if(a.data[i].type=='qq'){var b=cache_qq.find(function(aaa){return aaa.mid==a.data[i].mid});if(b!=null)cache_qq.splice(b,1);cache_qq.push(a.data[i]);}else if(a.data[i].type=='163'){var b=cache_163.find(function(aaa){return aaa.mid==a.data[i].mid});if(b!=null)cache_163.splice(b,1);cache_163.push(a.data[i]);}}jry_wb_cache.set("qq_music_spider_cache",JSON.stringify(cache_qq));jry_wb_cache.set("163_music_spider_cache",JSON.stringify(cache_163));cache.push(ans);jry_wb_cache.set("music_list_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);return get_data_souce;}else{var a=cache.find(function(a){return a.slid==slid});for(var i=0,n=a.data.length;i<n;i++)if(a.data[i].type=='qq')a.data[i]=this.get_qq(a.data[i].mid);else if(a.data[i].type=='163')a.data[i]=this.get_163(a.data[i].mid);return a;}};var ans=new Array();for(var i=0,n=list.length;i<n;i++)if(list[i].type=='qq')ans.push(this.get_qq(list[i].mid));else if(list[i].type=='163')ans.push(this.get_163(list[i].mid));else if(list[i].type=='songlist')for(var j=0,buf=this.get_list(list[i].slid),nn=buf.data.length;j<nn;j++)ans.push(buf.data[j]);else if(list[i].type=='test')ans.push(list[i]);var flags={'qq':{},'163':{}};for(var i=0;i<ans.length;i++)if(ans[i].type=='qq')if(flags['qq'][ans[i].mid]==true)ans.splice(i,1),i--;else flags['qq'][ans[i].mid]=true;else if(ans[i].type=='163')if(flags['163'][ans[i].mid]==true)ans.splice(i,1),i--;else flags['163'][ans[i].mid]=true;return ans;}jry_wb_include_once_script_cnt=0;function jry_wb_include_once_script(src,callback){src=jry_wb_get_path(src);var test=document.getElementsByTagName('script');var flag=false;for(var i=0,n=test.length;i<n;i++)if(test[i].src==src)return true;jry_wb_loading_on();jry_wb_include_once_script_cnt++;var myscript=document.createElement('script');document.head.appendChild(myscript);myscript.src=src;myscript.type='text/javascript';myscript.defer=true;myscript.onload=function(){jry_wb_loading_off();jry_wb_include_once_script_cnt--;if(typeof callback=='function')callback();};return false;}function jry_wb_include_once_css(src){src=jry_wb_get_path(src);var test=document.getElementsByTagName('link');var flag=false;for(var i=0,n=test.length;i<n;i++)if(test[i].type=='text/css'&&test[i].href==src)return true;jry_wb_loading_on();var mylink=document.createElement('link');document.head.appendChild(mylink);mylink.href=src;mylink.type='text/css';mylink.rel='stylesheet';mylink.onload=function(){jry_wb_loading_off();};return false;}var jry_wb_js_session=new function(){var lastsend=0;this.close=false;var map=new Map();if(typeof SharedWorker=='undefined')this.close=true;else{var worker=new SharedWorker(jry_wb_message.jry_wb_host+'jry_wb_js/sharedworker.js');worker.port.onmessage=function(data){data=data.data;if(lastsend==data.key)return;var func=map.get(data.to);if(typeof func=='function')func(data.data);};worker.port.start();}this.send=function(to,data){if(this.close)return;worker.port.postMessage({'to':to,'data':data,'key':(lastsend=Math.random())});};this.add_listener=function(id,func){if(this.close)return;map.set(id,func);};};var jry_wb_midia_control_all=new function(){this.playing_buf=null;this.playing=0;var timer1=null;var timer2=null;var timer3=null;jry_wb_js_session.add_listener(1,(data)=>{if(data=='get'){if(timer1!=null)clearTimeout(timer1),timer1=null;if(timer2!=null)clearTimeout(timer2),timer2=null;if(timer3!=null)clearTimeout(timer3),timer3=null;this.pause_all();}else if(data=='lose'){if(document.visibilityState!='hidden'){jry_wb_js_session.send(1,'get');this.start();}if(timer!=null){if(timer1!=null)clearTimeout(timer1),timer1=null;if(timer2!=null)clearTimeout(timer2),timer2=null;if(timer3!=null)clearTimeout(timer3),timer3=null;}}else if(data=='close'){timer1=setTimeout(()=>{timer1=null;if(timer3!=null)clearTimeout(timer3),timer3=null;if(document.visibilityState!='hidden'){jry_wb_js_session.send(1,'get');this.start();}else{timer2=setTimeout(()=>{jry_wb_js_session.send(1,'get');this.start();},(Math.random()*20)+20);}},Math.random()*20);}});jry_wb_add_onbeforeunload(()=>{jry_wb_js_session.send(1,'close');});document.addEventListener('visibilitychange',()=>{if(document.visibilityState=='hidden'){jry_wb_js_session.send(1,'lose');}else{jry_wb_js_session.send(1,'get');if(this.playing_buf==null&&!jry_wb_background_music.status())this.start();}});setInterval(()=>{if(document.visibilityState!='hidden'&&!jry_wb_background_music.status()){jry_wb_js_session.send(1,'get');this.start();}},2000);this.pause_all=()=>{if(this.playing_buf!=null)this.playing_buf.pause();if(this.playing_buf==null)jry_wb_background_music.break(),jry_wb_background_music.oncontrol=false;};this.start=()=>{if(this.playing_buf==null)jry_wb_background_music.oncontrol=true,jry_wb_background_music.continue();else this.playing_buf.play();};this.onplay=function(audio){if(this.playing_buf!=null)this.playing_buf.pause();if(audio==jry_wb_background_music.audio)return;if(this.playing_buf==null)jry_wb_background_music.break();this.playing_buf=audio;};this.onpause=function(audio){if(audio==jry_wb_background_music.audio)return;this.playing_buf=null;setTimeout(function(){jry_wb_background_music.oncontrol=true,jry_wb_background_music.continue();},500);};};function jry_wb_progress_bar(area,width,progress,word,mouthclick,mouthmove,addclass,type,active,shuzhi,buttom_type){this.shuzhi=shuzhi==null?false:shuzhi;this.progress_body=document.createElement("div");area.appendChild(this.progress_body);this.progress_body.classList.add('jry_wb_progress','tooltip');if(addclass!='')this.progress_body.classList.add(addclass);this.progress_body.onmouseover=function(){buff=window.onmousewheel;if(document.removeEventListener)document.removeEventListener('DOMMouseScroll',window.onmousewheel);window.onmousewheel=function(){};};this.progress_body.onmouseout=function(){window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);};if(this.shuzhi)this.progress_body.style.height=width;else this.progress_body.style.width=width;if(buttom_type==undefined)this.progress_bar_buttom=null;else{this.progress_bar_buttom=document.createElement("div");this.progress_body.appendChild(this.progress_bar_buttom);this.progress_bar_buttom.classList.add('jry_wb_progress_bar');if(this.shuzhi)this.progress_bar_buttom.style.height=0;else this.progress_bar_buttom.style.width=0;if(buttom_type=='error')this.progress_bar_buttom.classList.add('jry_wb_color_error','jry_wb_color_normal_prevent');else if(buttom_type=='ok')this.progress_bar_buttom.classList.add('jry_wb_color_ok','jry_wb_color_ok_prevent');else if(buttom_type=='warn')this.progress_bar_buttom.classList.add('jry_wb_color_warn','jry_wb_warn_normal_prevent');else this.progress_bar_buttom.classList.add('jry_wb_color_normal','jry_wb_color_normal_prevent');}this.progress_bar=document.createElement("div");this.progress_body.appendChild(this.progress_bar);this.progress_bar.classList.add('jry_wb_progress_bar');if(active)this.progress_bar.classList.add('jry_wb_progress_bar_active','jry_wb_progress_bar_striped');if(type=='error')this.progress_bar.classList.add('jry_wb_color_error','jry_wb_color_normal_prevent');else if(type=='ok')this.progress_bar.classList.add('jry_wb_color_ok','jry_wb_color_ok_prevent');else if(type=='warn')this.progress_bar.classList.add('jry_wb_color_warn','jry_wb_warn_normal_prevent');else this.progress_bar.classList.add('jry_wb_color_normal','jry_wb_color_normal_prevent');this.text=document.createElement("span");this.progress_bar.appendChild(this.text);this.text.oncontextmenu=function(){return false;};this.text.onselectstart=function(){return false;};this.text.name="text";this.text.style.cursor='default';this.text.classList.add('jry_wb_progress_bar_progress_text');this.span=document.createElement("span");this.progress_bar.appendChild(this.span);if(mouthmove!=null)this.span.classList.add("jry_wb_progress_mouth_move");this.span.oncontextmenu=function(){return false;};this.span.onselectstart=function(){return false;};this.span.style.cursor='default';if(isNaN(progress))progress=0;this.update(progress,word);var buff=function(){};this.progress_body.onclick=(e)=>{if(mouthclick==null)return;e=e||window.event;layerX=(e.clientX-this.progress_body.getBoundingClientRect().left);layerY=(e.clientY-this.progress_body.getBoundingClientRect().top);if(this.shuzhi)var progress=layerY/this.progress_body.scrollHeight;else var progress=layerX/this.progress_body.scrollWidth;if(typeof mouthclick=="function")mouthclick(progress);};this.progress_body.onmousemove=(e)=>{if(mouthmove==null)return;e=e||window.event;layerX=(e.clientX-this.progress_body.getBoundingClientRect().left);layerY=(e.clientY-this.progress_body.getBoundingClientRect().top);if(this.shuzhi)var progress=layerY/this.progress_body.scrollHeight;else var progress=layerX/this.progress_body.scrollWidth;if(this.shuzhi){var y=Math.max(0,Math.min(layerY-(this.span.scrollHeight/2),this.progress_body.scrollHeight-(this.span.scrollHeight)));this.span.style.top=y+"px";this.span.style.left="30px";this.span.style.height="25px";}else{var x=Math.max(0,Math.min(layerX-(this.span.scrollWidth/2),this.progress_body.scrollWidth-(this.span.scrollWidth)));this.span.style.left=x+"px";}if(typeof mouthmove=="function")mouthmove(progress);};}jry_wb_progress_bar.prototype.set_mouse_wheel=function(callback){this.progress_body.onmousewheel=function(e){e=e||window.event;callback((e.deltaY/100)||(e.detail/3));return false;};if(this.progress_body.addEventListener)this.progress_body.addEventListener('DOMMouseScroll',this.progress_body.onmousewheel,false);};jry_wb_progress_bar.prototype.update=function(progress,word){if(this.shuzhi){this.progress_bar.style.height=""+parseFloat(progress)*100+"%";word=word.replace(/(\s)/g,'').replace(/(\d{1})/g,'$1<br>').replace(/\s*$/,'');}else this.progress_bar.style.width=""+parseFloat(progress)*100+"%";this.text.innerHTML=word;};jry_wb_progress_bar.prototype.update_buttom=function(progress){if(this.progress_bar_buttom==null)return;if(this.shuzhi)this.progress_bar_buttom.style.height=""+parseFloat(progress)*100+"%";else this.progress_bar_buttom.style.width=""+parseFloat(progress)*100+"%";};function jry_wb_progress_bar_round(area,width,r,background_color,front_color,font_size,font_color,round){this.width=width;this.r=r;this.background_color=background_color;this.front_color=front_color;this.font_size=font_size;this.font_color=font_color;this.round=round==null?true:false;this.body=document.createElement('div');area.appendChild(this.body);this.body.style.height=this.body.style.width=(this.width+this.r)*2;this.body.style.position="relative";this.word=document.createElement('div');this.body.appendChild(this.word);this.word.innerHTML="0%";this.word.style="position:absolute;font-size:"+this.font_size+'px;top:'+((this.width+this.r)-this.font_size/2)+'px;left:'+((this.width+this.r)-this.font_size/4*(this.word.innerHTML.length))+'px;color:'+this.font_color+';';this.canvas=document.createElement('canvas');this.body.appendChild(this.canvas);this.canvas.style="position:absolute;top:0px;left:0px;";this.canvas.width=this.canvas.height=(this.width+this.r)*2;this.background=this.canvas.getContext("2d");this.background.beginPath();this.background.lineWidth=this.width;this.background.arc(this.width+this.r,this.width+this.r,this.r,0,Math.PI*2);this.background.strokeStyle=this.background_color;this.background.lineCap='round';this.background.stroke();this.background.save();this.front=this.canvas.getContext("2d");this.front.beginPath();this.front.lineWidth=this.width;this.front.strokeStyle=this.front_color;this.front.lineCap=this.round?'round':'butt';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*1.5,Math.PI*(1.5+0));this.front.stroke();}jry_wb_progress_bar_round.prototype.update=function(progress){this.front.beginPath();this.front.lineWidth=this.width;this.front.strokeStyle=this.background_color;this.front.lineCap='round';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*0,Math.PI*2);this.front.stroke();this.front.beginPath();this.front.lineWidth=this.width;this.front.strokeStyle=this.front_color;this.front.lineCap=this.round?'round':'butt';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*1.5,Math.PI*(1.5+progress*2));this.front.stroke();this.word.innerHTML=parseInt(progress*100)+"%";this.word.style="position:absolute;font-size:"+this.font_size+'px;top:'+((this.width+this.r)-this.font_size/2)+'px;left:'+((this.width+this.r)-this.font_size/4*(this.word.innerHTML.length))+'px;color:'+this.font_color+';';};jry_wb_progress_bar_round.prototype.add=function(from,to,time,callback){if(from<to){this.update(Math.max(Math.min(1,from+0.01),0));setTimeout(()=>{this.add(from+0.01,to,time,callback);},time);}else callback();};jry_wb_progress_bar_round.prototype.minus=function(from,to,time,callback){if(from>to){this.update(Math.max(Math.min(1,from-0.01),0));setTimeout(()=>{this.minus(from-0.01,to,time,callback);},time);}else callback();};jry_wb_progress_bar_round.prototype.set=function(from,to,time,callback){callback=typeof callback=='function'?callback:function(){};if(from<to)this.add(from,to,time,callback);else this.minus(from,to,time,callback);};var jry_wb_right_tools=new function(){this.init=function(){if(typeof this.body!='undefined')return;this.body=document.createElement("div");document.body.appendChild(this.body);this.body.style.right=0;this.body.style.height='100%';this.body.style.top='0';this.body.style.position='fixed';this.body.style.width='40px';};this.list=[];this.add=function(button){if(typeof this.body=='undefined')this.init();if(button.parentElement!=null)button.parentElement.removeChild(button);this.body.appendChild(button);button.style.position='absolute';this.list[this.list.length]=button;this.fresh();};this.fresh=function(){for(var i=0;i<this.list.length;i++){this.list[i].style.position='absolute';this.list[i].style.top=this.body.clientHeight*0.05+this.body.clientHeight*(i+1)/(this.list.length+3);}};jry_wb_add_onresize(()=>{this.fresh();});jry_wb_add_load(()=>{this.init()});};function jry_wb_set_delate_special(){var buf=document.getElementsByTagName('input');for(var i=0;i<buf.length;i++)if(buf[i].type!='password')jry_wb_set_delate_special_one(buf[i]);}function jry_wb_set_delate_special_one(input){var func=function(event){event.target.value=event.target.value.replace(/[^\a-\z\A-\Z0-9\u4E00-\u9FA5\@\，\.\,\。\!\！\-\_\+\=\—\\（\(\）\)\/\\:]/g,'')};var onpaste=input.onpaste;if(typeof input.onpaste!='function')input.onpaste=func;else input.onpast=function(data){if(onpaste)onpaste(data);func(data);};var oncontextmenu=input.onpaste;if(typeof input.oncontextmenu!='function')input.oncontextmenu=func;else input.oncontextmenu=function(data){if(oncontextmenu)oncontextmenu(data);func(data);};var onkeyup=input.onkeyup;if(typeof input.onkeyup!='function')input.onkeyup=func;else input.onkeyup=function(data){if(onkeyup)onkeyup(data);func(data);};}const jry_wb_keycode_backspace=8;const jry_wb_keycode_tab=9;const jry_wb_keycode_clear=12;const jry_wb_keycode_enter=13;const jry_wb_keycode_shift=16;const jry_wb_keycode_control=17;const jry_wb_keycode_alt=18;const jry_wb_keycode_pause=19;const jry_wb_keycode_capslock=20;const jry_wb_keycode_escape=27;const jry_wb_keycode_space=32;const jry_wb_keycode_prior=33;const jry_wb_keycode_next=34;const jry_wb_keycode_end=35;const jry_wb_keycode_home=36;const jry_wb_keycode_left=37;const jry_wb_keycode_up=38;const jry_wb_keycode_right=39;const jry_wb_keycode_down=40;const jry_wb_keycode_select=41;const jry_wb_keycode_print=42;const jry_wb_keycode_execute=43;const jry_wb_keycode_insert=45;const jry_wb_keycode_delete=46;const jry_wb_keycode_help=47;const jry_wb_keycode_0=48;const jry_wb_keycode_1=49;const jry_wb_keycode_2=50;const jry_wb_keycode_3=51;const jry_wb_keycode_4=52;const jry_wb_keycode_5=53;const jry_wb_keycode_6=54;const jry_wb_keycode_7=55;const jry_wb_keycode_8=56;const jry_wb_keycode_9=57;const jry_wb_keycode_a=65;const jry_wb_keycode_b=66;const jry_wb_keycode_c=67;const jry_wb_keycode_d=68;const jry_wb_keycode_e=69;const jry_wb_keycode_f=70;const jry_wb_keycode_g=71;const jry_wb_keycode_h=72;const jry_wb_keycode_i=73;const jry_wb_keycode_j=74;const jry_wb_keycode_k=75;const jry_wb_keycode_l=76;const jry_wb_keycode_m=77;const jry_wb_keycode_n=78;const jry_wb_keycode_o=79;const jry_wb_keycode_p=80;const jry_wb_keycode_q=81;const jry_wb_keycode_r=82;const jry_wb_keycode_s=83;const jry_wb_keycode_t=84;const jry_wb_keycode_u=85;const jry_wb_keycode_v=86;const jry_wb_keycode_w=87;const jry_wb_keycode_x=88;const jry_wb_keycode_y=89;const jry_wb_keycode_z=90;const jry_wb_keycode_win=91;const jry_wb_keycode_0_=96;const jry_wb_keycode_1_=97;const jry_wb_keycode_2_=98;const jry_wb_keycode_3_=99;const jry_wb_keycode_4_=100;const jry_wb_keycode_5_=101;const jry_wb_keycode_6_=102;const jry_wb_keycode_7_=103;const jry_wb_keycode_8_=104;const jry_wb_keycode_9_=105;const jry_wb_keycode_f1=112;const jry_wb_keycode_f2=113;const jry_wb_keycode_f3=114;const jry_wb_keycode_f4=115;const jry_wb_keycode_f5=116;const jry_wb_keycode_f6=117;const jry_wb_keycode_f7=118;const jry_wb_keycode_f8=119;const jry_wb_keycode_f9=120;const jry_wb_keycode_f10=121;const jry_wb_keycode_f11=122;const jry_wb_keycode_f12=123;var jry_wb_shortcut_tree={'func':function(){},'next':new Array()};var jry_wb_shortcut_keycode_buf=new Array();var jry_wb_shortcut_keycode_buf_count=0;var jry_wb_shortcut_debug=false;var jry_wb_shortcut_set_flag=false;document.onkeydown=function(e){if(!e)e=window.event;if((e.target.tagName=="TEXTAREA"||e.target.tagName=="INPUT"))return;var keycode=(e.keyCode||e.which);if(keycode>=jry_wb_keycode_0_&&keycode<=jry_wb_keycode_9_)keycode=keycode-jry_wb_keycode_0_+jry_wb_keycode_0;jry_wb_shortcut_keycode_buf[jry_wb_shortcut_keycode_buf_count++]=keycode;if(!jry_wb_shortcut_set_flag){jry_wb_shortcut_set_flag=true;setTimeout(function(){var now=jry_wb_shortcut_tree;var n=jry_wb_shortcut_keycode_buf_count;jry_wb_shortcut_set_flag=false;jry_wb_shortcut_keycode_buf_count=0;for(var i=0;i<n;i++){if(now==null)return true;now=now.next[jry_wb_shortcut_keycode_buf[i]];}if(now==null||now.func==null)return;if(typeof now.func=="function")now.func(e);},500);}return((e.target.tagName=="TEXTAREA"||e.target.tagName=="INPUT")&&(!e.ctrlKey))||(keycode==jry_wb_keycode_f12||keycode==jry_wb_keycode_f5||keycode==jry_wb_keycode_f11||(keycode==jry_wb_keycode_c&&e.ctrlKey));};function jry_wb_set_shortcut(code,func){var now=jry_wb_shortcut_tree.next;for(var i=0,n=code.length;i<n;i++){if(now[code[i]]==null)now[code[i]]={'func':function(){},'next':new Array()};if(i!=(n-1))now=now[code[i]].next;}now[code[code.length-1]].func=func;}function jry_wb_show_tr_no_input(table,name,value,id,width){var tr=document.createElement("tr");table.appendChild(tr);var td=document.createElement("td");td.width=width==null?"400":width;var h55=document.createElement("h56");td.appendChild(h55);h55.innerHTML=name;tr.appendChild(td);td=null;var td=document.createElement("td");var h55=document.createElement("h56");h55.id=id;td.appendChild(h55);h55.innerHTML=value;tr.appendChild(td);return td;}function jry_wb_show_tr_with_input(table,name,id,value,type,onclick,width){var tr=document.createElement("tr");table.appendChild(tr);var td=document.createElement("td");td.width=width==null?"400":width;var h55=document.createElement("h56");td.appendChild(h55);h55.innerHTML=name;tr.appendChild(td);td=null;var td=document.createElement("td");td.width="*";var input=document.createElement("input");input.name=input.id=id;input.className='h56';input.type=type;input.value=value;input.onclick=onclick;jry_wb_set_delate_special_one(input);td.appendChild(input);tr.appendChild(td);return td;}function jry_wb_get_user_head_out(user){return'animation: '+user.head_special.mouse_out.result+'-moz-animation:'+user.head_special.mouse_out.result+'-webkit-animation:'+user.head_special.mouse_out.result+'-o-animation:'+user.head_special.mouse_out.result;}function jry_wb_get_user_head_on(user){return'animation: '+user.head_special.mouse_on.result+'-moz-animation:'+user.head_special.mouse_on.result+'-webkit-animation:'+user.head_special.mouse_on.result+'-o-animation:'+user.head_special.mouse_on.result;}function jry_wb_set_user_head_special(user,img){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_out.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_out.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_out.times==-1?'infinite':user.head_special.mouse_out.times;img.style.MozAnimationDirection=img.style.animationDirection='initial';img.style.MozAnimationDelay=img.style.animationDelay="initial";img.style.MozAnimationTimingFunction=img.style.animationTimingFunction="linear";img.style.MozAnimationPlayState=img.style.animationPlayState="initial";if(img.tagName=='IMG')img.src=user.head;else img.style.backgroundImage='url('+user.head+')',img.style.backgroundRepeat='no-repeat',img.style.backgroundSize="100% 100%";img.onmouseover=function(){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_on.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_on.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_on.times==-1?'infinite':user.head_special.mouse_on.times;};img.onmouseout=function(){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_out.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_out.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_out.times==-1?'infinite':user.head_special.mouse_out.times;};}function jry_wb_get_user(id,reload,callback,tong,admin_mode){if(reload==null)reload=false;if(admin_mode==null)admin_mode=false;var cache_name="users";if(admin_mode)cache_name="jry_wb_manage_user_cache";var data=jry_wb_cache.get(cache_name);if(data!=null)var user=data.find(function(a){return a.id==id});else var user=null;if(user!=null&&(!reload)&&user.lasttime_sync!=''&&jry_wb_compare_time(new Date(),user.lasttime_sync)<1000*60*60*2){if(typeof callback=='function')callback();return;}if(user==null)user={lasttime:"1926-08-17 01:01:01"};jry_wb_ajax_load_data(jry_wb_message.jry_wb_get_message+'jry_wb_get_user.php?id='+id+'&lasttime='+user.lasttime+'&admin_mode='+admin_mode,function(data_){var buf=JSON.parse(data_);var data=jry_wb_cache.get(cache_name);if(buf.id!=-1){if(data==null){data=new Array();data.push(buf);}else if(buf!=null){var now=data.find(function(a){return a.id==buf.id});if(now==null)data.push(buf);else data.splice(now,1,buf);}}jry_wb_cache.set(cache_name,data);if(typeof callback=='function')callback();},null,tong);}function jry_wb_show_user(addr,user,width,float,inline){if(width==null)width='200px';if(float==null)float='';else float='float:'+float+';';var flag=false;if(!user.use){user={color:666666,show:'[禁止使用]'};flag=true;}else if((user==null)||(user.show==null&&user.name==null&&user.head==null)){user={color:666666,show:'用户已消失'};flag=true;}if(inline){var adder=document.createElement("span");adder.classList.add("jry_wb_show_user_inline");adder.style='width:'+width;}else{var adder=document.createElement("div");adder.classList.add("jry_wb_show_user");adder.style=float+';width:'+width+';overflow:hidden;';}adder.style.background="#"+user.color;if(user.show!=null)adder.innerHTML=user.show;else{adder.innerHTML=user.name;var img=document.createElement("img");jry_wb_set_user_head_special(user,img);adder.appendChild(img);}if(!flag)adder.setAttribute('onclick','jry_wb_get_and_show_user_full('+user.id+',document.body.clientWidth*0.75,document.body.clientHeight*0.75)');addr.appendChild(adder);adder=null;}function jry_wb_show_user_full(user,width,height){var title=jry_wb_beautiful_alert.frame('用户查看',width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var Confirm=document.createElement("button");title.appendChild(Confirm);Confirm.type="button";Confirm.innerHTML="关闭";Confirm.style='float:right;margin-right:20px;';Confirm.onclick=function(){jry_wb_beautiful_alert.close();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");Confirm=null;jry_wb_beautiful_alert.msgObj.align="center";var table=document.createElement("table");jry_wb_beautiful_alert.msgObj.appendChild(table);table.border=1;table.width="75%";jry_wb_show_tr_no_input(table,'ID',user.id);jry_wb_show_tr_no_input(table,'昵称',user.name);var tr=document.createElement("tr");table.appendChild(tr);var td=document.createElement("td");td.width="400";var h55=document.createElement("h56");td.appendChild(h55);h55.innerHTML='头像';tr.appendChild(td);td=null;var td=document.createElement("td");td.style="overflow: hidden;";var img=document.createElement("img");jry_wb_set_user_head_special(user,img);td.appendChild(img);img.height=80;img.width=80;tr.appendChild(td);td=null;tr=null;jry_wb_show_tr_no_input(table,'绿币',user.green_money);jry_wb_show_tr_no_input(table,'注册日期',user.enroldate);jry_wb_show_tr_no_input(table,'权限组',user.competencename);if(user.sex==1)jry_wb_show_tr_no_input(table,'性别','男');else if(user.sex==0)jry_wb_show_tr_no_input(table,'性别','女');else if(user.sex==2)jry_wb_show_tr_no_input(table,'性别','女装大佬');else jry_wb_show_tr_no_input(table,'性别','???');jry_wb_show_tr_no_input(table,'电话',user.tel);jry_wb_show_tr_no_input(table,'邮箱',user.mail);jry_wb_show_tr_no_input(table,'使用情况',user.use==0?'禁止':'正常');if(user.zhushi!=''&&user.zhushi!=null){var td=jry_wb_show_tr_no_input(table,'签名','');td.innerHTML='';markdown(td,0,0,(user.zhushi),false);}if(user.login_addr==-1)jry_wb_show_tr_no_input(table,'登录信息','该用户的隐私策略不允许展示');else{if(user.login_addr.length==0)jry_wb_show_tr_no_input(table,'登录信息','该用户没有登录');else{var td=jry_wb_show_tr_no_input(table,'登录信息','该用户的隐私策略不允许展示');td.innerHTML='';var h55=document.createElement("h56");td.appendChild(h55);for(var i=0,n=user.login_addr.length;i<n;i++){var li=document.createElement("li");h55.appendChild(li);if(typeof user.login_addr[i]=='object')li.innerHTML=user.login_addr[i].data;else li.innerHTML=user.login_addr[i];}}}jry_wb_beautiful_scroll(jry_wb_beautiful_alert.msgObj);}function jry_wb_show_user_intext(user){if(!user.use){user={color:666666,show:'[禁止使用]'};flag=true;}else if((user==null)||(user.show==null&&user.name==null&&user.head==null)){user={color:666666,show:'用户已消失'};flag=true;}document.write('<span onclick="jry_wb_get_and_show_user_full('+user.id+',document.body.clientWidth*0.75,document.body.clientHeight*0.75)" style="background:#'+user.color+';" class="jry_wb_show_user_intext">'+user.name+'</span>');}function jry_wb_get_and_show_user(addr,id,width,float,inline){if(id==jry_wb_login_user.id)jry_wb_show_user(addr,jry_wb_login_user,width,float,inline);else{jry_wb_get_user(id,false,function(){var data=jry_wb_cache.get('users');var user=data.find(function(a){return a.id==id});jry_wb_loading_off();jry_wb_show_user(addr,user,width,float,inline);},false);}}function jry_wb_get_and_show_user_intext(id){if(id==jry_wb_login_user.id)jry_wb_show_user_intext(jry_wb_login_user);else{jry_wb_get_user(id,false,function(){},false);var data=jry_wb_cache.get('users');var user=data.find(function(a){return a.id==id});jry_wb_loading_off();jry_wb_show_user_intext(user);}}function jry_wb_get_and_show_user_full(id,width,height){if(id==jry_wb_login_user.id)jry_wb_show_user_full(jry_wb_login_user,width,height);else{jry_wb_get_user(id,false,function(){var data=jry_wb_cache.get('users');var user=data.find(function(a){return a.id==id});jry_wb_loading_off();jry_wb_show_user_full(user,width,height);});}}function jry_wb_sync_data_with_server(syncname,dataurl,array,cmp,after,sort_cmp){jry_wb_ajax_load_data(dataurl,function(data){var buf=JSON.parse(data);var data=null;if(syncname!='')var data=jry_wb_cache.get(syncname);if(buf!=null)if(typeof buf.code!='undefined'&&buf.code==false){if(buf.reason==100000)jry_wb_beautiful_alert.alert("没有登录","","window.location.href=''");else if(buf.reason==100001)jry_wb_beautiful_alert.alert("权限缺失","缺少"+buf.extern,"window.location.href=''");else jry_wb_beautiful_alert.alert("错误"+data.reason,"请联系开发组");jry_wb_loading_off();return;}if(data==null)data=buf;else if(buf!=null)for(var i=0,n=buf.length;i<n;i++){this.buf=buf[i];var now=data.find(cmp);if(now==null)data.push(buf[i]);else data.splice(data.indexOf(now),1,buf[i]);}if(typeof sort_cmp=='function')if(data!=null)data.sort(sort_cmp);if(syncname!='')jry_wb_cache.set(syncname,data);jry_wb_loading_off();after(data);},array);}function jry_wb_test_is_pc(){var userAgentInfo=navigator.userAgent;var Agents=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod");for(var v=0;v<Agents.length;v++)if(userAgentInfo.indexOf(Agents[v])>0)return false;return true;}function jry_wb_test_mail(mail){var myreg=/^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!myreg.test(mail))return false;return true;}function jry_wb_test_phone_number(phone){if(!(/^1[34578]\d{9}$/.test(phone)))return false;return true;}function jry_wb_get_time(){var date=new Date();var seperator1="-";var seperator2=":";var month=date.getMonth()+1;var strDate=date.getDate();if(month>=1&&month<=9){month="0"+month;}if(strDate>=0&&strDate<=9){strDate="0"+strDate;}var currentdate=date.getFullYear()+seperator1+month+seperator1+strDate+" "+date.getHours()+seperator2+date.getMinutes()+seperator2+date.getSeconds();return currentdate;}function jry_wb_get_server_time(){return(new Date((new Date())-jry_wb_time_different));}function jry_wb_math_time(intime){var date1=jry_wb_get_server_time();var date2=new Date(intime.replace(/\-/g,"/"));var ms=(date2.getTime()-date1.getTime());var day=parseInt(ms/(24*60*60*1000));var hour=parseInt(ms/(60*60*1000))-day*24;var minute=parseInt(ms/(60*1000))-hour*60-day*24*60;var s=parseInt(ms/(1000))-minute*60-hour*60*60-day*24*60*60;return" "+day+"-"+hour+"-"+minute+"-"+s;}function jry_wb_show_time(intime,addre){var date=jry_wb_math_time(intime),_date=date.split("-"),day=_date[0],hour=_date[1],minute=_date[2],s=_date[3];document.getElementById(addre).innerHTML=day+"天"+hour+"时"+minute+"分"+s+"秒";timerid=setTimeout(function(){jry_wb_show_time(intime,addre)},1000);timerRunning=true;}function jry_wb_compare_time(d1,d2){var dd1=new Date(d1);if(isNaN(dd1.getTime()))dd1=new Date(d1.replace(/\-/g,"/"));var dd2=new Date(d2);if(isNaN(dd2.getTime()))dd2=new Date(d2.replace(/\-/g,"/"));return dd1-dd2;}function jry_wb_tree(area,text,check){this.check=check==undefined?true:check;if(jry_wb_cache.get('jry_wb_tree_note')!=true)jry_wb_cache.set('jry_wb_tree_note',true),jry_wb_beautiful_right_alert.alert(text==null?'右键全部展开/合并树形图':text);this.root=document.createElement('div');area.appendChild(this.root);this.root.classList.add('jry_wb_tree_root');this.root.oncontextmenu=(event)=>{if(this.openedall)this.closeall();else this.openall();return false;};this.root.check=this.check;this.openedall=false;this.add=function(father,name,value,check){check=check==undefined?true:check;if(father==this.root){var one=document.createElement('ul');father.appendChild(one);}else{var one=document.createElement('ul');father.children[1].appendChild(one);one.style='padding-left:25px;';father.style='';father.children[0].children[0].classList.add('jry_wb_tree_one_open','jry_wb_icon','jry_wb_icon_xuanzeqizhankai');}one.classList.add('jry_wb_tree_one_body');var self=document.createElement('li');one.appendChild(self);self.classList.add('jry_wb_tree_one_body_self');var button=document.createElement('span');self.appendChild(button);button.id=value;var input=document.createElement('input');self.appendChild(input);input.value=value;input.type='checkbox';input.id='i'+value;if(!(check&&this.check&&father.check))input.style.display='none',one.check=false;else one.check=true;self.innerHTML+=name;var child=document.createElement('li');one.appendChild(child);child.classList.add('jry_wb_tree_one_body_children');child.style.display='none';function update(input,from_child){if(!from_child){var all=input.parentNode.parentNode.children[1].getElementsByTagName('input');for(var i=0,n=all.length;i<n;i++)all[i].checked=input.checked;}var father=input.parentNode.parentNode;if(father==null||father.className=='jry_wb_tree_root')return;if(input.checked){var flag=true;for(var i=0,n=father.parentNode.children.length;i<n;i++)if(!(flag&=father.parentNode.children[i].children[0].children[1].checked))break;if(flag){if(father.parentNode.parentNode.children[0]==null||father.parentNode.parentNode.children[0].children[1]==null)return;father.parentNode.parentNode.children[0].children[1].checked=true;update(father.parentNode.parentNode.children[0].children[1],true);}}else{if(father.parentNode.parentNode.children[0]==null||father.parentNode.parentNode.children[0].children[1]==null)return;father.parentNode.parentNode.children[0].children[1].checked=false;update(father.parentNode.parentNode.children[0].children[1],true);}}one.children[0].children[0].onclick=(e)=>{if(!e)e=window.event;child.style.display=child.style.display=='none'?'':'none';if(child.style.display=='none')e.target.classList.remove('jry_wb_icon_xuanzeqishouqi'),e.target.classList.add('jry_wb_icon_xuanzeqizhankai');else e.target.classList.remove('jry_wb_icon_xuanzeqizhankai'),e.target.classList.add('jry_wb_icon_xuanzeqishouqi');this.openedall=false;window.onresize();};one.children[0].children[1].onclick=function(){update(this,false);};return one;};this.get_checked=(yasuo)=>{yasuo=yasuo==null?false:yasuo;var ans=[];if(!yasuo){var all=this.root.getElementsByTagName('input');for(var i=0,n=all.length;i<n;i++)if(all[i].checked)ans.push(all[i].value);}else{function get_one(onebody){if(onebody.children[0].children[1].checked)ans.push(onebody.children[0].children[1].value);else for(var all=onebody.children[1].children,n=all.length,i=0;i<n;i++)get_one(all[i]);}for(var all=this.root.children,n=all.length,i=0;i<n;i++)get_one(all[i]);}return ans;};this.openall=()=>{this.openedall=true;for(var all=this.root.getElementsByClassName("jry_wb_tree_one_body_children"),i=0,n=all.length;i<n;i++){if(all[i].innerHTML!=''){all[i].style.display='';all[i].parentNode.children[0].children[0].classList.remove('jry_wb_icon_xuanzeqizhankai'),all[i].parentNode.children[0].children[0].classList.add('jry_wb_icon_xuanzeqishouqi');}}window.onresize();};this.closeall=()=>{this.openedall=false;for(var all=this.root.getElementsByClassName("jry_wb_tree_one_body_children"),i=0,n=all.length;i<n;i++){if(all[i].innerHTML!=''){all[i].style.display='none';all[i].parentNode.children[0].children[0].classList.remove('jry_wb_icon_xuanzeqishouqi'),all[i].parentNode.children[0].children[0].classList.add('jry_wb_icon_xuanzeqizhankai');}}window.onresize();};}var jry_wb_word_special_fact=new function(){this.switch=true;this.word=[];jry_wb_add_onclick((event)=>{this.run(event)});this.run=function(event){if(!this.switch)return;if(!event)var event=window.event;if(typeof event.path[0].onclick=='function'||typeof event.path[0].onmouseup=='function'||typeof event.path[0].onmousedown=='function'||event.path[0].tagName=='BUTTON'||event.path[0].tagName=='INPUT')return;if(event.touches)event=event.touches[0];else event=event;var word=document.createElement("span");document.body.appendChild(word);var scrollTop=document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop;var scrollLeft=document.body.scrollLeft==0?document.documentElement.scrollLeft:document.body.scrollLeft;word.innerHTML=this.word[parseInt(Math.random()*this.word.length%this.word.length)];word.style="position:absolute;";word.style.top=event.clientY-35+scrollTop;word.style.left=Math.min(event.clientX+scrollLeft,document.body.clientWidth+scrollLeft-word.offsetWidth-35);word.style.fontSize=30;word.classList.add('jry_wb_word_special_fact');function chenge(){var scrollTop=document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop;if(parseInt(word.style.top)>=scrollTop){setTimeout(chenge,15);word.style.top=parseInt(word.style.top)-6;if(parseFloat(word.style.fontSize)>=16)word.style.fontSize=(parseFloat(word.style.fontSize)-0.4)+'px';}else document.body.removeChild(word);}setTimeout(chenge,15);};};