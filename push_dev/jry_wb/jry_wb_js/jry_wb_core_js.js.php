<?php header("content-type: application/x-javascript");include_once("../tools/jry_wb_includes.php");include_once("../jry_wb_configs/JRY_WB_CONFIG_USER_EXTERN_MESSAGE.php");?>if(typeof jry_wb_message=='undefined')var jry_wb_message={"jry_wb_name":"","jry_wb_title":"","jry_wb_host":"","jry_wb_get_message":"","jry_wb_logo":"","jry_wb_data_host":"","jry_wb_index_page":"","jry_wb_chenge_page":"","jry_wb_background_music_switch":0};if(typeof jry_wb_login_user=='undefined')var jry_wb_login_user={"id":-1,"color":null,"use":null,"head":null,"green_money":null,"enroldate":null,"logdate":null,"greendate":null,"competencename":null,"name":null,"sex":null,"tel":null,"mail":null,"language":"zh-CN","zhushi":"","style":{"style_id":1,"id":1,"name":"","note":"","data":{"desktop_css_type":0,"desktop_css_address":"http://dev.juruoyun.top/jry_wb/jry_wb_css/default/desktop.css","general_css_type":0,"general_css_address":"http://dev.juruoyun.top/jry_wb/jry_wb_css/default/general.css","mobile_css_type":0,"mobile_css_address":"http://dev.juruoyun.top/jry_wb/jry_wb_css/default/mobile.css","mainpages_index_css_type":0,"mainpages_index_css_address":"http://dev.juruoyun.top/jry_wb/jry_wb_css/default/mainpages/index.css"},"update":[]},"login_addr":null,"tel_show":null,"ip_show":null,"mail_show":null,"word_special_fact":null,"follow_mouth":null,"background_music_list":[],"oauth_qq":null,"oauth_github":null,"oauth_gitee":null,"oauth_mi":null};if(typeof jry_wb_save_browsing_history=='undefined')var jry_wb_save_browsing_history='';if(typeof jry_wb_time_different=='undefined')jry_wb_time_different=0;jry_wb_onload_function_data=null;function jry_wb_add_load(func) {  var oldonload = jry_wb_onload_function_data;  if(typeof jry_wb_onload_function_data!='function') jry_wb_onload_function_data=func;else  jry_wb_onload_function_data=function(){if(oldonload)oldonload();func();};return func;}var __loading_count=1;function jry_wb_loading_on(){__loading_count++;document.getElementById('__LOAD').style.display='';}function jry_wb_loading_off(){__loading_count--;if(__loading_count<=0)document.getElementById('__LOAD').style.display='none';}function jry_wb_add_onresize(func) {  var oldonresize=window.onresize;  if(typeof window.onresize!='function')  window.onresize=func;else   window.onresize=function(){if(oldonresize)oldonresize();func();};return func;}function jry_wb_add_onclick(func) {  var oldonclick=window.onclick;  if(typeof window.onclick!='function')   window.onclick=func;else    window.onclick=function(event){if(oldonclick)oldonclick(event);func(event);}; return func;}function jry_wb_add_onmouseup(func) {  var oldonmouseup=window.onmouseup;  if(typeof window.onmouseup!='function')   window.onmouseup=func;else    window.onmouseup=function(event){if(oldonmouseup)oldonmouseup(event);func(event);}; return func;}function jry_wb_add_onmousemove(func) {  var oldmousemove = window.onmousemove;  if(typeof window.onmousemove != 'function')   window.onmousemove=func; else    window.onmousemove=function(event){if(oldmousemove);oldmousemove(event);func(event);};return func;}function jry_wb_add_onscroll(func) {  var oldonscroll = window.onscroll;  if(typeof window.onscroll != 'function')   window.onscroll=func; else    window.onscroll=function(event){if(oldonscroll);oldonscroll(event);func(event);};return func;}jry_wb_onclick_flag=false;function jry_wb_add_oncontextmenu(func){if(typeof func=='object'){func.old_onclick=func.onclick;func.old_oncontextmenu=func.oncontextmenu;func.onclick=function(event){if(typeof func.old_onclick=='function')if((new Date()-func.last_onclick_time)>1000||typeof func.last_onclick_time=='undefined')return (func.last_onclick_time=new Date()),func.old_onclick(event);};func.oncontextmenu=function(event){if(typeof func.old_oncontextmenu=='function')if((new Date()-func.last_oncontextmenu_time)>1000||typeof func.last_oncontextmenu_time=='undefined')return (func.last_oncontextmenu_time=new Date()),func.old_oncontextmenu(event);};func.ontouchstart=function(event){if(typeof event=='undefined'||event==undefined)event=window.event; if(event.touches!=null&&event.touches.length>1)return;else if(event.changedTouches!=null&event.changedTouches.length>1)return;func.ontouchstart_timer=new Date();};func.ontouchmove=function(event){if(typeof event=='undefined'||event==undefined)event=window.event; if(event.touches!=null&&event.touches.length>1)func.ontouchstart_timer=undefined;else if(event.changedTouches!=null&event.changedTouches.length>1)func.ontouchstart_timer=undefined;};func.ontouchend=function(event){if(typeof func.ontouchstart_timer=='undefined'||func.ontouchstart_timer==undefined)return ;if((new Date()-func.ontouchstart_timer)<200){if(typeof func.old_onclick=='function')if((new Date()-func.last_onclick_time)>1000||typeof func.last_onclick_time=='undefined')return (func.last_onclick_time=new Date()),func.old_onclick(event);}else if((new Date()-func.ontouchstart_timer)<10000){if(typeof func.old_oncontextmenu=='function')if((new Date()-func.last_oncontextmenu_time)>1000||typeof func.last_oncontextmenu_time=='undefined')return (func.last_oncontextmenu_time=new Date()),func.old_oncontextmenu(event);}func.ontouchstart_timer=undefined;};func.addEventListener('touchstart',func.ontouchstart);func.addEventListener('touchmove',func.ontouchmove);func.addEventListener('touchend',func.ontouchend);}else{var oldoncontextmenu= window.oncontextmenu; if(typeof window.oncontextmenu != 'function') window.oncontextmenu=func; else  window.oncontextmenu=function(event){if(oldoncontextmenu);oldoncontextmenu(event);func(event);};}return func;}function jry_wb_add_onbeforeunload(func) {  var oldonbeforeunload = window.onbeforeunload;  if(typeof window.onbeforeunload != 'function')   window.onbeforeunload=func; else    window.onbeforeunload=function(event){if(oldonbeforeunload);oldonbeforeunload(event);func(event);};return func;}function setinterval(func,time){func();setInterval(func,time);}function jry_wb_ajax_load_data(url,func,array,yibu){jry_wb_loading_on();<?php if(JRY_WB_DEBUG_MODE){ ?>if(url.includes(jry_wb_message.jry_wb_host))console.time('ajax:'+url.substring(url.indexOf(jry_wb_message.jry_wb_host)+jry_wb_message.jry_wb_host.length));else console.time('ajax:'+url);<?php } ?>if(yibu==null)yibu = true;var xmlhttp;if(window.XMLHttpRequest)xmlhttp = new XMLHttpRequest();else xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");var clearTO = setTimeout(function(){xmlhttp.abort();jry_wb_beautiful_alert.alert("网络异常","请您刷新页面或稍后再试");jry_wb_loading_off();},20000);xmlhttp.onreadystatechange = function(){if (xmlhttp.readyState==4){clearTimeout(clearTO);if(xmlhttp.status==200)func(xmlhttp.responseText);else{if(xmlhttp.status==500)jry_wb_beautiful_alert.alert("吔!服务器异常!","请您把开发组从床上叫起来修复BUG后再试");else if(xmlhttp.status==404)jry_wb_beautiful_alert.alert("吔!找不到了耶!","请您带上黑框眼镜后再试");else if(xmlhttp.status==503)jry_wb_beautiful_alert.alert("吔!禁止访问!","小孩子不能进米奇妙妙屋哦");xmlhttp.abort();jry_wb_loading_off();}<?php if(JRY_WB_DEBUG_MODE){ ?>if(url.includes(jry_wb_message.jry_wb_host))console.timeEnd('ajax:'+url.substring(url.indexOf(jry_wb_message.jry_wb_host)+jry_wb_message.jry_wb_host.length));else console.timeEnd('ajax:'+url);<?php } ?>}};xmlhttp.open("POST",url,yibu);if(yibu)xmlhttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"); var data='';if( typeof array=='object'&&array!=null){var i = 0;for(;i<array.length-1;i++)data+=array[i].name+'='+String(array[i].value).replace(/&/g,"/37").replace(/\+/g,"/43")+'&';data+=array[i].name+'='+String(array[i].value).replace(/&/g,"/37").replace(/\+/g,"/43");}xmlhttp.send(data);}function jry_wb_ajax_get_text(data){return data.replace(/\/37/g,"&").replace(/\/43/g,"+")}Array.prototype.unique=function(){var res=[],json={};for(var i=0;i<this.length;i++){if(!json[this[i]]){res.push(this[i]);json[this[i]]=1;}}return res;};Array.prototype.max=function(a,ex){if(a=='')return undefined;if(ex=='date')var max=this[0][a].to_time();else var max=this[0][a];for(var i=1;i<this.length;i++)if(ex=='date')max=Math.max(max,this[i][a].to_time());else max=Math.max(max,this[i][a]);return max;};<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>var jry_wb_background_music = new function(){var inited=false;var timer=null;var timer_close=null;this.playing_status;this.oncontrol=false;this.leave=false;this.init=function(list){if(!jry_wb_test_is_pc())return;this.list=list==null?[]:list;if(list!=null)this.list=list;if(!inited){if(typeof jry_wb_login_user!='undefined')this.song_list=jry_wb_get_songs_by_mid(jry_wb_login_user.background_music_list);this.backgroundmusic_icon=document.createElement("p");jry_wb_right_tools.add(this.backgroundmusic_icon);this.backgroundmusic_icon.id='jry_wb_left_button_backgroundmusic_icon';this.backgroundmusic_icon.classList.add('jry_wb_icon_changpian','jry_wb_icon');this.backgroundmusic_icon.style="z-index:9999;margin:0px;right:0px;position:fixed;width:35px;height:35px;font-size:35px";this.backgroundmusic_control=document.createElement("div");document.body.appendChild(this.backgroundmusic_control);this.backgroundmusic_control.id='jry_wb_left_button_backgroundmusic_control';this.backgroundmusic_control.style="z-index:9999;right:35px;display:none;position:fixed;width:auto;overflow:unset;width:300px;";this.backgroundmusic_control.onmouseover=this.backgroundmusic_icon.onmouseover=this.backgroundmusic_icon.onclick=()=>{if(timer!=null)clearTimeout(timer);if(timer_close!=null)clearTimeout(timer_close);timer=timer_close=null;if(!jry_wb_test_is_pc())timer_close=setTimeout(()=>{this.backgroundmusic_control.style.display="none";clearTimeout(timer);},10000);this.beautiful.beautiful_scroll.style.height=this.beautiful.list_area.clientHeight-parseFloat(getComputedStyle(this.beautiful.list_area,false)['border-bottom-right-radius']);this.backgroundmusic_control.style.display="";this.backgroundmusic_control.style.top=parseInt(this.backgroundmusic_icon.style.top)-this.backgroundmusic_control.clientHeight*0.5;};this.backgroundmusic_control.onmouseout=this.backgroundmusic_icon.onmouseout=()=>{if(typeof jry_wb_dev_mode=='undefined' || jry_wb_dev_mode==false)timer=setTimeout(()=>{this.backgroundmusic_control.style.display="none";if(timer_close!=null)clearTimeout(timer_close);},500);};if(document.visibilityState != 'hidden') {jry_wb_js_session.send(1,'get');this.oncontrol|=true;}if(this.oncontrol){jry_wb_cache.set('background_music_playing',true);};this.passive=false;this.audio=document.createElement("audio");document.body.appendChild(this.audio);this.audio.id='jry_wb_background_music';this.beautiful= new jry_wb_beautiful_music(this.audio,this.backgroundmusic_control,true);this.beautiful.do_reply_count(1);var old_onplay=this.audio.onplay;var old_onpause=this.audio.onpause;var old_ontimeupdate=this.audio.ontimeupdate;this.audio.onplay=()=>{this.playing_status=true;this.oncontrol=true;this.playing=this.song_list.find((a)=>{ return a.music_url==this.audio.src});this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);this.backgroundmusic_icon.classList.add("jry_wb_rotate");this.save(true);old_onplay();};this.audio.onpause=()=>{if(!this.passive)this.playing_status=false;this.backgroundmusic_icon.classList.remove("jry_wb_rotate");this.save(false);old_onpause();};this.audio.ontimeupdate=()=>{old_ontimeupdate();this.save();};this.jry_background_music_flag=true;inited=true;jry_wb_add_onbeforeunload(()=>{var playing=jry_wb_cache.get('background_music');playing.status=(!this.passive)?this.status():(this.playing_status);if(this.oncontrol){jry_wb_cache.set('background_music',playing);jry_wb_cache.set('background_music_playing',false);this.leave=true;}});this.backup();if(this.playing==null||this.playing.mid==null){this.beautiful.push_song_list(this.song_list);jry_wb_beautiful_right_alert.alert("您可以打开BGM",5000,'auto','ok');}return true;}return false;};this.save=function(status){if (document.visibilityState == 'hidden') return;if(!jry_wb_test_is_pc())return;if(status==undefined)status=this.status();jry_wb_cache.set('background_music',{'status':status,'time':this.currenttime(),'volume':this.audio.volume,'mid':this.playing.mid,'type':this.playing.type,'cycle':this.beautiful.reply_count});};this.setsrc=function(type,mid,callback){if(!jry_wb_test_is_pc())return;if(!inited)this.init(document.body);this.mid=mid;this.type=type;this.playing=jry_wb_get_songs_by_mid([{'type':type,'mid':mid}])[0];this.beautiful.set_background_picture(this.playing.pic_url,this.playing.type);if(this.audio.src!=this.playing.music_url)this.audio.src=this.playing.music_url;if( typeof callback=='function')callback();return this.audio.src;};this.backup=function(set){if(!jry_wb_test_is_pc())return;if(this.audio==undefined)return undefined;var playing=jry_wb_cache.get('background_music');this.beautiful.reply_count=playing==null?1:playing.cycle;this.beautiful.cycle_button_update();if(playing==null||playing.mid==null||typeof playing=='undefined'){}else{this.playing=playing;this.playing.music_url=this.setsrc(playing.type,playing.mid);this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);this.currenttime(playing.time==null?0:playing.time);this.volume(playing.volume==null?0.2:playing.volume);this.beautiful.update_volume_bar();if(playing.status==false)return jry_wb_midia_control_all.stop_background=true;this.audio.oncanplay=()=>{if(this.oncontrol){this.status(playing.status==null?true:(playing.status));}this.audio.oncanplay=function(){};};}};this.push_song_list=function(list_old){if(!jry_wb_test_is_pc())return;this.song_list=jry_wb_get_songs_by_mid(list_old);this.beautiful.push_song_list(this.song_list,this.playing==null?'':this.playing.music_url);};this.volume=function(volume){if(!jry_wb_test_is_pc())return;if(this.audio==undefined)return undefined;return (volume==undefined?this.audio.volume:(this.audio.volume=volume));};this.currenttime=function(currenttime){if(!jry_wb_test_is_pc())return;if(this.audio==undefined)return undefined;return (currenttime==undefined?this.audio.currentTime:(this.audio.currentTime=currenttime));};this.status=function (status){if(!jry_wb_test_is_pc())return;if(this.audio==undefined)return undefined;return status==undefined?(!this.audio.paused):(status?this.audio.play():this.audio.pause());};this.break=function(){if(!jry_wb_test_is_pc())return;this.passive=true;this.status(false);this.save();};this.continue=function(){if(!jry_wb_test_is_pc())return;this.backup();this.passive=false;if(this.playing!=null)this.beautiful.do_reply_count(this.playing.cycle);this.status(this.playing_status);};};<?php } ?>function  jry_wb_beautiful_alert_function() {var buff=function(){};var old_onkeyup;this.frame = function(msgtitle,width,height,x,y,important){buff=window.onmousewheel;if(document.addEventListener)document.removeEventListener('DOMMouseScroll',window.onmousewheel);window.onmousewheel=function(){};if(important==undefined)important=false;this.bgObj = document.createElement("div");this.bgObj.onmousewheel=function(event){ return false;};this.bgObj.classList.add('jry_wb_beautiful_alert_background_div');this.bgObj.style.zIndex=important?'10001':'9999';document.body.appendChild(this.bgObj); this.msgObj = document.createElement("div") ;this.msgObj.classList.add('jry_wb_beautiful_alert_message_div'); this.msgObj.style.top = y; this.msgObj.style.left = x; this.msgObj.style.width = width;this.msgObj.style.height = height;this.msgObj.style.zIndex=important?'10001':'9999';document.body.appendChild(this.msgObj); var title = document.createElement("div"); title.classList.add('jry_wb_beautiful_alert_title'); title.style="overflow:hidden;";title.align="center";title.style.width = width;if(msgtitle) title.innerHTML = msgtitle; else title.innerHTML="系统提示";this.msgObj.appendChild(title); bgObj = null;return title;};this.close = function(){document.body.removeChild(this.bgObj); document.body.removeChild(this.msgObj);window.onmousewheel=buff;window.onkeyup=old_onkeyup;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;};this.prompt = function(msgtitle,func){this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2);var txt = document.createElement("input");this.msgObj.appendChild(txt);txt.classList.add("jry_wb_beautiful_alert_text","h56");txt = null;var buttom = document.createElement("div");this.msgObj.appendChild(buttom); buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;";var Confirm = document.createElement("input");buttom.appendChild(Confirm); Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");Confirm.type='button'; Confirm.value="确认"; Confirm.style.bottom = 0;Confirm.onclick = function(event){var value = Confirm.parentNode.parentNode.getElementsByTagName('input')[0].value;if(value!='')func(value);else jry_wb_beautiful_right_alert.alert('未执行操作',2000,'auto');document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;};this.msgObj.onmousewheel=function(event){ return false;};};this.check = function(msgtitle,funcy,funcn,wordy,wordn){if(wordy==null)wordy='确定';if(wordn==null)wordn='取消';this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2,true);var buttom = document.createElement("div");this.msgObj.appendChild(buttom);buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;"; var Confirm = document.createElement("input"); Confirm.type="button"; Confirm.value=wordy; Confirm.style.bottom = 0;Confirm.onclick = function(event){document.body.removeChild(event.target.parentNode.parentNode.previousSibling); document.body.removeChild(event.target.parentNode.parentNode); window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;funcy();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");buttom.appendChild(Confirm);  Confirm = null;var Confirm = document.createElement("input");buttom.appendChild(Confirm); Confirm.type="button"; Confirm.value=wordn; Confirm.style.bottom = 0;Confirm.onclick = function(event){document.body.removeChild(event.target.parentNode.parentNode.previousSibling); document.body.removeChild(event.target.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;funcn();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_error");Confirm = null;msgbutton = null;this.msgObj.onmousewheel=function(event){ return false;};};this.alert = function(msgtitle,msgbody,func){this.frame(msgtitle,400,200,(document.body.clientWidth-400)/2,(document.body.clientHeight-400)/2,true);var txt = document.createElement("div");this.msgObj.appendChild(txt);txt.classList.add("jry_wb_beautiful_alert_text");txt.innerHTML=msgbody; txt = null;var buttom = document.createElement("div");this.msgObj.appendChild(buttom);  buttom.classList.add("jry_wb_beautiful_alert_button");buttom.style="width:100%;buttom:0px;text-align:center;"; var Confirm = document.createElement("input");buttom.appendChild(Confirm); Confirm.setAttribute("type","button"); Confirm.setAttribute("value","确认"); Confirm.style.bottom = 0;old_onkeyup=window.onkeyup;window.onkeyup=function(e){if (!e) e = window.event;var keycode=(e.keyCode||e.which);if(keycode==jry_wb_keycode_enter)Confirm.onclick(e);return false;};if( typeof func==='function'){Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func();window.onkeyup=old_onkeyup;};}else{Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;if(typeof func!="undefined")eval(func);window.onkeyup=old_onkeyup;};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_ok");this.msgObj.onmousewheel=function(event){ return false;};};this.open = function(msgtitle,width,height,url,func){var title = this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var txt = document.createElement("iframe"); txt.setAttribute("src",url);txt.setAttribute("seamless",'seamless');txt.setAttribute("frameborder",'0');txt.setAttribute("width",'100%');txt.style.width = height-title.getBoundingClientRect().top;this.msgObj.appendChild(txt);jry_wb_beautiful_right_alert.alert('加载内联页面中，请稍等',1000,'auto','warn');jry_wb_loading_on();txt.onload=function(){jry_wb_beautiful_right_alert.alert('加载内联页面完毕',500,'auto','ok');jry_wb_loading_off();window.onresize();};txt = null; var Confirm = document.createElement("button");title.appendChild(Confirm); Confirm.type="button"; Confirm.innerHTML="关闭"; Confirm.style='float:right;margin-right:20px;';if( typeof func==='function'){Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func();};}else{Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;if(typeof func!="undefined")eval(func);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");new jry_wb_beautiful_scroll(this.msgObj);};this.openvideo = function(msgtitle,width,height,url,func,show_close_button){if(show_close_button==null || typeof show_close_button!="function")show_close_button = function(){ return true;};var title = this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var div = document.createElement("div"); this.msgObj.appendChild(div);div.style="width:100%;margin:0;padding:0;overflow-y:scroll;overflow-x:hidden;";div.style.height = height-title.clientHeight;div.align='center';var video = document.createElement("video");div.appendChild(video);video.style='height:100%;width:100%;';video.src = url;var timer=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(!isNaN(ratio)){clearInterval(timer);maxwidth=width;maxheight=height-title.clientHeight;height=maxwidth*ratio;width=maxheight/ratio;if(height>maxheight){div.style.height=maxheight;div.style.width=maxheight/ratio;div.style.paddingLeft=(maxwidth-(maxheight/ratio))/2;}if(width>maxwidth){div.style.width=maxwidth;div.style.height=maxwidth*ratio;div.style.paddingLeft=0;}}},400);video.ontimeupdate = function(){if(show_close_button(video)){if(title.getElementsByTagName("button").length!=0)return;var Confirm = document.createElement("button");title.appendChild(Confirm);Confirm.type="button"; Confirm.innerHTML="关闭"; Confirm.style='float:right;margin-right:20px;';if( typeof func==='function'){Confirm.onclick = function(event){jry_wb_midia_control_all.onpause(video);document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;func(video);};}else{Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;jry_wb_midia_control_all.onpause(video);if(typeof func!="undefined")eval(func);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");  }};video.ontimeupdate();var video_body = new jry_wb_beautiful_video(video);video_body.body.style.height = height-title.clientHeight;this.msgObj.onmousewheel=function(event){ return false;};new jry_wb_beautiful_scroll(this.msgObj);};this.openpicture = function(msgtitle,width,height,url){var title = this.frame(msgtitle,width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var div = document.createElement("div"); this.msgObj.appendChild(div);div.style="width:100%;margin:0;padding:0;overflow:hidden;";div.align='center';var txt = document.createElement("img");txt.style.maxWidth='100%';txt.onload=function(){window.onresize();if(txt.naturalWidth<width*0.2)jry_wb_beautiful_right_alert.alert('使用shift+滚轮缩放<br>ctrl+0恢复原尺寸',5000,'auto');};if(url.indexOf("?")==-1)txt.src = url+'?size='+parseInt(width);else txt.src = url+'&size='+parseInt(width);div.appendChild(txt);var Confirm = document.createElement("button"); title.appendChild(Confirm);Confirm.type="button"; Confirm.innerHTML="关闭"; Confirm.style='float:right;margin-right:20px;';if( typeof func==='function'){Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){});func();};}else{Confirm.onclick = function(event){document.body.removeChild(Confirm.parentNode.parentNode.previousSibling); document.body.removeChild(Confirm.parentNode.parentNode);window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);jry_wb_beautiful_scroll_run_flag=false;jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){});if(typeof func!="undefined")eval(func);};}Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");new jry_wb_beautiful_scroll(this.msgObj);old_onwheel=this.msgObj.onmousewheel;this.msgObj.onmousewheel=(e)=>{e=e||window.event;if(e.shiftKey){txt.style.width=Math.max(10,txt.clientWidth+(e.deltaY||e.detail*50)/10);jry_wb_set_shortcut([jry_wb_keycode_control,jry_wb_keycode_0],function(){div.style.width="100%";div.style.margin="0";txt.style.maxWidth='100%';txt.style.width=txt.naturalWidth;title.style.top=0;div.style.top=0;});}else{old_onwheel(e);}return false;};if(this.msgObj.addEventListener)this.msgObj.addEventListener('DOMMouseScroll',this.msgObj.onmousewheel,false);};};var jry_wb_beautiful_alert = new jry_wb_beautiful_alert_function;function jry_wb_beautiful_music(audio,area,list,yuandi){audio.removeAttribute("controls");audio.next=false;var body=document.createElement("div") ;if(yuandi)audio.parentElement.insertBefore(body,audio);else area.appendChild(body);body.classList.add('jry_wb_beautiful_music_body');this.list_area = null;if(list==false)body.style.height="100px";else{ this.list_area=document.createElement("div");body.appendChild(this.list_area);this.list_area.className='jry_wb_beautiful_music_list_area'} var bg_pic=document.createElement("div");body.appendChild(bg_pic);bg_pic.classList.add('jry_wb_beautiful_music_picture');var bg_pic_jiao=document.createElement("div");body.appendChild(bg_pic_jiao);bg_pic_jiao.classList.add('jry_wb_beautiful_music_picture_jiao','jry_wb_icon');var mode=document.createElement("div");body.appendChild(mode);mode.classList.add('jry_wb_beautiful_music_picture_mode');mode.innerHTML="一遍";var controls=document.createElement("div");body.appendChild(controls);controls.classList.add('jry_wb_beautiful_music_controls');var start_button=document.createElement("div");controls.appendChild(start_button);start_button.classList.add('jry_wb_beautiful_music_start_button','jry_wb_icon','jry_wb_icon_bofang');start_button.onclick=function() { if(audio.ended)audio.currentTime = 0;if(audio.paused)audio.play();else audio.pause();} ;var progress_bar= new jry_wb_progress_bar(controls,"65%",audio.currentTime/audio.duration,parseInt(audio.currentTime)+"/"+parseInt(audio.duration),function(x){audio.currentTime = x*audio.duration;},function(x){progress_bar.span.innerText = parseInt(x*audio.duration);},"jry_wb_beautiful_music_progress_bar",'',true,false,'ok');progress_bar.progress_body.style.height="20px";var volume_button = document.createElement("div");controls.appendChild(volume_button);volume_button.classList.add('jry_beautiful_music_volume_button','jry_wb_icon','jry_wb_icon_shengyin');volume_button.onclick = function(){if(audio.muted){audio.muted = false;volume_button.classList.remove('jry_wb_icon_jingyin');volume_button.classList.add('jry_wb_icon_shengyin');}else{audio.muted = true;volume_button.classList.remove('jry_wb_icon_shengyin');volume_button.classList.add('jry_wb_icon_jingyin');}};var vioce_bar= new jry_wb_progress_bar(controls,"10%",audio.volume,parseInt(audio.volume*100)+"%",function(x){if(x!=0){audio.muted = false;volume_button.classList.remove('jry_wb_icon_jingyin');volume_button.classList.add('jry_wb_icon_shengyin');}vioce_bar.update(audio.volume = x,parseInt(audio.volume*1000)/10+"%");},function(x){vioce_bar.span.innerText = parseInt(x*100)+"%";},"jry_wb_beautiful_music_voice_bar",'',false,true);vioce_bar.set_mouse_wheel(function(delta){vioce_bar.update(audio.volume+=delta*0.001,parseInt(audio.volume*1000)/10+"%");vioce_bar.span.innerText = parseInt(audio.volume*1000)/10+"%";});vioce_bar.progress_body.style.height="100px";var old_onmouseover=vioce_bar.progress_body.onmouseover;var old_onmouseout=vioce_bar.progress_body.onmouseout;vioce_bar.progress_body.onmouseover=volume_button.onmouseover = function(){vioce_bar.progress_body.style.display="unset";old_onmouseover();};vioce_bar.progress_body.onmouseout=volume_button.onmouseout = function(){vioce_bar.progress_body.style.display="none";old_onmouseout();};this.reply_count = 0;var cycle_button = document.createElement("div");controls.appendChild(cycle_button);cycle_button.classList.add("jry_beautiful_music_cycle_button","jry_wb_icon","jry_wb_icon_cuowu");cycle_button.onclick=()=>{this.reply_count++;this.reply_count%=4;this.cycle_button_update();};this.cycle_button_update=()=>{if(this.reply_count==0)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_quanbuxunhuan','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_cuowu'),mode.innerHTML="一遍";else if(this.reply_count==1)cycle_button.classList.remove('jry_wb_icon_cuowu','jry_wb_icon_quanbuxunhuan','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_danquxunhuan'),mode.innerHTML="单曲";else if(this.reply_count==2)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_cuowu','jry_wb_icon_-suiji'),cycle_button.classList.add('jry_wb_icon_quanbuxunhuan'),mode.innerHTML="全部";else if(this.reply_count==3)cycle_button.classList.remove('jry_wb_icon_danquxunhuan','jry_wb_icon_quanbuxunhuan','jry_wb_icon_cuowu'),cycle_button.classList.add('jry_wb_icon_-suiji'),mode.innerHTML="随机";};audio.onprogress=function(){var loaded=0;for(var i=0;i<audio.buffered.length;i++)if(audio.buffered.start(i)<audio.currentTime&&audio.currentTime<audio.buffered.end(i))loaded=audio.buffered.end(i);progress_bar.update_buttom(loaded/audio.duration);};audio.ontimeupdate = function(){audio.onprogress();progress_bar.update(audio.currentTime/audio.duration,parseInt(audio.currentTime)+"/"+parseInt(audio.duration));};audio.onplay = function(){start_button.classList.remove('jry_wb_icon_bofang');start_button.classList.add("jry_wb_icon_zantingtingzhi");jry_wb_midia_control_all.onplay(audio);};audio.onabort=()=>{var reload_cnt=0;setTimeout(()=>{if(audio.readyState==0){var timer=setInterval(()=>{if(audio.readyState==0){reload_cnt++;if(reload_cnt>=2){audio.next=true;audio.onpause();reload_cnt=0;}else audio.load();}else{audio.play();reload_cnt=0;clearInterval(timer);}},1000);}},500);};audio.onpause=()=>{start_button.classList.remove('jry_wb_icon_zantingtingzhi');start_button.classList.add("jry_wb_icon_bofang");if(this.reply_count==1&&(audio.ended||audio.next))audio.play();if(this.reply_count==2&&(audio.ended||audio.next)&&(this.song_list!=null)){if(this.lastone.nextElementSibling!=null){var target = this.lastone.nextElementSibling;var i = parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src = this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone = target;}else{var target = this.lastone.parentNode.children[0];var i = parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src = this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone = target;}}if(this.reply_count==3&&(audio.ended||audio.next)&&(this.song_list!=null)){var target = this.lastone.parentNode.children[parseInt(Math.random()*this.lastone.parentNode.children.length)];var i = parseInt(target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;this.audio.src = this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');target.classList.add('active');this.lastone = target;}jry_wb_midia_control_all.onpause(audio);audio.next=false;};window.onresize();this.body = body;this.audio = audio;this.bg_pic_jiao = bg_pic_jiao;this.bg_pic = bg_pic;this.cycle_button = cycle_button;this.mode = mode;this.vioce_bar = vioce_bar;}jry_wb_beautiful_music.prototype.update_volume_bar = function(){this.vioce_bar.update(this.audio.volume,parseInt(this.audio.volume*100)+"%");};jry_wb_beautiful_music.prototype.do_reply_count = function(reply_count){if(reply_count==null)return this.reply_count;this.reply_count = reply_count;this.reply_count%=4;this.cycle_button_update();};jry_wb_beautiful_music.prototype.set_background_picture=function(url,type){if(type=='qq')this.bg_pic_jiao.classList.remove('jry_wb_icon_wangyiyunyinle','jry_wb_icon_yinyue'),this.bg_pic_jiao.classList.add('jry_wb_icon_qq_yinyue_music_'),this.bg_pic_jiao.style.color="#02B053",this.bg_pic_jiao.style.background="#F8C913",this.bg_pic_jiao.style.borderRadius='10px';else if(type=='163'||type=='wangyi')this.bg_pic_jiao.classList.remove('jry_wb_icon_qq_yinyue_music_','jry_wb_icon_yinyue'),this.bg_pic_jiao.classList.add('jry_wb_icon_wangyiyunyinle'),this.bg_pic_jiao.style.color="#D81E06",this.bg_pic_jiao.style.background="",this.bg_pic_jiao.style.borderRadius=0;else this.bg_pic_jiao.classList.remove('jry_wb_icon_wangyiyunyinle','jry_wb_icon_qq_yinyue_music_'),this.bg_pic_jiao.classList.add('jry_wb_icon_yinyue'),this.bg_pic_jiao.style.color="#0F88EB",this.bg_pic_jiao.style.background="",this.bg_pic_jiao.style.borderRadius=0;this.bg_pic.style='background:url("'+(url==''?'':url)+'")';this.bg_pic.style.backgroundSize='cover';};jry_wb_beautiful_music.prototype.push_song_list = function(list,highlighturl){if(list!=null)this.song_list = list;if(this.song_list==null)return false;if(this.list_area==null)return false;if(this.song_list_area==undefined){this.list_area.appendChild(this.song_list_area = document.createElement("div"));this.song_list_area.classList.add('jry_wb_beautiful_music_list_area_song');}else this.song_list_area.innerHTML='';for( var i = 0,n = this.song_list.length;i<n;i++){var one = document.createElement("div");this.song_list_area.appendChild(one);one.classList.add('jry_wb_beautiful_music_list_area_song_one');one.innerHTML = this.song_list[i].name;one.value = i;one.onclick=(event)=>{if (!event)var event = window.event;var i = parseInt(event.target.value);this.set_background_picture(this.song_list[i].pic_url,this.song_list[i].type);this.audio.src = this.song_list[i].music_url;this.audio.play();if(this.lastone!=null)this.lastone.classList.remove('active');event.target.classList.add('active');this.lastone = event.target;this.type=this.song_list[i].type==undefined?'':this.song_list[i].type;if(this.song_list[i].mid=="000oxiWq0t7aZ2"){jry_wb_launch_full_screen(document.documentElement);var a = document.createElement('div');document.body.appendChild(a);a.style.backgroundColor='#ff0000';a.style.height='100%';a.style.width='100%';a.style.position='absolute';a.style.top = 0;a.style.left = 0;a.style.opacity = 1;a.style.zIndex = 99999999999;var flag = 0; var timer = setInterval(function (){ if(flag%2==0){a.style.backgroundColor='#ffff00';}else{a.style.backgroundColor='#ff0000';}if(flag>20){document.body.removeChild(a);clearInterval(timer);a = undefined;flag = undefined;timer = undefined;jry_wb_exit_full_screen();}flag++;},200);}};if(highlighturl==this.song_list[i].music_url&&highlighturl!=undefined&&this.song_list[i].music_url!=undefined)one.classList.add('active'),this.lastone = one;}if(this.beautiful_scroll==null)this.beautiful_scroll=new jry_wb_beautiful_scroll(this.list_area).jry_wb_scroll_body;};function jry_wb_beautiful_right_alert_function() {this.inited=false;this.init=function() {if (this.inited) return ;this.bgObj = document.createElement("div");document.body.appendChild(this.bgObj) ; this.bgObj.className='jry_wb_beautiful_alert';this.inited = true;};jry_wb_add_load (()=>{this.init();});this.alert = function(message,time,width,type) {if (!this.inited) this.init () ;time = time==null?2000:time;width = width==null?'auto':width;var one = document.createElement ("div");this.bgObj.appendChild(one); one.classList.add('jry_wb_beautiful_alert_one','jry_wb_font_normal_size');if(type=='error')one.classList.add('jry_wb_color_error');else if(type=='ok')one.classList.add('jry_wb_color_ok');else if(type=='warn') one.classList.add('jry_wb_color_warn');else one.classList.add('jry_wb_color_normal');one.innerHTML=message;one.style.width=width;one.onclick=function(){one.parentNode.removeChild(one)} ;setTimeout(function(){if(one.parentNode!=null)one.parentNode.removeChild(one)},time) ;}}var jry_wb_beautiful_right_alert= new jry_wb_beautiful_right_alert_function;var jry_wb_beautiful_scroll_run_flag=false;function jry_wb_beautiful_scroll(area,absolute){if(absolute==null)absolute=false;var timer=null;var timer4=null;area.style.overflow='hidden';var arae_old_onmouseout=area.onmouseout;var arae_old_onmouseover=area.onmouseover;area.onmouseover=function(){jry_wb_beautiful_scroll_run_flag=true;if(typeof arae_old_onmouseover=='function')arae_old_onmouseover();};area.onmouseout=function(){jry_wb_beautiful_scroll_run_flag=false;if(typeof arae_old_onmouseout=='function')arae_old_onmouseout();};var jry_wb_scroll_body=document.createElement("div");area.appendChild(jry_wb_scroll_body);jry_wb_scroll_body.style.position='absolute';jry_wb_scroll_body.style.right='0';jry_wb_scroll_body.style.top=0;jry_wb_scroll_body.style.height=area.clientHeight;jry_wb_scroll_body.style.opacity='0';jry_wb_scroll_body.style.transitionDuration='1s';jry_wb_scroll_body.classList.add('jry_wb_beautiful_scroll_body');var jry_wb_scroll_kuai=document.createElement("div");jry_wb_scroll_body.appendChild(jry_wb_scroll_kuai);jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.position='absolute';jry_wb_scroll_kuai.classList.add('jry_wb_beautiful_scroll_kuai');jry_wb_add_onresize(()=>{jry_wb_scroll_kuai.style.height=document.body.clientHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_body.style.height=area.clientHeight;if(area.clientHeight>=get_all_child_height()){if(get_scrolly()!=0)scrollto(0);for(var i=0,n=area.children.length;i<n;i++)area.children[i].yuan_top=area.children[i].offsetTop;}else{var yy=now_y;scrollto(0);for(var i=0,n=area.children.length;i<n;i++){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;else area.children[i].yuan_top=(area.children[i].offsetTop);}scrollto(yy);}if(area.clientHeight>=get_all_child_height()){if(get_scrolly()!=0)scrollto(0);return;}});function get_all_child_height(){var ans=0;var ans2=0;for(var i=0,n=area.children.length;i<n;i++){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;if(area.children[i]!=jry_wb_scroll_body){ans+=parseInt(area.children[i].clientHeight);ans2=Math.max(ans2,area.children[i].clientHeight+area.children[i].yuan_top);}}if(absolute)return ans2;return ans;}var all_flag=false;var chaju=0;var old_body_style;jry_wb_scroll_body.onmouseover=function(){var h=get_all_child_height();if(parseInt(area.clientHeight)>=h)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;jry_wb_scroll_kuai.style.height=area.clientHeight/h*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/h*parseInt(jry_wb_scroll_body.style.height));jry_wb_scroll_body.style.opacity=1;};jry_wb_scroll_body.onmouseout=function(){var h=get_all_child_height();if(area.clientHeight>=h)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;timer=setTimeout(function(){timer=null;jry_wb_scroll_body.style.opacity=0;},1000);};var now_y=0;function scrollto(y){if(isNaN(y))return ;y=Math.max(0,Math.min(y,get_all_child_height()-area.clientHeight));now_y=y;for(var i=0,n=area.children.length;i<n;i++)if(area.children[i]!=jry_wb_scroll_body){if(window.getComputedStyle(area.children[i],null).position=='absolute'||area.children[i].style.position=='absolute'){if(typeof area.children[i].yuan_top=='undefined')area.children[i].yuan_top=area.children[i].offsetTop;area.children[i].style.top=area.children[i].yuan_top-y;}else{area.children[i].style.position='relative';area.children[i].style.top=-y;}}}this.scrollto=scrollto;function get_scrolly(){if(isNaN(now_y))return 0;return now_y;}var last_y=0;area.addEventListener("touchstart",(e)=>{jry_wb_beautiful_scroll_run_flag=true;if(typeof e=='undefined'||e==undefined)e=window.event;if(e.touches!=null&&e.touches.length==1)e.clientY=e.touches[0].clientY;else if(e.changedTouches!=null&&e.changedTouches.length==1)e.clientY=e.changedTouches[0].clientY;last_y=e.clientY;},false);area.addEventListener("touchmove",(e)=>{jry_wb_beautiful_scroll_run_flag=true;if(typeof e=='undefined'||e==undefined)e=window.event;if(e.touches!=null&&e.touches.length==1)e.clientY=e.touches[0].clientY;else if(e.changedTouches!=null&&e.changedTouches.length==1)e.clientY=e.changedTouches[0].clientY;area.onmousewheel({'deltaY':last_y-e.clientY});last_y=e.clientY;},false);area.addEventListener("touchend",(e)=>{jry_wb_beautiful_scroll_run_flag=false;},false);jry_wb_scroll_body.onmousewheel=area.onmousewheel=(e)=>{var h=get_all_child_height();if(area.clientHeight>=h){if(get_scrolly()!=0)scrollto(0);return;}e=e||window.event;scrollto(get_scrolly()+(e.deltaY||e.detail*50));jry_wb_scroll_kuai.style.height=area.clientHeight/h*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/h*parseInt(jry_wb_scroll_body.style.height));jry_wb_scroll_body.style.opacity=1;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;timer=setTimeout(function(){timer=null;jry_wb_scroll_body.style.opacity=0;},1000);};jry_wb_scroll_kuai.onselectstart=function(){return false;};jry_wb_scroll_body.onclick=function(e){var h=get_all_child_height();if(area.clientHeight>=h)return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;var mubiao=Math.max(0,Math.min((e.clientY-jry_wb_scroll_body.getBoundingClientRect().top)/document.body.clientHeight*h,h-area.clientHeight));;timer4=setInterval(function(){if(Math.abs(get_scrolly()-mubiao)<10){clearInterval(timer4);timer4=null;return ;}scrollto(get_scrolly()+((mubiao-get_scrolly())/400)*50);jry_wb_scroll_kuai.style.height=area.clientHeight/h*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/h*parseInt(jry_wb_scroll_body.style.height));},25);};if(area.addEventListener)area.addEventListener('DOMMouseScroll',area.onmousewheel,false);if(jry_wb_scroll_body.addEventListener)jry_wb_scroll_body.addEventListener('DOMMouseScroll',jry_wb_scroll_body.onmousewheel,false);jry_wb_add_onmousemove(function(e){if(!all_flag)return ;var h=get_all_child_height();if(area.clientHeight>=h)return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;scrollto((e.clientY-chaju));jry_wb_scroll_kuai.style.height=area.clientHeight/h*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.max(0,get_scrolly()/h*parseInt(jry_wb_scroll_body.style.height));});jry_wb_scroll_kuai.onmousedown=function(e){all_flag=true;if(area.clientHeight>=get_all_child_height())return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;e=e||window.event;chaju=e.clientY-jry_wb_scroll_kuai.getBoundingClientRect().top;old_body_style=document.body.style;document.body.style+='-webkit-user-select:none;-moz-user-select:none;-khtml-user-select: none;-ms-user-select: none;';};jry_wb_add_onmouseup(function(){all_flag=false;jry_wb_scroll_body.onmouseout();document.body.style=old_body_style;});jry_wb_scroll_kuai.onmouseup=function(e){all_flag=false;if(area.clientHeight>=get_all_child_height())return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;document.body.style=old_body_style;};this.get_all_child_height=get_all_child_height;this.jry_wb_scroll_body=jry_wb_scroll_body;}jry_wb_add_load(function(){var y=window.scrollY;var x=window.scrolLX;window.scrollTo(0,0);var timer=null;var timer4=null;document.body.style.overflow='hidden';var jry_wb_scroll_body=document.createElement("div");document.body.appendChild(jry_wb_scroll_body);jry_wb_scroll_body.style.position='fixed';jry_wb_scroll_body.style.right='0';var top_toolbar=document.getElementsByClassName('jry_wb_top_toolbar')[0];if(top_toolbar==undefined)top_toolbar={'clientHeight':0};jry_wb_scroll_body.style.top=Math.max(0,top_toolbar.clientHeighty-window.scrollY);;jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);jry_wb_scroll_body.style.opacity='0';jry_wb_scroll_body.style.zIndex='9999';jry_wb_scroll_body.style.transitionDuration='1s';jry_wb_scroll_body.classList.add('jry_wb_beautiful_scroll_body');var jry_wb_scroll_kuai=document.createElement("div");jry_wb_scroll_body.appendChild(jry_wb_scroll_kuai);jry_wb_scroll_kuai.style.height=window.innerHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.position='fixed';jry_wb_scroll_kuai.classList.add('jry_wb_beautiful_scroll_kuai');jry_wb_add_onresize(function(){jry_wb_scroll_body.style.top=Math.max(0,top_toolbar.clientHeight-window.scrollY);;jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);});jry_wb_scroll_body.onmouseover=function(){if(window.innerHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);jry_wb_scroll_kuai.style.height=window.innerHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_body.style.opacity=1;jry_wb_right_tools.body.style.right=jry_wb_scroll_body.clientWidth;};var all_flag=false;var chaju=0;var old_body_style;jry_wb_scroll_body.onmouseout=function(){if(timer!=null)clearTimeout(timer),timer=null;if(window.innerHeight==document.body.offsetHeight)return;timer=setTimeout(function(){jry_wb_scroll_body.style.opacity=0;jry_wb_right_tools.body.style.right=0;timer=null;},1000);};jry_wb_scroll_body.onclick=function(e){if(window.innerHeight==document.body.offsetHeight)return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;var mubiao=e.clientY/window.innerHeight*document.body.offsetHeight;timer4=setInterval(function(){if(Math.abs(window.scrollY-mubiao)<100){clearInterval(timer4);timer4=null;return ;}window.scrollTo(window.scrollX,window.scrollY+((mubiao-window.scrollY)/400)*50);jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,top_toolbar.clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=window.innerHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(window.innerHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));},25);};jry_wb_add_onmousemove(function(e){if(!all_flag)return ;if(window.innerHeight==document.body.offsetHeight)return;e=e||window.event;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;window.scrollTo(window.scrollX,(e.clientY-chaju)/window.innerHeight*document.body.offsetHeight);jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,top_toolbar.clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=window.innerHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(window.innerHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));});jry_wb_scroll_kuai.onmousedown=function(e){all_flag=true;if(window.innerHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;e=e||window.event;chaju=e.clientY-jry_wb_scroll_kuai.getBoundingClientRect().top;old_body_style=document.body.style;document.body.style+='-webkit-user-select:none;-moz-user-select:none;-khtml-user-select: none;-ms-user-select: none;';};jry_wb_add_onmouseup(function(){all_flag=false;jry_wb_scroll_body.onmouseout();document.body.style=old_body_style;});jry_wb_scroll_kuai.onmouseup=function(e){all_flag=false;if(window.innerHeight==document.body.offsetHeight)return;if(timer!=null)clearTimeout(timer),timer=null;if(timer4!=null)clearInterval(timer4),timer4=null;document.body.style=old_body_style;};jry_wb_scroll_kuai.onselectstart=function(){return false;};var last_y=0;document.addEventListener("touchstart",function(evt){if(jry_wb_beautiful_scroll_run_flag)return;if(typeof event=='undefined'||event==undefined)event=window.event;if(event.touches!=null&&event.touches.length==1)event.clientY=event.touches[0].clientY;else if(event.changedTouches!=null&&event.changedTouches.length==1)event.clientY=event.changedTouches[0].clientY;last_y=event.clientY;},false);document.addEventListener("touchmove",function(evt){if(jry_wb_beautiful_scroll_run_flag)return;if(typeof event=='undefined'||event==undefined)event=window.event;if(event.touches!=null&&event.touches.length==1)event.clientY=event.touches[0].clientY;else if(event.changedTouches!=null&&event.changedTouches.length==1)event.clientY=event.changedTouches[0].clientY;window.onmousewheel({'deltaY':last_y-event.clientY});last_y=event.clientY;},false);window.onmousewheel=function(e){if(timer!=null)clearTimeout(timer),timer=null;if(window.innerHeight==document.body.offsetHeight||jry_wb_beautiful_scroll_run_flag)return;e=e||window.event;if(e!=null)window.scrollTo(window.scrollX,window.scrollY+(e.deltaY||e.detail*50));jry_wb_scroll_body.style.height=window.innerHeight-Math.max(0,top_toolbar.clientHeight-window.scrollY);jry_wb_scroll_body.style.top=Math.max(0,top_toolbar.clientHeight-window.scrollY);;jry_wb_scroll_kuai.style.height=window.innerHeight/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height);jry_wb_scroll_kuai.style.top=Math.min(window.innerHeight-parseInt(jry_wb_scroll_kuai.style.height),Math.max(parseInt(jry_wb_scroll_body.style.top),window.scrollY/document.body.offsetHeight*parseInt(jry_wb_scroll_body.style.height)));jry_wb_scroll_body.style.opacity=1;jry_wb_right_tools.body.style.right=jry_wb_scroll_body.clientWidth;timer=setTimeout(function(){jry_wb_scroll_body.style.opacity=0;jry_wb_right_tools.body.style.right=0;timer=null;},1000);};document.addEventListener('DOMMouseScroll',window.onmousewheel,false);window.scrollTo(x,y);});function jry_wb_beautiful_video(video){var video_body = document.createElement("div");video.parentElement.insertBefore(video_body,video);video.parentElement.removeChild(video);video_body.appendChild(video);video_body.classList.add("jry_wb_beautiful_video_body");yuanshi_width=video.style.width==''?document.defaultView.getComputedStyle(video,null)['width']:video.style.width;yuanshi_width=(yuanshi_width==''?'100%':yuanshi_width);video_body.style.width='yuanshi_width';video.style.width="100%";video.setAttribute("controls","");if(jry_wb_test_is_pc()){video.removeAttribute("controls");var buttom_bar = document.createElement("div");video_body.appendChild(buttom_bar);buttom_bar.classList.add("jry_wb_beautiful_video_buttom_bar");buttom_bar.style.display='none';var start_button = document.createElement("div");buttom_bar.appendChild(start_button);start_button.classList.add("jry_wb_beautiful_video_button","jry_wb_icon","jry_wb_icon_bofang");var progress_bar = new jry_wb_progress_bar(buttom_bar,"50%",video.currentTime/video.duration,parseInt(video.currentTime)+"/"+parseInt(video.duration),function(x){video.currentTime = x*video.duration;},function(x){progress_bar.span.innerText = parseInt(x*video.duration);},"jry_wb_beautiful_video_progress_bar",'',true,false,'ok');var vioce_bar = new jry_wb_progress_bar(buttom_bar,"10%",video.volume,parseInt(video.volume*100)+"%",function(x){vioce_bar.update(video.volume = x,parseInt(video.volume*100)+"%");},function(x){vioce_bar.span.innerText = parseInt(x*100)+"%";},"jry_wb_beautiful_video_voice_bar",'',false);var full_button = document.createElement("div");buttom_bar.appendChild(full_button);full_button.classList.add("jry_wb_beautiful_video_button","jry_wb_icon");if(document.webkitIsFullScreen)full_button.classList.add("jry_wb_icon_quitquanping");else full_button.classList.add("jry_wb_icon_quanping");var ratio=video_body.clientWidth*video.videoHeight/video.videoWidth;var timer=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(!isNaN(ratio)){clearInterval(timer);buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;if(typeof window.onresize=='function')window.onresize();}},400);var timer2=null;video_body.onmousemove=function(){buttom_bar.style.display='';buttom_bar.style.opacity=1;if(document.webkitIsFullScreen){video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}else{buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}};video_body.onmouseover = function(){buttom_bar.style.display='';buttom_bar.style.opacity=1;if(timer2!=null)clearInterval(timer2),timer2=null;timer2=setInterval(function(){ratio=video.videoHeight/video.videoWidth;if(parseFloat(buttom_bar.style.opacity)<=0.01){clearInterval(timer2);timer2=null;buttom_bar.style.display='none';}else buttom_bar.style.opacity=parseFloat(buttom_bar.style.opacity)-0.02;},100);if(document.webkitIsFullScreen){video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}else{buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;}video.removeAttribute("controls");if(video.ended)start_button.classList.add("jry_wb_icon_bofang"),start_button.classList.remove("jry_wb_icon_zantingtingzhi");};video_body.onmouseout = function(){if(timer2!=null)clearInterval(timer2),timer2=null;buttom_bar.style.display='none';};video_ontimeupdate=video.ontimeupdate;video.ontimeupdate = function(){video.onprogress();if( typeof video_ontimeupdate=="function")video_ontimeupdate(video);progress_bar.update(video.currentTime/video.duration,parseInt(video.currentTime)+"/"+parseInt(video.duration));};video.onprogress=function(){var loaded=0;for(var i=0;i<video.buffered.length;i++)if(video.buffered.start(i)<video.currentTime&&video.currentTime<video.buffered.end(i))loaded=video.buffered.end(i);progress_bar.update_buttom(loaded/video.duration);};video.onclick = start_button.onclick = function(){if(video.ended)video.currentTime = 0;if(video.paused)video.play();else video.pause();};video.onplay = function(){start_button.classList.add("jry_wb_icon_zantingtingzhi");start_button.classList.remove("jry_wb_icon_bofang");jry_wb_midia_control_all.onplay(video);};video.onpause = function(){start_button.classList.remove("jry_wb_icon_zantingtingzhi");start_button.classList.add("jry_wb_icon_bofang");jry_wb_midia_control_all.onpause(video);};full_button.onclick=function(){if(document.webkitIsFullScreen){full_button.classList.add("jry_wb_icon_quanping");full_button.classList.remove("jry_wb_icon_quitquanping");jry_wb_exit_full_screen();video_body.style.width=yuanshi_width;buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="";video_body.style.position='';video.style.position='';buttom_bar.style.position='';video_body.style.zIndex='';video.style.zIndex='';buttom_bar.style.zIndex='';}else{full_button.classList.add("jry_wb_icon_quitquanping");full_button.classList.remove("jry_wb_icon_quanping");jry_wb_launch_full_screen(document.documentElement);video_body.style.position='fixed';video_body.style.top=0;video_body.style.left=0;video_body.style.width=document.body.clientWidth;video_body.style.height=document.body.clientHeight;buttom_bar.style.width=video_body.clientWidth;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="#000";video_body.style.zIndex=100000;video.style.zIndex=100000;buttom_bar.style.zIndex=100000;}};document.addEventListener('webkitfullscreenchange',function(){if(document.webkitIsFullScreen){}else{full_button.classList.add("jry_wb_icon_quanping");full_button.classList.remove("jry_wb_icon_quitquanping");jry_wb_exit_full_screen();video_body.style.width=yuanshi_width;buttom_bar.style.width=video_body.clientWidth;video_body.style.height=video_body.clientWidth*ratio;buttom_bar.style.top=video_body.clientHeight-buttom_bar.clientHeight;video_body.style.background="";video_body.style.position='';video.style.position='';buttom_bar.style.position='';video_body.style.zIndex='';video.style.zIndex='';buttom_bar.style.zIndex='';}});}this.body = video_body;this.video = video;}jry_wb_beautiful_video.prototype.push_tanmu = function(text,top,type,color){var danmu_body = document.createElement("div");this.video.after(danmu_body);if(type=="up_down"){danmu_body.style.left = top;danmu_body.classList.add("jry_wb_beautiful_video_danmu_up_down");}else{danmu_body.style.top = top;danmu_body.classList.add("jry_wb_beautiful_video_danmu_left_right");}danmu_body.innerHTML = text;danmu_body.style.color = color;setTimeout(()=>{this.body.removeChild(danmu_body);},7000);};var jry_wb_cache={set:function(name,data,longtime,time){if(time==undefined)time=jry_wb_get_server_time();else if(typeof time=="number")time=new Date(time);if(longtime==null||longtime==undefined)longtime = true;if(longtime)localStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));else  sessionStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));},set_last_time:function(name,time,longtime){if(longtime==null)longtime = true;var data = jry_wb_cache.get(name);if(longtime)localStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));else sessionStorage.setItem(name,JSON.stringify({lasttime:time,data:data}));},get:function(name){var buf = JSON.parse(localStorage.getItem(name));if(buf==null)buf = JSON.parse(sessionStorage.getItem(name));if(buf==null)return null;if(buf.data==null||( typeof buf.data=="object"&&buf.data.length==0))return null;return buf.data;},get_last_time:function(name,qiangzhi){if(qiangzhi)return '1926-08-17 00:00:00';var buf = JSON.parse(localStorage.getItem(name));if(buf==null)buf = JSON.parse(sessionStorage.getItem(name));if(buf==null)return '1926-08-17 00:00:00';if(buf.data==null||( typeof buf.data=="object"&&buf.data.length==0))return '1926-08-17 00:00:00';return buf.lasttime.to_time().s();},delete:function(name){localStorage.removeItem(name);sessionStorage.removeItem(name);},check_if_delete:function(key){return !(key=='showed'||key=='index_note'||key=='background_music'||key=='jry_wb_tree_note');},delete_all:function(){var showed = jry_wb_cache.get('showed');var index_note = jry_wb_cache.get('index_note');var background_music_playing = jry_wb_cache.get('background_music_playing');var background_music = jry_wb_cache.get('background_music');var jry_wb_tree_note = jry_wb_cache.get('jry_wb_tree_note');localStorage.clear();sessionStorage.clear();jry_wb_cache.set('showed',showed);jry_wb_cache.set('index_note',index_note);jry_wb_cache.set('background_music_playing',background_music_playing);jry_wb_cache.set('background_music',background_music);jry_wb_cache.set('jry_wb_tree_note',jry_wb_tree_note);},size:function(longtime){if(longtime==null)longtime = true;var count = 0;if(longtime)for(var i = 0;i<localStorage.length;i++)count+=localStorage.getItem(localStorage.key(i)).length+localStorage.key(i).length;else for(var i = 0;i<sessionStorage.length;i++)count+=sessionStorage.getItem(sessionStorage.key(i)).length+sessionStorage.key(i).length;return count;}};function jry_wb_color_to_string(color){var rgb=color.split(',');var r=parseInt(rgb[0].split('(')[1]);var g=parseInt(rgb[1]);var b=parseInt(rgb[2].split(')')[0]);var hex=""+((1<<24)+(r<<16)+(g<<8)+b).toString(16).slice(1);return hex;}var jry_wb_cookie = {set:function(key,val,time){var date = new Date();var expiresDays = time;date.setTime(date.getTime()+expiresDays*1000);if(jry_wb_test_domain_is_ip())document.cookie = key + "=" + escape(val) +";expires="+date.toGMTString()+";path=/;";else document.cookie = key + "=" + escape(val) +";expires="+date.toGMTString()+";path=/;domain=."+jry_wb_get_domain()+";";},get:function(key){var arrCookie=document.cookie.replace(/(^\s+)|(\s+$)/g,"").replace(/\s/g,"").split(";");var tips;for( var i = 0;i<arrCookie.length;i++){var arr = arrCookie[i].split("=");if(key==arr[0]){tips = arr[1];break;}}return tips;},delete:function(key){var date = new Date();date.setTime(date.getTime()-10000);document.cookie = key + "=v; expires =" +date.toGMTString();}};function jry_wb_copy_to_clipboard(s){if(window.clipboardData)window.clipboardData.setData('text',s);else{(function(s){document.oncopy = function(e){e.clipboardData.setData('text',s);e.preventDefault();document.oncopy = null;}})(s);document.execCommand('Copy');}}Date.prototype.s=function(){return this.getFullYear()+'-'+(this.getMonth()+1)+'-'+this.getDate()+' '+this.getHours()+':'+this.getMinutes()+':'+this.getSeconds();};<?php if(JRY_WB_FOLLOW_MOUTH_SPECIAL_FACT_SWITCH){ ?>function jry_wb_follow_mouth(div,config){var config = config;this.div = div;config.size = config.size*5+15;var objs = new Array(),N;var m={x:0,y:0};var center={x:100,y:100};var clientWidth = document.body.clientWidth-4;var clientHeight = document.body.clientHeight-4;N = 0;this.close = function(){this.switch = false;for( var i = 0;i<N;i++)if(objs[i]!=null&&objs[i].obj!=null&&objs[i].obj.parentNode!=null)objs[i].obj.parentNode.removeChild(objs[i].obj);N = 0;};this.reinit = function(){this.switch = true;setTimeout(()=>{this.mouth_move()},10);for( var i = 1;i<=360;i+=12)for( var j = 15;j<config.size;j+=5) {objs[N]={'obj':document.createElement("span"),'j':j,'x_pian':Math.sin(i*Math.PI/180),'y_pian':Math.cos(i*Math.PI/180),'x':0,'y':0};this.div.appendChild(objs[N].obj);objs[N].obj.className='jry_wb_mouth_spacial_fact';objs[N].obj.style.left=(objs[N].x = center.x+objs[N].x_pian)+'px';objs[N].obj.style.top=(objs[N].y = center.y+objs[N].y_pian)+'px';objs[N].obj.style.zIndex = config.size+10-j+15000;objs[N].x_pian = objs[N].j*objs[N].x_pian;objs[N].y_pian = objs[N].j*objs[N].y_pian;objs[N].pian=(objs[N].j/config.size)*(config.dou);N++;}};this.mouth_move = function(){var scrollTop = document.body.scrollTop==0?document.documentElement.scrollTop:document.body.scrollTop;var scrollLeft = document.body.scrollLeft==0?document.documentElement.scrollLeft:document.body.scrollLeft;var x = m.x+scrollLeft,y = m.y+scrollTop;center.x+=(x-center.x)/(config.speed);center.y+=(y-center.y)/(config.speed);var min_top = scrollTop,max_top = scrollTop+clientHeight;var min_left = scrollLeft,max_left = scrollLeft+clientWidth;for( var i = 0,n = objs.length;i<n;i++){objs[i].obj.style.left = Math.max(min_left,Math.min(max_left,(objs[i].x = Math.round(center.x+objs[i].x_pian+objs[i].pian*(center.x-x)))))+'px';objs[i].obj.style.top = Math.max(min_top,Math.min(max_top,(objs[i].y = Math.round(center.y+objs[i].y_pian+objs[i].pian*(center.y-y)))))+'px';}if(this.switch)setTimeout(()=>{this.mouth_move()},10);};setTimeout(()=>{if(!this.switch)return;clientWidth = document.body.clientWidth-4;clientHeight = document.body.clientHeight-4;},1000);jry_wb_add_onresize(()=>{if(!this.switch)return;clientWidth = document.body.clientWidth-4;clientHeight = document.body.clientHeight-4;});jry_wb_add_onmousemove((event)=>{if(!this.switch)return;if(event.touches)event = event.touches[0];else event = event;m.x = event.clientX;m.y = event.clientY;});jry_wb_add_onclick(()=>{if(!this.switch)return;for( var i = 0;i<N;i++){objs[i].obj.className='jry_wb_mouth_spacial_fact_onclick'};setTimeout(function(){for( var i = 0;i<N;i++){objs[i].obj.className='jry_wb_mouth_spacial_fact';}},100);});this.reinit();this.switch = true;}<?php } ?>function jry_wb_launch_full_screen (element){if (element.requestFullscreencreen)element.requestFullScreen();else if (element.mozRequestFullScreen)element.mozRequestFullScreen();else if (element.webkitRequestFullScreen)element.webkitRequestFullScreen();else if (element.msRequestFullScreen)element.msRequestFullScreen();}function jry_wb_exit_full_screen(){if (document.exitFullscreen)document.exitFullscreen();else if (document.mozCancelFullScreen)document.mozCancelFullScreen();else if (document.webkitExitFullscreen)document.webkitExitFullscreen();}function jry_wb_get_domain(){var all=window.location.host.split(".");return all[all.length-2]+"."+all[all.length-1];}function jry_wb_test_domain_is_ip(){var all=window.location.host.split(".");var flag=false;for( var i=0,n=all.length;i<n;i++)flag|=isNaN(parseInt(all[i]));return !flag;}function jry_wb_get_file_type(address){var buf=address.split('.');return buf[buf.length-1].toLowerCase();}function jry_wb_get_path(s) {var m = new Image();m.src = s;return m.src;}function jry_wb_get_size(size){if(size<1)return (size*1024).toFixed(2)+'B';if(size<1024)return parseFloat(size).toFixed(2)+'KB';else if(size<1024*1024)return (size/1024).toFixed(2)+'MB';else if(size<1024*1024*1024)return (size/1024/1024).toFixed(2)+'GB';else if(size<1024*1024*1024*1024)return (size/1024/1024/1024).toFixed(2)+'TB';else return (size/1024/1024/1024/1024).toFixed(2)+'PB';}jry_wb_spider_qq_music_spider=jry_wb_message.jry_wb_host+"spiders/qq_music_spider.php";jry_wb_spider_163_music_spider=jry_wb_message.jry_wb_host+"spiders/163_music_spider.php";jry_wb_spider_music_list_spider=jry_wb_message.jry_wb_host+"spiders/music_list_spider.php";function jry_wb_get_songs_by_mid (list){this.get_qq=function(mid){var cache=jry_wb_cache.get("qq_music_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache= new Array();if(cache==null||((b=cache.find(function(a){ return a.mid==mid}))==null)||(typeof b!='object')||((jry_wb_get_server_time().getDate()-new Date(b.lasttime.replace(/\-/g, "/")).getDate())>=1)){if(b!=null&&(typeof b=='object'))cache.splice(b,1);jry_wb_ajax_load_data(jry_wb_spider_qq_music_spider+'?mid='+mid,(a)=>{a=JSON.parse(a);cache.push(a);jry_wb_cache.set("qq_music_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);var a=JSON.parse(jry_wb_cache.get("qq_music_spider_cache")).find(function(a){ return a.mid==mid});return {'name':a.name,'music_url':a.music_url,'type':'qq','pic_url':a.pic_url,'mid':mid};}else{var a=cache.find(function(a){ return a.mid==mid});return {'name':a.name,'music_url':a.music_url,'type':'qq','pic_url':a.pic_url,'mid':mid};}};this.get_163=function(mid){var cache=jry_wb_cache.get("163_music_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache= new Array();if(cache==null||(b=cache.find(function(a){ return a.mid==mid}))==null||(typeof b!='object')||((jry_wb_get_server_time()-new Date(b.lasttime.replace(/\-/g, "/")))>(1000*60*60*0.25))){if(b!=null&&(typeof b=='object'))cache.splice(b,1);jry_wb_ajax_load_data(jry_wb_spider_163_music_spider+'?mid='+mid,(a)=>{a=JSON.parse(a);cache.push(a);jry_wb_cache.set("163_music_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);var a=JSON.parse(jry_wb_cache.get("163_music_spider_cache")).find(function(a){ return a.mid==mid});return {'name':a.name,'music_url':a.music_url,'type':'163','pic_url':a.pic_url,'mid':mid};}else{var a=cache.find(function(a){ return a.mid==mid});return {'name':a.name,'music_url':a.music_url,'type':'163','pic_url':a.pic_url,'mid':mid};}};this.get_list=function(slid){var cache=jry_wb_cache.get("music_list_spider_cache");if(cache=='')cache='null';cache=JSON.parse(cache);if(cache==null)cache= new Array();if(cache==null||(b=cache.find(function(a){ return a.slid==slid}))==null||(typeof b!='object')||(typeof b.data!='object')){if(b!=null&&(typeof b=='object')&&(typeof b.data=='object'))cache.splice(b,1);var get_data_souce;jry_wb_ajax_load_data(jry_wb_spider_music_list_spider+'?slid='+slid,(a)=>{get_data_souce=a=JSON.parse(a);var ans= new Object();ans.slid=a.slid;ans.makerid=a.makerid;ans.data=new Array();var cache_qq=jry_wb_cache.get("qq_music_spider_cache");if(cache_qq=='')cache_qq='null';cache_qq=JSON.parse(cache_qq);if(cache_qq==null)cache_qq=new Array();var cache_163=jry_wb_cache.get("163_music_spider_cache");if(cache_163=='')cache_163='null';cache_163=JSON.parse(cache_163);if(cache_163==null)cache_163=new Array();for(var i=0,n=a.data.length;i<n;i++){ans.data.push({'mid':a.data[i].mid,'type':a.data[i].type});if(a.data[i].type=='qq'){var b=cache_qq.find(function(aaa){ return aaa.mid==a.data[i].mid});if(b!=null)cache_qq.splice(b,1);cache_qq.push(a.data[i]);}else if(a.data[i].type=='163'){var b=cache_163.find(function(aaa){ return aaa.mid==a.data[i].mid});if(b!=null)cache_163.splice(b,1);cache_163.push(a.data[i]);}}jry_wb_cache.set("qq_music_spider_cache",JSON.stringify(cache_qq));jry_wb_cache.set("163_music_spider_cache",JSON.stringify(cache_163));cache.push(ans);jry_wb_cache.set("music_list_spider_cache",JSON.stringify(cache));jry_wb_loading_off();},null,false);return get_data_souce;}else{var a=cache.find(function(a){return a.slid==slid});for(var i=0,n=a.data.length;i<n;i++)if(a.data[i].type=='qq')a.data[i]=this.get_qq(a.data[i].mid);else if(a.data[i].type=='163')a.data[i]=this.get_163(a.data[i].mid);return a;}};var ans=new Array();for(var i=0,n=list.length;i<n;i++)if(list[i].type=='qq')ans.push(this.get_qq(list[i].mid));else if(list[i].type=='163')ans.push(this.get_163(list[i].mid));else if(list[i].type=='songlist')for(var j=0,buf=this.get_list(list[i].slid),nn=buf.data.length;j<nn;j++)ans.push(buf.data[j]);else if(list[i].type=='test')ans.push(list[i]);var flags={'qq':{},'163':{}};for(var i=0;i<ans.length;i++)if(ans[i].type=='qq')if(flags['qq'][ans[i].mid]==true)ans.splice(i,1),i--;else  flags['qq'][ans[i].mid]=true;else if(ans[i].type=='163')if(flags['163'][ans[i].mid]==true)ans.splice(i,1),i--;else  flags['163'][ans[i].mid]=true;return ans;}jry_wb_include_once_script_cnt=0;function jry_wb_include_once_script(src,callback){src = jry_wb_get_path(src);var test = document.getElementsByTagName('script');var flag = false;for( var i = 0,n = test.length;i<n;i++)if(test[i].src==src)return true;jry_wb_loading_on();jry_wb_include_once_script_cnt++;var myscript=document.createElement('script');document.head.appendChild(myscript);myscript.src=src;myscript.type='text/javascript';myscript.defer=true;myscript.onload=function(){jry_wb_loading_off();jry_wb_include_once_script_cnt--;if(typeof callback=='function')callback();};return false;}function jry_wb_include_once_css(src){src = jry_wb_get_path(src);var test = document.getElementsByTagName('link');var flag = false;for( var i = 0,n = test.length;i<n;i++)if(test[i].type=='text/css'&&test[i].href==src)return true;jry_wb_loading_on();var mylink=document.createElement('link');document.head.appendChild(mylink);mylink.href=src;mylink.type='text/css';mylink.rel='stylesheet';mylink.onload=function(){jry_wb_loading_off();};return false;}var jry_wb_js_session=new function(){var keys=[];this.close=false;var map=new Map();if(jry_wb_message.jry_wb_host=='')this.close=true;else if(typeof SharedWorker=='undefined')this.close=true;else{var worker=new SharedWorker(jry_wb_message.jry_wb_host+'jry_wb_js/jry_wb_js_session_worker.js');worker.port.onmessage=function(data){data=data.data;if(keys.indexOf(data.key)!=-1){keys.splice(keys.indexOf(data.key),1);return;}<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('JS session receive message: ',data);<?php } ?>var func=map.get(data.to);if(typeof func=='function')func(data.data);};worker.port.start();}this.send=function(to,data){var data;if(this.close)return;worker.port.postMessage(data={'to':to,'data':data,'key':(keys[keys.length]=Math.random())});<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('JS session send message: ',data);<?php } ?>};this.add_listener=function(id,func){if(this.close)return;map.set(id,func);};};function jry_wb_highlight_code(area,code,start){var div=document.createElement("div");div.classList.add('code');var language='';function test(text,i,word){for(var j=0;j<word.length&&(i+j)<text.length;j++)if(word[j]!=text[i+j])return false;return word.length;}for(var i=start,n=code.length;i<n;i++){if(code[i]=='`'&&code[i+1]=='`'&&code[i+2]=='`')return area.appendChild(div),i+2;if(i==start){for(;i<n&&code[i]!='\n'&&code[i]!=' ';i++)language+=code[i];language=language.toLowerCase();}else if(code[i]=='\n')div.appendChild(document.createElement('br'));else if(code[i]==' '){var span=document.createElement('span');div.appendChild(span);span.innerHTML='&nbsp;';}else{var flag=false,important=[],fuhao=[];if(language=='c')important=['int','void','using','namespace','const','main','return','long','inline','register','for','include','define','char'],fuhao=[',','.','(',')','[',']','{','}','|','\\','<','>','?','/','!','@','#','$','%','^','&','*','-','_','=','+','~','`',';',':'];else if(language=='c++'||language=='cpp')important=['int','void','using','namespace','const','main','return','long','inline','register','for','include','define','char','bool'],fuhao=[',','.','(',')','[',']','{','}','|','\\','<','>','?','/','!','@','#','$','%','^','&','*','-','_','=','+','~','`',';',':'];else if(language=='markdown'||language=='md')fuhao=[',','.','(',')','[',']','{','}','|','\\','<','>','?','/','!','@','#','$','%','^','&','*','-','_','=','+','~','`',';',':'];var span=document.createElement('span');div.appendChild(span);if(flag==false&&!((/[0-9a-zA-Z]/i).test(code[i-1])))for(var j=0;j<important.length;j++)if(k=test(code,i,important[j])){i+=k-1;span.innerHTML=important[j];flag=true;span.classList.add('important');break;}if(flag==false)for(var j=0;j<fuhao.length;j++)if(k=test(code,i,fuhao[j])){i+=k-1;span.innerHTML=fuhao[j];flag=true;span.classList.add('fuhao');break;}if(flag==false)if(!isNaN(parseInt(code[i]))){span.innerHTML=code[i];flag=true;span.classList.add('number');}if(flag==false)span.innerHTML=code[i];}}return false;}function jry_wb_markdown(area,id,time,text,notitle){this.notitle=true;if(notitle==null)this.notitle=false;this.area=area;this.catalog=document.createElement('ul');this.autonum=false;this.catalogdoc=[];this.lastcatalog=null;this.lasttext=null;this.title='';this.color_flag=false;this.color_flag=false;this.delete_flag=false;this.strong_flag=false;this.id=id;function test(text,i,word){for(var j=0;j<word.length&&(i+j)<text.length;j++)if(word[j]!=text[i+j])return false;return word.length;}this.fresh=(time,text)=>{<?php if(JRY_WB_DEBUG_MODE){ ?>console.time('jry_wb_markdown');<?php } ?>this.area.innerHTML='';this.catalog.innerHTML='';this.autonum=false;this.catalogdoc=[];this.lastcatalog=null;this.lasttext=null;this.title='';this.color_flag=false;this.delete_flag=false;this.em_flag=false;this.strong_flag=false;if(typeof jry_wb_ajax_get_text=="function")this.text=jry_wb_ajax_get_text(text);else this.text=(text);var buf=document.createElement('div');var title_flag=false;var title_flag_enable=true;for(var i=0,n=this.text.length;i<n;i++){if(this.text[i]=='-'&&this.text[i+1]=='-'&&this.text[i+2]=='-'){if(title_flag){title_flag=false;if(!this.notitle){var div=document.createElement("div");this.area.appendChild(div);div.align="right";div.classList.add('md_time_and_user');div.innerHTML="by";jry_wb_get_and_show_user(div,this.id,null,null,true);div=null;var div=document.createElement("div");this.area.appendChild(div);div.innerHTML="at&nbsp;"+time;div.align="right";div.classList.add('md_time_and_user');var hr=document.createElement("HR");this.area.appendChild(hr);hr.classList.add('md_hr');}}else if(title_flag_enable)title_flag=true;i+=2;continue;}else if(this.text[i]!=' '||this.text[i]!='\n'||this.text[i]!='\t'){title_flag_enable=false;}if(title_flag){if(j=test(this.text,i,'title:')){i+=j;var title=document.createElement("div");if(!this.notitle)this.area.appendChild(title);title.classList.add('md_title');title.align="center";for(;i<n&&this.text[i]!='\n'&&this.text[i]!='-';i++)title.innerHTML+=this.text[i];this.title=title.innerHTML;}else if(j=test(this.text,i,'autonum:')){i+=j;var buf='';for(;i<n&&this.text[i]!='\n'&&this.text[i]!='-';i++)buf+=this.text[i];if(buf=='true')this.autonum=true;else if(buf=='false')this.autonum=false;}}else{if(j=test(this.text,i,'[toc]')){i+=j;var buf=document.createElement('ul');this.area.appendChild(buf);buf.classList.add('md_toc_ul');this.catalogdoc.push(buf);buf.innerHTML=this.catalog.innerHTML;this.lasttext=null;}else if(j=test(this.text,i,'```')){i+=j;if((j=jry_wb_highlight_code(this.area,this.text,i))!==false)i=j;this.lasttext=null;}else if(this.text[i]=='#'&&(i==0||this.text[i-1]=='\n')){for(var j=0;(i+j)<this.text.length&&this.text[i+j]=='#';j++);i+=j;var buf='';for(;i<n&&this.text[i]!='\n';i++)buf+=this.text[i];var a=document.createElement("a");this.area.appendChild(a);var a2=a.cloneNode();a.classList.add('md_h_'+j);a2.classList.add('md_a');a.innerHTML=a2.innerHTML=buf;a2.href='#'+(a.name=JSON.stringify({'word':buf}));var br=document.createElement("br");this.area.appendChild(br);var li=document.createElement("li");li.appendChild(a2);li.setAttribute('h',j);var ul=document.createElement("ul");li.appendChild(ul);if(this.lastcatalog==null){if(this.catalog.children.length<2)this.catalog.appendChild(li);else this.catalog.children[1].appendChild(li);li.setAttribute('num',1);li.setAttribute('str','1.');if(this.autonum)a.innerHTML=a2.innerHTML='1.'+a.innerHTML;}else if(parseInt(this.lastcatalog.getAttribute('h'))>=j){var get=(a,j)=>{if(a==null)return this.catalog;else if(parseInt(a.getAttribute('h'))<j)return a;else return get(a.parentNode,j);};var b=get(this.lastcatalog,j);var num;if(b==this.catalog&&b.children==0)li.setAttribute('num',num=(1));else if(b==this.catalog)li.setAttribute('num',num=(parseInt(b.children[b.children.length-1].getAttribute('num'))+1));else if(b.children.length<2)li.setAttribute('num',num=(1));else if(b.children[1].children.length==0)li.setAttribute('num',num=(1));else li.setAttribute('num',num=(parseInt(b.children[1].children[b.children[1].children.length-1].getAttribute('num'))+1));var str;li.setAttribute('str',(str=b.getAttribute('str')+num+'.'));if(this.autonum)a.innerHTML=a2.innerHTML=str+a.innerHTML;if(b==this.catalog)b.appendChild(li);else b.children[1].appendChild(li);}else{var get=(a,j)=>{if(parseInt(a.getAttribute('h'))<=j||a.children.length==0)return a;else return get(a.children[a.children.length-1],j);};var b=get(this.lastcatalog,j);li.setAttribute('num',1);var str;li.setAttribute('str',(str=b.getAttribute('str')+1+'.'));if(this.autonum)a.innerHTML=a2.innerHTML=str+a.innerHTML;b.children[1].appendChild(li);}this.lastcatalog=li;this.lasttext=null;}else if(this.text[i]=='\n'){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var br=document.createElement("br");this.lasttext.appendChild(br);}else if(this.text[i]=='>'&&(i==0||this.text[i-1]=='\n')){i++;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var cite=document.createElement("cite");this.lasttext.appendChild(cite);cite.classList.add('md_cite');for(;i<n&&this.text[i]!='\n';i++)cite.innerHTML+=this.text[i];var br=document.createElement("br");this.lasttext.appendChild(br);}else if(j=test(this.text,i,'==')){i+=j;if(this.color_flag){i-=1;this.color_flag=false;this.lasttext=this.lasttext.parentNode;}else{this.color_flag=true;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var buf=document.createElement("span");this.lasttext.appendChild(buf);this.lasttext=buf;var buf='';if(this.text[i]=='#'){for(var j=0;i<n&&this.text[i]!=' '&&j<7;i++,j++)buf+=this.text[i];i-=1;}else buf='#66ccff';this.lasttext.style.color=buf;}}else if(j=test(this.text,i,'~~')){i+=(j-1);if(this.delete_flag){this.delete_flag=false;this.lasttext=this.lasttext.parentNode;}else{this.delete_flag=true;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var buf=document.createElement("span");this.lasttext.appendChild(buf);this.lasttext=buf;buf.classList.add('line_m');}}else if(j=test(this.text,i,'__')){i+=(j-1);if(this.em_flag){this.em_flag=false;this.lasttext=this.lasttext.parentNode;}else{this.em_flag=true;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var buf=document.createElement("em");this.lasttext.appendChild(buf);this.lasttext=buf;}}else if(j=test(this.text,i,'**')){i+=(j-1);if(this.strong_flag){this.strong_flag=false;this.lasttext=this.lasttext.parentNode;}else{this.strong_flag=true;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var buf=document.createElement("strong");this.lasttext.appendChild(buf);this.lasttext=buf;}}else if(j=test(this.text,i,'[@')){var id='';for(var j=0;(i+j+2)<n&&this.text[i+j+2]!=']'&&j<128;j++)id+=this.text[i+j+2];if(!isNaN(id=parseInt(id))){i+=(j+2);if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');jry_wb_get_and_show_user(this.lasttext,id,'200px',null,true);}else{if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+='[@';i+=1;}}else if(j=test(this.text,i,'![')){var word='';var href='';var failed=false;for(var j=0;(i+j+2)<n&&this.text[i+j+2]!=']'&&j<128;j++)word+=this.text[i+j+2];j+=2;if(j<128){if(this.text[i+j+1]=='('){for(var k=0;(i+j+k+2)<n&&this.text[i+j+k+2]!=')'&&k<256;k++)href+=this.text[i+j+k+2];if(k<256&&(test(href,0,'http://')||test(href,0,'https://'))){i+=j;i+=k;i+=2;var div=document.createElement("div");this.area.appendChild(div);div.align="center";var img=document.createElement("img");div.appendChild(img);img.src=href;img.classList.add('md_img');img.setAttribute('onclick','jry_wb_beautiful_alert.openpicture("'+word+'",(document.body.clientWidth-100),(document.body.clientHeight-100),"'+href+'");');var br=document.createElement("br");div.appendChild(br);var a=document.createElement("a");div.appendChild(a);a.innerHTML=word;a.href=href;a.className="md_media_font";this.lasttext=null}else failed=true;}else failed=true;}else failed=true;if(failed){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+=this.text[i];}}else if(j=test(this.text,i,'%[')){var word='';var href='';var failed=false;for(var j=0;(i+j+2)<n&&this.text[i+j+2]!=']'&&j<128;j++)word+=this.text[i+j+2];j+=2;if(j<128){if(this.text[i+j+1]=='('){for(var k=0;(i+j+k+2)<n&&this.text[i+j+k+2]!=')'&&k<256;k++)href+=this.text[i+j+k+2];if(k<256&&(test(href,0,'http://')||test(href,0,'https://'))){i+=j;i+=k;i+=2;var div=document.createElement("div");this.area.appendChild(div);div.align="center";var video=document.createElement("video");div.appendChild(video);video.src=href;video.setAttribute('onclick','jry_wb_beautiful_alert.openvideo("'+word+'",(document.body.clientWidth-100),(document.body.clientHeight-100),"'+href+'",function(){return true;},function(){return true;});');new jry_wb_beautiful_video(video);var br=document.createElement("br");div.appendChild(br);var a=document.createElement("a");div.appendChild(a);a.innerHTML=word;a.href=href;a.className="md_media_font";this.lasttext=null}else failed=true;}else failed=true;}else failed=true;if(failed){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+=this.text[i];}}else if(j=test(this.text,i,'~[')){var word='';var href='';var failed=false;for(var j=0;(i+j+2)<n&&this.text[i+j+2]!=']'&&j<128;j++)word+=this.text[i+j+2];j+=2;if(j<128){if(this.text[i+j+1]=='('){for(var k=0;(i+j+k+2)<n&&this.text[i+j+k+2]!=')'&&k<256;k++)href+=this.text[i+j+k+2];if(k<256&&(test(href,0,'http://')||test(href,0,'https://'))){i+=j;i+=k;i+=2;var div=document.createElement("div");this.area.appendChild(div);div.align="center";var audio=document.createElement("audio");div.appendChild(audio);audio.src=href;(new jry_wb_beautiful_music(audio,null,false,true)).set_background_picture('','');var br=document.createElement("br");div.appendChild(br);var a=document.createElement("a");div.appendChild(a);a.innerHTML=word;a.href=href;a.className="md_media_font";this.lasttext=null}else failed=true;}else failed=true;}else failed=true;if(failed){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+=this.text[i];}}else if((j=test(this.text,i,'[http://'))||(k=test(this.text,i,'[https://'))){var href='http';if(j==false)href+='s',j=k;href+='://';i+=j;for(;i<n&&this.text[i]!=']';i++)href+=this.text[i];if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var a=document.createElement("a");this.lasttext.appendChild(a);a.href=href;a.classList.add('md_link');a.setAttribute('target','_blank');a.innerHTML='网页链接';}else if(this.text[i]=='['){var word='';var href='';var failed=false;for(var j=0;(i+j+1)<n&&this.text[i+j+1]!=']'&&j<128;j++)word+=this.text[i+j+1];j+=2;if(j<128){if(this.text[i+j]=='('){for(var k=0;(i+j+k+1)<n&&this.text[i+j+k+1]!=')'&&k<256;k++)href+=this.text[i+j+k+1];if(k<256&&(test(href,0,'http://')||test(href,0,'https://'))){i+=j;i+=k;i+=1;if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var a=document.createElement("a");this.lasttext.appendChild(a);a.href=href;a.classList.add('md_link');a.setAttribute('target','_blank');a.innerHTML=word;}else failed=true;}else failed=true;}else failed=true;if(failed){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+=this.text[i];}}else if((j=test(this.text,i,'-[x]'))||(k=test(this.text,i,'-[]'))){if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');var b=document.createElement("b");this.lasttext.appendChild(b);b.classList.add('jry_wb_icon');if(j==false)j=k,b.classList.add('md_unfinish','jry_wb_icon_hr');else b.classList.add('md_finish','jry_wb_icon_duigoux');i+=(j-1);}else{if(this.lasttext==null)this.lasttext=document.createElement("span"),this.area.appendChild(this.lasttext),this.lasttext.classList.add('md_normal');this.lasttext.innerHTML+=this.text[i];}}}for(var i=0;i<this.catalogdoc.length;i++)this.catalogdoc[i].innerHTML=this.catalog.innerHTML;<?php if(JRY_WB_DEBUG_MODE){ ?>console.timeEnd('jry_wb_markdown');<?php } ?>};this.fresh(time,text);}var jry_wb_midia_control_all = new function(){this.playing_buf = null;this.playing = 0;var timer1=null;var timer2=null;var timer3=null;jry_wb_js_session.add_listener(1,(data)=>{var playing=jry_wb_cache.get('background_music');if(playing.status==true)this.stop_background=false;if(data=='get'){if(timer1!=null)clearTimeout(timer1),timer1=null;if(timer2!=null)clearTimeout(timer2),timer2=null;if(timer3!=null)clearTimeout(timer3),timer3=null;this.pause_all();}else if(data=='lose'){if(document.visibilityState != 'hidden'){jry_wb_js_session.send(1,'get');this.start();}if(timer!=null){if(timer1!=null)clearTimeout(timer1),timer1=null;if(timer2!=null)clearTimeout(timer2),timer2=null;if(timer3!=null)clearTimeout(timer3),timer3=null;}}else if(data=='close'){timer1=setTimeout(()=>{timer1=null;if(timer3!=null)clearTimeout(timer3),timer3=null;if(document.visibilityState != 'hidden'){jry_wb_js_session.send(1,'get');this.start();}else{timer2=setTimeout(()=>{jry_wb_js_session.send(1,'get');this.start();},(Math.random()*1000)+1000);}},Math.random()*1000);}});jry_wb_add_onbeforeunload(()=>{if(document.visibilityState!='hidden') jry_wb_js_session.send(1,'close');});document.addEventListener('visibilitychange',()=> {if(document.visibilityState == 'hidden') {jry_wb_js_session.send(1,'lose');}else{jry_wb_js_session.send(1,'get');<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>if(this.playing_buf==null&&!jry_wb_background_music.status())this.start();<?php } ?>}});<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>setInterval(()=>{if(document.visibilityState != 'hidden'&& !jry_wb_background_music.status()){jry_wb_js_session.send(1,'get');this.start();}},2000);<?php } ?>this.pause_all=()=>{if(this.playing_buf!=null)this.playing_buf.pause();<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>if(this.playing_buf==null)jry_wb_background_music.break(),jry_wb_background_music.oncontrol=false;<?php } ?>};this.start=()=>{if(this.playing_buf==null){<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>if((this.stop_background==false||typeof this.stop_background=='undefined'))jry_wb_background_music.oncontrol=true,jry_wb_background_music.continue();<?php } ?>}else this.playing_buf.play();};this.onplay = function(audio){if(this.playing_buf!=null)this.playing_buf.pause();<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>if(audio.id=='jry_wb_background_music')return this.stop_background=false;if(this.playing_buf==null)jry_wb_background_music.break();<?php } ?>this.playing_buf = audio;};this.onpause = function(audio){<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>if(audio.id=='jry_wb_background_music')this.stop_background=true;else{<?php } ?>this.playing_buf=null;<?php if(JRY_WB_BACKGROUND_MUSIC_SWITCH){ ?>setTimeout(function(){jry_wb_background_music.oncontrol=true,jry_wb_background_music.continue();},500);}<?php } ?>};};function jry_wb_progress_bar(area,width,progress,word,mouthclick,mouthmove,addclass,type,active,shuzhi,buttom_type){this.shuzhi=shuzhi==null?false:shuzhi;this.progress_body=document.createElement("div");area.appendChild(this.progress_body);this.progress_body.classList.add('jry_wb_progress','tooltip');if(addclass!='')this.progress_body.classList.add(addclass);this.progress_body.onmouseover=function(){buff=window.onmousewheel;if(document.removeEventListener)document.removeEventListener('DOMMouseScroll',window.onmousewheel);window.onmousewheel=function(){};};this.progress_body.onmouseout=function(){window.onmousewheel=buff;if(document.addEventListener)document.addEventListener('DOMMouseScroll',window.onmousewheel,false);};if(this.shuzhi)this.progress_body.style.height=width;else this.progress_body.style.width=width;if(buttom_type==undefined)this.progress_bar_buttom=null;else{this.progress_bar_buttom=document.createElement("div");this.progress_body.appendChild(this.progress_bar_buttom);this.progress_bar_buttom.classList.add('jry_wb_progress_bar');if(this.shuzhi)this.progress_bar_buttom.style.height=0;else this.progress_bar_buttom.style.width=0;if(buttom_type=='error')this.progress_bar_buttom.classList.add('jry_wb_color_error','jry_wb_color_normal_prevent');else if(buttom_type=='ok')this.progress_bar_buttom.classList.add('jry_wb_color_ok','jry_wb_color_ok_prevent');else if(buttom_type=='warn')this.progress_bar_buttom.classList.add('jry_wb_color_warn','jry_wb_warn_normal_prevent');else this.progress_bar_buttom.classList.add('jry_wb_color_normal','jry_wb_color_normal_prevent');}this.progress_bar=document.createElement("div");this.progress_body.appendChild(this.progress_bar);this.progress_bar.classList.add('jry_wb_progress_bar');if(active)this.progress_bar.classList.add('jry_wb_progress_bar_active','jry_wb_progress_bar_striped');if(type=='error')this.progress_bar.classList.add('jry_wb_color_error','jry_wb_color_normal_prevent');else if(type=='ok')this.progress_bar.classList.add('jry_wb_color_ok','jry_wb_color_ok_prevent');else if(type=='warn')this.progress_bar.classList.add('jry_wb_color_warn','jry_wb_warn_normal_prevent');else this.progress_bar.classList.add('jry_wb_color_normal','jry_wb_color_normal_prevent');this.text = document.createElement("span");this.progress_bar.appendChild(this.text);this.text.oncontextmenu = function(){ return false;}; this.text.onselectstart = function(){ return false;};this.text.name="text";this.text.style.cursor='default';this.text.classList.add('jry_wb_progress_bar_progress_text');this.text.style.fontSize='16px';this.text.style.wordBreak='initial';this.text.style.whiteSpace='nowrap';this.span = document.createElement("span");this.progress_bar.appendChild(this.span);if(mouthmove!=null)this.span.classList.add("jry_wb_progress_mouth_move");this.span.oncontextmenu = function(){ return false;}; this.span.onselectstart = function(){ return false;};this.span.style.cursor='default';if(isNaN(progress))progress = 0;this.update(progress,word);var buff=function(){};this.progress_body.onclick=(e)=>{if(mouthclick==null)return;e=e||window.event;layerX=(e.clientX-this.progress_body.getBoundingClientRect().left);layerY=(e.clientY-this.progress_body.getBoundingClientRect().top);if(this.shuzhi)var progress=layerY/this.progress_body.scrollHeight;else var progress=layerX/this.progress_body.scrollWidth;if( typeof mouthclick=="function")mouthclick(progress);};this.progress_body.onmousemove=(e)=>{if(mouthmove==null)return;e=e||window.event;layerX=(e.clientX-this.progress_body.getBoundingClientRect().left);layerY=(e.clientY-this.progress_body.getBoundingClientRect().top);if(this.shuzhi)var progress=layerY/this.progress_body.scrollHeight;else var progress=layerX/this.progress_body.scrollWidth;if(this.shuzhi){var y = Math.max(0,Math.min(layerY-(this.span.scrollHeight/2),this.progress_body.scrollHeight-(this.span.scrollHeight)));this.span.style.top = y+"px";this.span.style.left="30px";this.span.style.height="25px";}else{var x = Math.max(0,Math.min(layerX-(this.span.scrollWidth/2),this.progress_body.scrollWidth-(this.span.scrollWidth)));this.span.style.left = x+"px";}if(typeof mouthmove=="function")mouthmove(progress);};}jry_wb_progress_bar.prototype.set_mouse_wheel=function(callback){this.progress_body.onmousewheel=function(e){e=e||window.event;callback((e.deltaY/100)||(e.detail/3));return false;};if(this.progress_body.addEventListener)this.progress_body.addEventListener('DOMMouseScroll',this.progress_body.onmousewheel,false);};jry_wb_progress_bar.prototype.update = function(progress,word){if(this.shuzhi){this.progress_bar.style.height=""+parseFloat(progress)*100+"%";word = word.replace(/(\s)/g,'').replace(/(\d{1})/g,'$1<br>').replace(/\s*$/,'');}else this.progress_bar.style.width=""+parseFloat(progress)*100+"%";this.text.innerHTML = word;};jry_wb_progress_bar.prototype.update_buttom = function(progress){if(this.progress_bar_buttom==null)return;if(this.shuzhi)this.progress_bar_buttom.style.height=""+parseFloat(progress)*100+"%";else this.progress_bar_buttom.style.width=""+parseFloat(progress)*100+"%";};function jry_wb_progress_bar_round(area,width,r,background_color,front_color,font_size,font_color,round){this.width = width;this.r = r;this.background_color = background_color;this.front_color = front_color;this.font_size = font_size;this.font_color = font_color;this.round = round==null?true:false;this.body = document.createElement('div');area.appendChild(this.body);this.body.style.height = this.body.style.width=(this.width+this.r)*2;this.body.style.position="relative";this.word = document.createElement('div');this.body.appendChild(this.word);this.word.innerHTML="0%";this.word.style="position:absolute;font-size:"+this.font_size+'px;top:'+((this.width+this.r)-this.font_size/2)+'px;left:'+((this.width+this.r)-this.font_size/4*(this.word.innerHTML.length))+'px;color:'+this.font_color+';';this.canvas = document.createElement('canvas');this.body.appendChild(this.canvas);this.canvas.style="position:absolute;top:0px;left:0px;";this.canvas.width = this.canvas.height=(this.width+this.r)*2;this.background = this.canvas.getContext("2d");this.background.beginPath();this.background.lineWidth = this.width;this.background.arc(this.width+this.r,this.width+this.r,this.r,0,Math.PI*2);this.background.strokeStyle = this.background_color;this.background.lineCap='round';this.background.stroke();this.background.save();this.front = this.canvas.getContext("2d");this.front.beginPath();this.front.lineWidth = this.width;this.front.strokeStyle = this.front_color;this.front.lineCap = this.round?'round':'butt';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*1.5,Math.PI*(1.5+0));this.front.stroke();}jry_wb_progress_bar_round.prototype.update = function(progress){this.front.beginPath();this.front.lineWidth = this.width;this.front.strokeStyle = this.background_color;this.front.lineCap='round';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*0,Math.PI*2);this.front.stroke();this.front.beginPath();this.front.lineWidth = this.width;this.front.strokeStyle = this.front_color;this.front.lineCap = this.round?'round':'butt';this.front.arc(this.width+this.r,this.width+this.r,this.r,Math.PI*1.5,Math.PI*(1.5+progress*2));this.front.stroke();this.word.innerHTML = parseInt(progress*100)+"%";this.word.style="position:absolute;font-size:"+this.font_size+'px;top:'+((this.width+this.r)-this.font_size/2)+'px;left:'+((this.width+this.r)-this.font_size/4*(this.word.innerHTML.length))+'px;color:'+this.font_color+';';};jry_wb_progress_bar_round.prototype.add = function(from,to,time,callback){if(from<to){this.update(Math.max(Math.min(1,from+0.01),0));setTimeout(()=>{this.add(from+0.01,to,time,callback);},time);}else callback();};jry_wb_progress_bar_round.prototype.minus = function(from,to,time,callback){if(from>to){this.update(Math.max(Math.min(1,from-0.01),0));setTimeout(()=>{this.minus(from-0.01,to,time,callback);},time);}else callback();};jry_wb_progress_bar_round.prototype.set = function(from,to,time,callback){callback = typeof callback=='function'?callback:function(){};if(from<to)this.add(from,to,time,callback);else this.minus(from,to,time,callback);};var jry_wb_right_tools = new function(){this.init=function(){if(typeof this.body!='undefined')return;this.body=document.createElement("div");document.body.appendChild(this.body);this.body.style.right=0;this.body.style.height='100%';this.body.style.top='0';this.body.style.position='fixed';this.body.style.width='40px';this.body.style.zIndex='9999';this.body.style.transitionDuration='1s';};this.list=[];this.add=function(button){if(typeof this.body=='undefined')this.init();if(button.parentElement!=null)button.parentElement.removeChild(button);this.body.appendChild(button);button.style.position='absolute';this.list[this.list.length]=button;this.fresh();};this.fresh=function(){for(var i=0;i<this.list.length;i++){this.list[i].style.position='absolute';this.list[i].style.top=this.body.clientHeight*0.05+this.body.clientHeight*(i+1)/(this.list.length+3);}};jry_wb_add_onresize(()=>{this.fresh();});jry_wb_add_load(()=>{this.init()});};function jry_wb_set_delate_special() {}function jry_wb_set_delate_special_one(input){}const jry_wb_keycode_backspace = 8;const jry_wb_keycode_tab = 9;const jry_wb_keycode_clear = 12;const jry_wb_keycode_enter = 13;const jry_wb_keycode_shift = 16;const jry_wb_keycode_control = 17;const jry_wb_keycode_alt = 18;const jry_wb_keycode_pause = 19;const jry_wb_keycode_capslock = 20;const jry_wb_keycode_escape = 27;const jry_wb_keycode_space = 32;const jry_wb_keycode_prior = 33;const jry_wb_keycode_next = 34;const jry_wb_keycode_end = 35;const jry_wb_keycode_home = 36;const jry_wb_keycode_left = 37;const jry_wb_keycode_up = 38;const jry_wb_keycode_right = 39;const jry_wb_keycode_down = 40;const jry_wb_keycode_select = 41;const jry_wb_keycode_print = 42;const jry_wb_keycode_execute = 43;const jry_wb_keycode_insert = 45;const jry_wb_keycode_delete = 46;const jry_wb_keycode_help = 47;const jry_wb_keycode_0 = 48;const jry_wb_keycode_1 = 49;const jry_wb_keycode_2 = 50;const jry_wb_keycode_3 = 51;const jry_wb_keycode_4 = 52;const jry_wb_keycode_5 = 53;const jry_wb_keycode_6 = 54;const jry_wb_keycode_7 = 55;const jry_wb_keycode_8 = 56;const jry_wb_keycode_9 = 57;const jry_wb_keycode_a = 65;const jry_wb_keycode_b = 66;const jry_wb_keycode_c = 67;const jry_wb_keycode_d = 68;const jry_wb_keycode_e = 69;const jry_wb_keycode_f = 70;const jry_wb_keycode_g = 71;const jry_wb_keycode_h = 72;const jry_wb_keycode_i = 73;const jry_wb_keycode_j = 74;const jry_wb_keycode_k = 75;const jry_wb_keycode_l = 76;const jry_wb_keycode_m = 77;const jry_wb_keycode_n = 78;const jry_wb_keycode_o = 79;const jry_wb_keycode_p = 80;const jry_wb_keycode_q = 81;const jry_wb_keycode_r = 82;const jry_wb_keycode_s = 83;const jry_wb_keycode_t = 84;const jry_wb_keycode_u = 85;const jry_wb_keycode_v = 86;const jry_wb_keycode_w = 87;const jry_wb_keycode_x = 88;const jry_wb_keycode_y = 89;const jry_wb_keycode_z = 90;const jry_wb_keycode_win = 91;const jry_wb_keycode_0_ = 96;const jry_wb_keycode_1_ = 97;const jry_wb_keycode_2_ = 98;const jry_wb_keycode_3_ = 99;const jry_wb_keycode_4_ = 100;const jry_wb_keycode_5_ = 101;const jry_wb_keycode_6_ = 102;const jry_wb_keycode_7_ = 103;const jry_wb_keycode_8_ = 104;const jry_wb_keycode_9_ = 105;const jry_wb_keycode_f1 = 112;const jry_wb_keycode_f2 = 113;const jry_wb_keycode_f3 = 114;const jry_wb_keycode_f4 = 115;const jry_wb_keycode_f5 = 116;const jry_wb_keycode_f6 = 117;const jry_wb_keycode_f7 = 118;const jry_wb_keycode_f8 = 119;const jry_wb_keycode_f9 = 120;const jry_wb_keycode_f10 = 121;const jry_wb_keycode_f11 = 122;const jry_wb_keycode_f12 = 123;var jry_wb_shortcut_tree={'func':function(){},'next': new Array()};var jry_wb_shortcut_keycode_buf = new Array();var jry_wb_shortcut_keycode_buf_count = 0;var jry_wb_shortcut_debug = false;var jry_wb_shortcut_set_flag = false;window.onkeyup=function (e) {if (!e) e = window.event;if((e.target.tagName=="TEXTAREA"||e.target.tagName=="INPUT"))return true;var keycode=(e.keyCode||e.which);if(keycode>=jry_wb_keycode_0_&&keycode<=jry_wb_keycode_9_)keycode = keycode-jry_wb_keycode_0_+jry_wb_keycode_0;jry_wb_shortcut_keycode_buf[jry_wb_shortcut_keycode_buf_count++]=keycode;if(!jry_wb_shortcut_set_flag){jry_wb_shortcut_set_flag=true;setTimeout(function(){var now = jry_wb_shortcut_tree;var n = jry_wb_shortcut_keycode_buf_count;jry_wb_shortcut_set_flag = false;jry_wb_shortcut_keycode_buf_count = 0;for(var i=0;i<n;i++){if(now==null)return true;now = now.next[jry_wb_shortcut_keycode_buf[i]];}if(now==null||now.func==null)return ;if(typeof now.func=='function')now.func(e);},250);}return ((e.target.tagName=="TEXTAREA"||e.target.tagName=="INPUT")&&(!e.ctrlKey))||(keycode==jry_wb_keycode_f12||keycode==jry_wb_keycode_f5||keycode==jry_wb_keycode_f11||(keycode==jry_wb_keycode_c&&e.ctrlKey));};function jry_wb_set_shortcut(code,func){if(typeof code!='function')code=[code];var now = jry_wb_shortcut_tree.next;for( var i = 0,n = code.length;i<n;i++){if(now[code[i]]==null)now[code[i]]={'func':function(){},'next': new Array()};if(i!=(n-1))now = now[code[i]].next;}now[code[code.length-1]].func = func;}function jry_wb_show_tr_no_input(table,name,value,id,width){var tr = document.createElement("tr");table.appendChild(tr);var td = document.createElement("td");td.width=width==null?"400":width;var h55 = document.createElement("h56");td.appendChild(h55);h55.innerHTML = name;tr.appendChild(td);td = null;var td = document.createElement("td");var h55 = document.createElement("h56");h55.id = id;td.appendChild(h55);h55.innerHTML = value;tr.appendChild(td);return td;}function jry_wb_show_tr_with_input(table,name,id,value,type,onclick,width){var tr = document.createElement("tr");table.appendChild(tr);var td = document.createElement("td");td.width=width==null?"400":width;var h55 = document.createElement("h56");td.appendChild(h55);h55.innerHTML = name;tr.appendChild(td);td = null;var td = document.createElement("td");td.width="*";var input = document.createElement("input");input.name = input.id = id;input.className='h56';input.type = type;input.value = value;input.onclick = onclick;jry_wb_set_delate_special_one(input);td.appendChild(input);tr.appendChild(td);return td;}<?php if(JRY_WB_SOCKET_SWITCH){ ?><?php include_once('../jry_wb_configs/jry_wb_config_socket.php'); ?>var jry_wb_socket = new function(){var socket=null;this.stop=false;var timer1;var timer2;var listener=[];var listener_type=[];var error=[];var send_buf=[];this.status=0;if(typeof SharedWorker=='undefined'){var start=()=>{if(this.stop||jry_wb_login_user==undefined||jry_wb_login_user.id<=0||jry_wb_login_user.id=='')return;if(socket!==null)socket.close(),socket=null;socket=new WebSocket('ws://<?php echo JRY_WB_DOMIN; ?>:<?php echo JRY_WB_SOCKET_PORT; ?>/jry_wb/jry_wb_socket/socket.php');socket.onopen=(evt)=>{onstart();this.status=socket.readyState;};socket.onmessage=(evt)=>{<?php if(JRY_WB_DEBUG_MODE){ ?>console.log( "Received Message: " + evt.data);<?php } ?>callback(JSON.parse(evt.data));};socket.onclose=(evt)=>{this.stop=false;this.status=socket.readyState;setTimeout(()=>{jry_wb_beautiful_right_alert.alert('已断开连接，正在重连',1000,'auto','warn');start();onclose();},5000);};};}else{var start=()=>{if(this.stop||jry_wb_login_user==undefined||jry_wb_login_user.id<=0||jry_wb_login_user.id=='')return;var worker=new SharedWorker(jry_wb_message.jry_wb_host+'jry_wb_js/jry_wb_socket_worker.js.php');socket={};worker.port.onmessage=(data)=>{data=data.data;console.log(data);if(data.type==100001){this.status=socket.readyState=data.readyState;if(socket.readyState==1)onstart();else onclose();}else if(data.type==100002)callback(data.data);};socket.send=(data)=>{var data=JSON.parse(data);if(data.type==100001)worker.port.postMessage({'type':100003,'data':data});else if(data.type==100002)worker.port.postMessage({'type':100004,'data':data});else worker.port.postMessage({'type':100002,'data':data});};worker.port.start();worker.port.postMessage({'type':100000,'data':jry_wb_login_user});worker.port.postMessage({'type':100003,'data':{'code':true,'type':100001,'data':{'add':listener_type}}});};}var onclose=()=>{if(typeof this.connect_icon=='undefined')jry_wb_add_load(()=>{this.connect_icon.classList.remove('jry_wb_icon_shujulianjie','jry_wb_color_ok_font');this.connect_icon.classList.add('jry_wb_icon_duankailianjie','jry_wb_color_warn_font','jry_wb_color_normal_font');});else{this.connect_icon.classList.remove('jry_wb_icon_shujulianjie','jry_wb_color_ok_font');this.connect_icon.classList.add('jry_wb_icon_duankailianjie','jry_wb_color_warn_font','jry_wb_color_normal_font');}};var onstart=()=>{this.send({'code':true,'type':100001,'data':{'add':listener_type}});if(typeof this.connect_icon=='undefined')jry_wb_add_load(()=>{this.connect_icon.classList.add('jry_wb_icon_shujulianjie','jry_wb_color_ok_font');this.connect_icon.classList.remove('jry_wb_icon_duankailianjie','jry_wb_color_warn_font','jry_wb_color_normal_font');});else{this.connect_icon.classList.add('jry_wb_icon_shujulianjie','jry_wb_color_ok_font');this.connect_icon.classList.remove('jry_wb_icon_duankailianjie','jry_wb_color_warn_font','jry_wb_color_normal_font');}};var callback=(data)=>{if(data.code==false){if(data.reason==100000)jry_wb_login_user.id=-1;else if(data.reason==500000)this.stop=true;}else{if(data.type==100000)for(var i=0;i<send_buf.length;i++)this.send(send_buf.splice(0,1)[0]);else if(data.type==100003)console.log('Now have Listener ',data.data.listener);else if(data.type==100004 && typeof error[data.data.reason]=='function')error[data.data.reason](data.data);else if(typeof listener[data.type]=='function')listener[data.type](data);}};start();jry_wb_add_load(()=>{if(jry_wb_login_user==undefined||jry_wb_login_user.id<=0||jry_wb_login_user.id=='')return;this.connect_icon=document.createElement("p");jry_wb_right_tools.add(this.connect_icon);this.connect_icon.classList.add('jry_wb_icon_duankailianjie','jry_wb_icon','jry_wb_color_warn_font','jry_wb_color_normal_font');this.connect_icon.style="z-index:9999;margin:0px;right:0px;position:fixed;width:35px;height:35px;font-size:35px";});this.send=(data,add_buf)=>{if(add_buf==undefined)add_buf=true;data=JSON.stringify(data);if(socket!=null&&socket.readyState==1){socket.send(data);return true;}else{if(add_buf){data=JSON.parse(data);if(data.type!==100001)send_buf.push(data);return true;}return false;}<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('Send Message: ',data);<?php } ?>};this.add_listener=(type,func)=>{<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('Socket add listener at '+type+':',func);<?php } ?>type=parseInt(type);listener[type]=func;listener_type[listener_type.length]=type;this.send({'code':true,'type':100001,'data':{'add':type}});};this.delete_listener=(type)=>{type=parseInt(type);<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('Socket delete listener at '+type+':');<?php } ?>this.send({'code':true,'type':100002,'data':{'del':type}});listener[type]=null;};this.add_error=(reason,func)=>{<?php if(JRY_WB_DEBUG_MODE){ ?>console.log('Socket add error at '+reason+':',func);<?php } ?>error[reason]=func;};this.add_error(500000,function(data){console.error(data.reason);});this.add_error(500001,function(data){console.error(data.reason);});this.add_error(500002,function(data){console.error(data.reason);});this.add_error(500003,function(data){console.error(data.reason);});};<?php } ?>String.prototype.to_time=function(){var dd1=new Date(this);if(isNaN(dd1.getTime()))dd1=new Date(this.replace(/\-/g, "/"));return dd1;};function jry_wb_sync_data_with_server(syncname,dataurl,array,cmp,after,sort_cmp){jry_wb_ajax_load_data(dataurl,function(data){jry_wb_loading_off();var data = JSON.parse(data);var newdata=false;if(data==null)data=[];if((typeof data.length=='number'&&data.length>0)||(typeof data.length=='undefined'&&typeof data.data!='undefined'&&data.data.length>0))newdata=true;if(typeof data.code!='undefined'&&data.code==false){if(data.reason==100000)jry_wb_beautiful_alert.alert("没有登录","","window.location.href='"+jry_wb_message.jry_wb_host+'jry_wb_mainpages/login.php'+"'");else if(data.reason==100001)jry_wb_beautiful_alert.alert("权限缺失","缺少"+data.extern,"window.location.href='"+jry_wb_message.jry_wb_host+'jry_wb_mainpages/index.php'+"'");else jry_wb_beautiful_alert.alert("错误"+data.reason,"请联系开发组");return ;}if(data==null||typeof data.length=='number')after(jry_wb_sync_data_with_array(syncname,data,cmp,sort_cmp),newdata);else if(typeof data.length=='undefined')after(jry_wb_sync_data_with_array(syncname,data.data,cmp,sort_cmp),newdata);},array);}function jry_wb_sync_data_with_array(syncname,data,cmp,sort_cmp){var origin=null;if(syncname!='')origin=jry_wb_cache.get(syncname);if(origin==null)origin=data;else if(data!=null)for(var i=0,n=data.length;i<n;i++){this.buf=data[i];var now=origin.find(cmp);if(now==null)origin.push(data[i]);else origin.splice(origin.indexOf(now),1,data[i]);}if(typeof sort_cmp=='function')if(origin!=null)origin.sort(sort_cmp);if(syncname!='')jry_wb_cache.set(syncname,origin);return origin;}function jry_wb_test_china_id_card(idcard){idcard.toUpperCase();  if (idcard.length==15)    return jry_wb_test_china_id_card_15(idcard);  else if (idcard.length==18)    return (jry_wb_test_china_id_card_18(idcard));else     return false;}  function jry_wb_test_china_id_card_18(idcardd){  idcardd=idcardd.toUpperCase();var wi = [7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1];var valideCode = [1,0,10,9,8,7,6,5,4,3,2];var sum = 0;var idcard=[];for(var i=0;i<idcardd.length;i++)if (idcardd[i].toUpperCase()=='X')idcard[i] = 10;else idcard[i]=parseInt(idcardd[i]);  for ( var i = 0; i < 17; i++)    sum += wi[i] * idcard[i];   valCodePosition = sum % 11;   if (idcard[17] == valideCode[valCodePosition]){var year = idcardd.substring(6,10);  var month = idcardd.substring(10,12);  var day = idcardd.substring(12,14);  var temp_date = new Date(year,parseFloat(month)-1,parseFloat(day));  if(temp_date.getFullYear()!=parseFloat(year)||temp_date.getMonth()!=parseFloat(month)-1||temp_date.getDate()!=parseFloat(day)) return false;  else return true;}else     return false;  }  function jry_wb_get_sex_by_china_id_card(idcard){idcard.toUpperCase();if(!jry_wb_test_china_id_card(idcard))return false;if(idcard.length==15){  if(idcard.substring(14,15)%2==0)return 0;  else return 1;  }else if(idcard.length ==18){  if(idcard.substring(14,17)%2==0)return 0;  else return 1;  }else return false;  } function jry_wb_test_china_id_card_15(idcard15){idcard15.toUpperCase();var year=idcard15.substring(6,8);  var month=idcard15.substring(8,10);  var day=idcard15.substring(10,12);  var temp_date = new Date(year,parseFloat(month)-1,parseFloat(day));if(temp_date.getYear()!=parseFloat(year)||temp_date.getMonth()!=parseFloat(month)-1||temp_date.getDate()!=parseFloat(day))return false;else return true;  }  function jry_wb_test_is_pc(){  var userAgentInfo = navigator.userAgent; var Agents = new Array("Android", "iPhone", "SymbianOS", "Windows Phone", "iPad", "iPod");  for ( var v = 0; v < Agents.length; v++) if (userAgentInfo.indexOf(Agents[v]) > 0)return false;return true;  }function jry_wb_test_mail(mail){var myreg = /^([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+@([a-zA-Z0-9]+[_|\_|\.]?)*[a-zA-Z0-9]+\.[a-zA-Z]{2,3}$/;if(!myreg.test(mail))return false;return true;}function jry_wb_test_phone_number( phone){   if(!(/^1[34578]\d{9}$/.test(phone)))    return false; return true;}function jry_wb_get_time() {var date=new Date();var seperator1="-";var seperator2=":";var month=date.getMonth() + 1;var strdate=date.getDate();if (month>=1&&month<=9)month="0" + month;if(strdate>=0&&strdate<=9)strdate="0" + strdate;var currentdate=date.getFullYear()+seperator1+month+seperator1+strdate+" "+date.getHours() +seperator2+date.getMinutes()+seperator2+date.getSeconds();return currentdate;}function jry_wb_get_server_time(){  return (new Date((new Date())-jry_wb_time_different));}function jry_wb_get_day(second,all){if(isNaN(second))return '';if(all==undefined)all=true;var date='',showed=false;second=Math.abs(second);if(Math.floor(second/60/60/24/30/12)!=0)date+=Math.floor(second/60/60/24/30/12)+'年',second-=(Math.floor(second/60/60/24/30/12)*60*60*24*30*12),showed=true;if(Math.floor(second/60/60/24/30)!=0||(all&&showed))date+=Math.floor(second/60/60/24/30)+'月',second-=(Math.floor(second/60/60/24/30)*60*60*24*30),showed=true;if(Math.floor(second/60/60/24)!=0||(all&&showed))date+=Math.floor(second/60/60/24)+'日',second-=(Math.floor(second/60/60/24)*60*60*24),showed=true;if(Math.floor(second/60/60)!=0||(all&&showed))date+=Math.floor(second/60/60)+'时',second-=(Math.floor(second/60/60)*60*60),showed=true;if(Math.floor(second/60)!=0||(all&&showed))date+=Math.floor(second/60)+'分',second-=(Math.floor(second/60)*60),showed=true;if(Math.floor(second)!=0||(all&&showed))date+=Math.floor(second)+'秒';return date;}function jry_wb_show_time(intime,addre){if(typeof addre=='string')addre=document.getElementById(addre);if(typeof intime.to_time=='function')intime=intime.to_time();setinterval(function(){var date='',buf,jie;var a=jry_wb_get_server_time();buf=intime.getSeconds()-a.getSeconds();if(buf<0)buf=60+buf,jie=1;else jie=0;date=buf+'秒'+date;buf=intime.getMinutes()-a.getMinutes()-jie;if(buf<0)buf=60+buf,jie=1;else jie=0;date=buf+'分'+date;buf=intime.getHours()-a.getHours()-jie;if(buf<0)buf=24+buf,jie=1;else jie=0;date=buf+'时'+date;date=Math.floor((intime.getTime()-a.getTime()-jie)/(1000*60*60*24))+'天'+date;addre.innerHTML=date;},1000);}function jry_wb_compare_time(d1,d2){if(typeof d1.to_time=='function')d1=d1.to_time();if(typeof d2.to_time=='function')d2=d2.to_time();return d1-d2;}function jry_wb_compare_time(d1,d2){if(d1==undefined)d1=new Date('1926-08-17 00:00:00');if(d2==undefined)d2=new Date('1926-08-17:00:00:00');if(typeof d1.to_time=='function')d1=d1.to_time();if(typeof d2.to_time=='function')d2=d2.to_time();return d1-d2;}function jry_wb_tree(area,text,check,callback){this.check=check==undefined?true:check;if(jry_wb_cache.get('jry_wb_tree_note')!=true)jry_wb_cache.set('jry_wb_tree_note',true),jry_wb_beautiful_right_alert.alert(text==null?'右键全部展开/合并树形图':text);this.root = document.createElement('div');area.appendChild(this.root);this.root.classList.add('jry_wb_tree_root');this.root.oncontextmenu=(event)=>{if(this.openedall)this.closeall();else this.openall();return false;};this.root.check=this.check;this.openedall=false;this.add = function(father,name,value,check){check=check==undefined?true:check;if(father==this.root){var one = document.createElement('ul');father.appendChild(one);}else{var one = document.createElement('ul');father.children[1].appendChild(one);one.style='padding-left:25px;';father.style='';father.children[0].children[0].classList.add('jry_wb_tree_one_open','jry_wb_icon','jry_wb_icon_xuanzeqizhankai');}one.classList.add('jry_wb_tree_one_body');var self = document.createElement('li');one.appendChild(self);self.classList.add('jry_wb_tree_one_body_self');var button = document.createElement('span');self.appendChild(button);button.id = value;var input = document.createElement('input');self.appendChild(input);input.value = value;input.type='checkbox';input.id='i'+value;if(!(check&&this.check&&father.check))input.style.display='none',one.check=false;else one.check=true;self.innerHTML+=name;var child = document.createElement('li');one.appendChild(child);child.classList.add('jry_wb_tree_one_body_children');child.style.display='none';var update=(input,from_child)=>{if(!from_child){var all = input.parentNode.parentNode.children[1].getElementsByTagName('input');for( var i = 0,n = all.length;i<n;i++)all[i].checked = input.checked;}var father = input.parentNode.parentNode;if(father==null||father.className=='jry_wb_tree_root')return;if(input.checked){var flag = true;for( var i = 0,n = father.parentNode.children.length;i<n;i++)if(!(flag&=father.parentNode.children[i].children[0].children[1].checked))break;if(flag){if(father.parentNode.parentNode.children[0]==null||father.parentNode.parentNode.children[0].children[1]==null)return;father.parentNode.parentNode.children[0].children[1].checked = true;update(father.parentNode.parentNode.children[0].children[1],true);}}else{if(father==this.root||father.parentNode==this.root||father.parentNode.parentNode==this.root||father.parentNode.parentNode.children[0]==null||father.parentNode.parentNode.children[0].children[1]==null)return;father.parentNode.parentNode.children[0].children[1].checked = false;update(father.parentNode.parentNode.children[0].children[1],true);}};one.children[0].children[0].onclick = (e)=>{if(!e)e = window.event;child.style.display = child.style.display=='none'?'':'none';if(child.style.display=='none')e.target.classList.remove('jry_wb_icon_xuanzeqishouqi'),e.target.classList.add('jry_wb_icon_xuanzeqizhankai');else e.target.classList.remove('jry_wb_icon_xuanzeqizhankai'),e.target.classList.add('jry_wb_icon_xuanzeqishouqi');this.openedall=false;window.onresize();};one.children[0].children[1].onclick = function(){update(this,false);if(typeof callback=='function')callback();};return one;};this.get_checked=(yasuo)=>{yasuo = yasuo==null?false:yasuo;var ans=[];if(!yasuo){var all = this.root.getElementsByTagName('input');for( var i = 0,n = all.length;i<n;i++)if(all[i].checked)ans.push(all[i].value);}else{function get_one(onebody){if(onebody.children[0].children[1].checked)ans.push(onebody.children[0].children[1].value);else for( var all = onebody.children[1].children,n = all.length,i = 0;i<n;i++)get_one(all[i]);}for( var all = this.root.children,n = all.length,i = 0;i<n;i++)get_one(all[i]);}return ans;};this.openall=()=>{this.openedall=true;for( var all = this.root.getElementsByClassName("jry_wb_tree_one_body_children"),i = 0,n = all.length;i<n;i++){if(all[i].innerHTML!=''){all[i].style.display='';all[i].parentNode.children[0].children[0].classList.remove('jry_wb_icon_xuanzeqizhankai'),all[i].parentNode.children[0].children[0].classList.add('jry_wb_icon_xuanzeqishouqi');}}window.onresize();};this.closeall=()=>{this.openedall=false;for( var all = this.root.getElementsByClassName("jry_wb_tree_one_body_children"),i = 0,n = all.length;i<n;i++){if(all[i].innerHTML!=''){all[i].style.display='none';all[i].parentNode.children[0].children[0].classList.remove('jry_wb_icon_xuanzeqishouqi'),all[i].parentNode.children[0].children[0].classList.add('jry_wb_icon_xuanzeqizhankai');}}window.onresize();};}function jry_wb_get_user_head_out(user){return 'animation: '+user.head_special.mouse_out.result+'-moz-animation:'+user.head_special.mouse_out.result+'-webkit-animation:'+user.head_special.mouse_out.result+'-o-animation:'+user.head_special.mouse_out.result;}function jry_wb_get_user_head_on(user){return 'animation: '+user.head_special.mouse_on.result+'-moz-animation:'+user.head_special.mouse_on.result+'-webkit-animation:'+user.head_special.mouse_on.result+'-o-animation:'+user.head_special.mouse_on.result;}function jry_wb_set_user_head_special(user,img){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_out.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_out.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_out.times==-1?'infinite':user.head_special.mouse_out.times;img.style.MozAnimationDirection=img.style.animationDirection='initial';img.style.MozAnimationDelay=img.style.animationDelay="initial";img.style.MozAnimationTimingFunction=img.style.animationTimingFunction="linear";img.style.MozAnimationPlayState=img.style.animationPlayState="initial";if(img.tagName=='IMG')img.src=jry_wb_get_user_head(user);else img.style.backgroundImage='url('+jry_wb_get_user_head(user)+')',img.style.backgroundRepeat='no-repeat',img.style.backgroundSize="100% 100%";img.onmouseover=function(){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_on.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_on.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_on.times==-1?'infinite':user.head_special.mouse_on.times;};img.onmouseout=function(){img.style.MozAnimationDuration=img.style.animationDuration=user.head_special.mouse_out.speed+'s';img.style.MozAnimationName=img.style.animationName=user.head_special.mouse_out.direction?'jry_wb_rotate_clockwise':'jry_wb_rotate_anticlockwise';img.style.MozAnimationIterationCount=img.style.animationIterationCount=user.head_special.mouse_out.times==-1?'infinite':user.head_special.mouse_out.times;};img.setAttribute('name','jry_wb_user_head_'+user.id);}jry_wb_getting_user=[];jry_wb_getting_user_call_back=[];function jry_wb_get_user(id,reload,callback,yibu,admin_mode){if(reload==null)reload = false;if(admin_mode==null)admin_mode=false;var cache_name="users";if(admin_mode)cache_name="jry_wb_manage_user_cache";var data = jry_wb_cache.get(cache_name);if(data!=null)var user=data.find(function (a){ return a.id==id});else var user=null;if(user!=null&&(!reload)&&user.lasttime_sync!=''&&jry_wb_compare_time(new Date(),user.lasttime_sync)<1000*60*60*2){if( typeof callback=='function')callback(user);return;}if(user==null) user={lasttime:"1926-08-17 00:00:00"};var aaa=jry_wb_getting_user.indexOf(id);if(aaa!=-1){jry_wb_getting_user_call_back[aaa].push(callback);return;}var i=jry_wb_getting_user.length;jry_wb_getting_user[i]=id;jry_wb_getting_user_call_back[i]=[];jry_wb_ajax_load_data(jry_wb_message.jry_wb_get_message+'jry_wb_get_user.php?id='+id+'&lasttime='+user.lasttime+'&admin_mode='+admin_mode,function (data_){var buf = JSON.parse(data_);var data = jry_wb_cache.get(cache_name); if(buf.id==-1){buf=data.find(function (a){return a.id==id});buf.lasttime_sync=new Date();}if(data==null){data = new Array();data.push(buf);}else if(buf!=null){var now = data.find(function(a){return a.id==buf.id});if(now==null)data.push(buf);else data.splice(now,1,buf);}jry_wb_cache.set(cache_name,data);if( typeof callback=='function')callback(buf);var aaa=jry_wb_getting_user.indexOf(id);if(aaa!=-1){jry_wb_getting_user.splice(aaa,1);for(var i=0;i<jry_wb_getting_user_call_back[aaa].length;i++)jry_wb_getting_user_call_back[aaa][i](buf);jry_wb_getting_user_call_back.splice(aaa,1);}jry_wb_loading_off();},null,yibu);}function jry_wb_show_user(addr,user,width,float,inline,after){if(width==null)width='200px';if(float==null)float='';else float='float:'+float+';';var flag = false;if((user==null)||(user.show==null&&user.name==null&&user.head==null)){user={color:666666,show:'用户已消失'};flag = true;}else if(user!=null&&!user.use){user={color:666666,show:'[禁止使用]'};flag = true;}if(inline){var adder = document.createElement("span");adder.classList.add("jry_wb_show_user_inline");adder.style='width:'+width;}else{var adder = document.createElement("div");adder.classList.add("jry_wb_show_user");adder.style = float+';width:'+width+';overflow:hidden;';}adder.style.background="#"+user.color;if(user.show!=null)adder.innerHTML = user.show;else{var span = document.createElement("span");adder.appendChild(span);span.innerHTML = user.name;span.setAttribute('name','jry_wb_user_name_'+user.id);var img = document.createElement("img");jry_wb_set_user_head_special(user,img);adder.appendChild(img);}if(!flag)adder.setAttribute('onclick','jry_wb_get_and_show_user_full('+user.id+',document.body.clientWidth*0.75,document.body.clientHeight*0.75)');if(after==undefined||after.nextSibling==null)addr.appendChild(adder);else addr.insertBefore(adder,after.nextSibling);adder = null;}function jry_wb_show_user_full(user,width,height){if((user==null)||(user.show==null&&user.name==null&&user.head==null))return jry_wb_beautiful_alert.alert('这个用户不见了','可能去火星了');if(user!=null&&!user.use)return jry_wb_beautiful_alert.alert('这个用户被送到'+decodeURI('%E5%B9%BB%E6%83%B3%E4%B9%A1')+'了',atob('Qm95IG5leHQgY29tcHV0ZXIh'));var title = jry_wb_beautiful_alert.frame('用户查看',width,height,(document.body.clientWidth-width)/2,(document.body.clientHeight-height)/2);var Confirm = document.createElement("button"); title.appendChild(Confirm);  Confirm.type="button"; Confirm.innerHTML="关闭"; Confirm.style='float:right;margin-right:20px;';Confirm.onclick=function(){jry_wb_beautiful_alert.close();};Confirm.classList.add("jry_wb_button","jry_wb_button_size_small","jry_wb_color_normal");Confirm = null;jry_wb_beautiful_alert.msgObj.align="center";var table = document.createElement("table");jry_wb_beautiful_alert.msgObj.appendChild(table);table.border = 1;table.width="75%";jry_wb_show_tr_no_input(table,'ID',user.id);jry_wb_show_tr_no_input(table,'昵称',user.name).children[0].setAttribute('name','jry_wb_user_name_'+user.id);var tr = document.createElement("tr");table.appendChild(tr);var td = document.createElement("td");td.width="400";var h55 = document.createElement("h56");td.appendChild(h55);h55.innerHTML='头像';tr.appendChild(td);td = null;var td = document.createElement("td");td.style="overflow: hidden;"; var img = document.createElement("img");jry_wb_set_user_head_special(user,img);td.appendChild(img);img.height = 80;img.width = 80;tr.appendChild(td);td = null;tr = null;jry_wb_show_tr_no_input(table,'绿币',user.green_money);jry_wb_show_tr_no_input(table,'注册日期',user.enroldate);jry_wb_show_tr_no_input(table,'权限组',user.competencename);if(user.sex==1)jry_wb_show_tr_no_input(table,'性别','男');else if(user.sex==0)jry_wb_show_tr_no_input(table,'性别','女');else if(user.sex==2)jry_wb_show_tr_no_input(table,'性别','女装大佬'); else jry_wb_show_tr_no_input(table,'性别','???');jry_wb_show_tr_no_input(table,'电话',user.tel);jry_wb_show_tr_no_input(table,'邮箱',user.mail);jry_wb_show_tr_no_input(table,'使用情况',user.use==0?'禁止':'正常');if(user.zhushi!=''&&user.zhushi!=null){var td = jry_wb_show_tr_no_input(table,'签名','');td.innerHTML='';new jry_wb_markdown(td,user.id,0,(user.zhushi),false);}if(user.login_addr==-1)jry_wb_show_tr_no_input(table,'登录信息','该用户的隐私策略不允许展示');else{if(user.login_addr.length==0)jry_wb_show_tr_no_input(table,'登录信息','该用户没有登录');else{var td = jry_wb_show_tr_no_input(table,'登录信息','该用户的隐私策略不允许展示');td.innerHTML='';var h55 = document.createElement("h56");td.appendChild(h55); for( var i = 0,n = user.login_addr.length;i<n;i++){var li = document.createElement("li");h55.appendChild(li);if(typeof user.login_addr[i]=='object')li.innerHTML = user.login_addr[i].data;else li.innerHTML = user.login_addr[i];}}}<?php if(JRY_WB_OAUTH_SWITCH){ ?>var tr=document.createElement("tr");table.appendChild(tr);var td=document.createElement("td");tr.appendChild(td);td.width="400";td.classList.add('h56');td.innerHTML='第三方接入';var td=document.createElement("td");tr.appendChild(td);td.classList.add('h56');<?php if($JRY_WB_TP_QQ_OAUTH_CONFIG!=NULL){ ?>td.innerHTML+='QQ:';if(user.oauth_qq==null)td.innerHTML+='无<br>';else td.innerHTML+=user.oauth_qq.nickname+'<img width="40px" src="'+user.oauth_qq.figureurl_qq_2+'"><br>';<?php } ?><?php if(JRY_WB_TP_MI_OAUTH_CLIENT_ID!=''){ ?>td.innerHTML+='MI:';if(user.oauth_mi==null)td.innerHTML+='无<br>';else td.innerHTML+=user.oauth_mi.miliaoNick+'<img width="40px" src="'+user.oauth_mi.miliaoIcon_orig+'"><br>';<?php } ?><?php if(JRY_WB_TP_GITHUB_OAUTH_CLIENT_ID!=''){ ?>td.innerHTML+='gayhub:';if(user.oauth_github==null)td.innerHTML+='无<br>';else td.innerHTML+=user.oauth_github.name+','+user.oauth_github.login+'<img width="40px" src="'+user.oauth_github.avatar_url+'"><br>';<?php } ?><?php if(JRY_WB_TP_GITEE_OAUTH_CLIENT_ID!=''){ ?>td.innerHTML+='码云:';if(user.oauth_gitee==null)td.innerHTML+='无<br>';else td.innerHTML+=user.oauth_gitee.name+','+user.oauth_gitee.login+'<img width="40px" src="'+user.oauth_gitee.avatar_url+'"><br>';<?php } ?><?php } ?>jry_wb_beautiful_scroll(jry_wb_beautiful_alert.msgObj);}function jry_wb_show_user_intext(user){if(!user.use){user={color:666666,show:'[禁止使用]'};flag = true;}else if((user==null)||(user.show==null&&user.name==null&&user.head==null)){user={color:666666,show:'用户已消失'};flag = true;}document.write('<span onclick="jry_wb_get_and_show_user_full('+user.id+',document.body.clientWidth*0.75,document.body.clientHeight*0.75)" name="jry_wb_user_name_'+user.id+'" style="background:#'+user.color+';" class="jry_wb_show_user_intext">'+user.name+'</span>');}function jry_wb_get_and_show_user(addr,id,width,float,inline){let after=addr.children[addr.children.length-1];jry_wb_get_user(id,false,function(){var data = jry_wb_cache.get('users');var user = data.find(function (a){ return a.id==id});jry_wb_show_user(addr,user,width,float,inline,after);});}function jry_wb_get_and_show_user_intext(id){jry_wb_get_user(id,false,function(){},false);var data = jry_wb_cache.get('users');var user = data.find(function (a){ return a.id==id});jry_wb_show_user_intext(user);}function jry_wb_get_and_show_user_full(id,width,height){jry_wb_get_user(id,false,function(){var data = jry_wb_cache.get('users');var user = data.find(function (a){ return a.id==id});jry_wb_show_user_full(user,width,height);});}function jry_wb_update_user(user,mode){if(mode==undefined||mode=='head')for(var all=document.getElementsByName('jry_wb_user_head_'+user.id),i=0,n=all.length,head=jry_wb_get_user_head(user);i<n;i++)jry_wb_set_user_head_special(user,all[i]);}function jry_wb_get_user_head(user){if(user.head.type=='default')if(user.sex==0)user.head.type='default_head_woman';else user.head.type='default_head_man';if(user.head.type=='default_head_man')return '<?php echo JRY_WB_DEFULT_MAN_PICTURE;?>';else if(user.head.type=='default_head_woman')return '<?php echo JRY_WB_DEFULT_WOMAN_PICTURE; ?>';else if(user.head.type=='gravatar')return "http://www.gravatar.com/avatar/"+hex_md5(user.mail)+"?size=80&d=404&r=g";else if(user.head.type=='qq'&&user.oauth_qq!=null)return user.oauth_qq.figureurl_qq_2;else if(user.head.type=='github'&&user.oauth_github!=null)return user.oauth_github.avatar_url;else if(user.head.type=='qq')return "https://q2.qlogo.cn/headimg_dl?dst_uin="+user.mail.split('@')[0]+"&spec=100";else if(user.head.type=='gitee')return user.oauth_gitee.avatar_url;else if(user.head.type=='mi')return user.oauth_mi.miliaoIcon_orig;else if(user.head.type=='url')return user.head.url;else if(user.head.type=='netdisk')return jry_wb_message.jry_wb_host+'jry_wb_netdisk/jry_nd_do_file.php?action=open&share_id='+user.head.share_id+'&file_id='+user.head.file_id;}<?php if(JRY_WB_WORD_SPECIAL_FACT_SWITCH){ ?>var jry_wb_word_special_fact=new function(){this.switch = true;this.word=[];jry_wb_add_onclick((event)=>{this.run(event)});this.run = function(event){if(!this.switch)return ;if(this.word.length==0)return;if(typeof event.path!='undefined'&&typeof event.path[0]!='undefined'&&(typeof event.path[0].onclick=='function' ||typeof event.path[0].onmouseup=='function' ||typeof event.path[0].onmousedown=='function' || event.path[0].tagName=='BUTTON' || event.path[0].tagName=='INPUT'))return;if(typeof event.target!='undefined'&&(typeof event.target.onclick=='function' ||typeof event.target.onmouseup=='function' ||typeof event.target.onmousedown=='function' || event.target.tagName=='BUTTON' || event.target.tagName=='INPUT'))return ;if(typeof event.srcElement!='undefined'&&(typeof event.srcElement.onclick=='function' ||typeof event.srcElement.onmouseup=='function' ||typeof event.srcElement.onmousedown=='function' || event.srcElement.tagName=='BUTTON' || event.srcElement.tagName=='INPUT'))return ;if(typeof event.toElement!='undefined'&&(typeof event.toElement.onclick=='function' ||typeof event.toElement.onmouseup=='function' ||typeof event.toElement.onmousedown=='function' || event.toElement.tagName=='BUTTON' || event.toElement.tagName=='INPUT'))return ;var word = document.createElement("span");document.body.appendChild(word);var scrollLeft = document.body.scrollLeft==0?document.documentElement.scrollLeft:document.body.scrollLeft;word.innerHTML = this.word[parseInt(Math.random()*this.word.length%this.word.length)];word.classList.add('jry_wb_word_special_fact');word.style.top=event.clientY-35;word.style.left=Math.min(event.clientX+scrollLeft,document.body.clientWidth+scrollLeft-word.offsetWidth-35);word.style.opacity=1;word.style.fontSize='30px';word.style.position='fixed';setTimeout(function(){word.style.transitionDuration=(event.clientY-35+16)/200+'s';word.style.top=-16;word.style.opacity=0;word.style.fontSize='0px';},5);setTimeout(function(){document.body.removeChild(word);},1000*(event.clientY-35+16)/200);};};<?php } ?>